{"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nvar dotenv = _interopRequireWildcard(require(\"dotenv\"));\nvar _http = _interopRequireDefault(require(\"./src/transports/http\"));\nvar _mysql = _interopRequireDefault(require(\"./src/database/mysql\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n(async function () {\n  dotenv.config();\n  const knex = await _mysql.default.init();\n  _http.default.initialize(knex);\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfaHR0cCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfbXlzcWwiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJjb25maWciLCJrbmV4IiwibXlzcWwiLCJpbml0IiwiaHR0cCIsImluaXRpYWxpemUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcbmltcG9ydCBodHRwIGZyb20gJy4vc3JjL3RyYW5zcG9ydHMvaHR0cCdcbmltcG9ydCBteXNxbCBmcm9tIFwiLi9zcmMvZGF0YWJhc2UvbXlzcWxcIjtcblxuKGFzeW5jIGZ1bmN0aW9uKCkge1xuICAgIGRvdGVudi5jb25maWcoKTtcbiAgICBjb25zdCBrbmV4ID0gYXdhaXQgbXlzcWwuaW5pdCgpO1xuICAgIGh0dHAuaW5pdGlhbGl6ZShrbmV4KTtcbn0oKSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsS0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBRCxzQkFBQSxDQUFBRixPQUFBO0FBQXlDLFNBQUFFLHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBQUEsU0FBQUcseUJBQUFDLENBQUEsNkJBQUFDLE9BQUEsbUJBQUFDLENBQUEsT0FBQUQsT0FBQSxJQUFBRSxDQUFBLE9BQUFGLE9BQUEsWUFBQUYsd0JBQUEsWUFBQUEsQ0FBQUMsQ0FBQSxXQUFBQSxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQSxLQUFBRixDQUFBO0FBQUEsU0FBQVQsd0JBQUFTLENBQUEsRUFBQUUsQ0FBQSxTQUFBQSxDQUFBLElBQUFGLENBQUEsSUFBQUEsQ0FBQSxDQUFBSCxVQUFBLFNBQUFHLENBQUEsZUFBQUEsQ0FBQSx1QkFBQUEsQ0FBQSx5QkFBQUEsQ0FBQSxXQUFBRixPQUFBLEVBQUFFLENBQUEsUUFBQUcsQ0FBQSxHQUFBSix3QkFBQSxDQUFBRyxDQUFBLE9BQUFDLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxHQUFBLENBQUFKLENBQUEsVUFBQUcsQ0FBQSxDQUFBRSxHQUFBLENBQUFMLENBQUEsT0FBQU0sQ0FBQSxLQUFBQyxTQUFBLFVBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxjQUFBLElBQUFELE1BQUEsQ0FBQUUsd0JBQUEsV0FBQUMsQ0FBQSxJQUFBWixDQUFBLG9CQUFBWSxDQUFBLElBQUFILE1BQUEsQ0FBQUksU0FBQSxDQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQWYsQ0FBQSxFQUFBWSxDQUFBLFNBQUFJLENBQUEsR0FBQVIsQ0FBQSxHQUFBQyxNQUFBLENBQUFFLHdCQUFBLENBQUFYLENBQUEsRUFBQVksQ0FBQSxVQUFBSSxDQUFBLEtBQUFBLENBQUEsQ0FBQVgsR0FBQSxJQUFBVyxDQUFBLENBQUFDLEdBQUEsSUFBQVIsTUFBQSxDQUFBQyxjQUFBLENBQUFKLENBQUEsRUFBQU0sQ0FBQSxFQUFBSSxDQUFBLElBQUFWLENBQUEsQ0FBQU0sQ0FBQSxJQUFBWixDQUFBLENBQUFZLENBQUEsWUFBQU4sQ0FBQSxDQUFBUixPQUFBLEdBQUFFLENBQUEsRUFBQUcsQ0FBQSxJQUFBQSxDQUFBLENBQUFjLEdBQUEsQ0FBQWpCLENBQUEsRUFBQU0sQ0FBQSxHQUFBQSxDQUFBO0FBRXhDLG1CQUFpQjtFQUNkaEIsTUFBTSxDQUFDNEIsTUFBTSxDQUFDLENBQUM7RUFDZixNQUFNQyxJQUFJLEdBQUcsTUFBTUMsY0FBSyxDQUFDQyxJQUFJLENBQUMsQ0FBQztFQUMvQkMsYUFBSSxDQUFDQyxVQUFVLENBQUNKLElBQUksQ0FBQztBQUN6QixDQUFDLEVBQUMsQ0FBQyJ9","map":{"version":3,"names":["dotenv","_interopRequireWildcard","require","_http","_interopRequireDefault","_mysql","obj","__esModule","default","_getRequireWildcardCache","e","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","config","knex","mysql","init","http","initialize"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/","sources":["app.js"],"sourcesContent":["import * as dotenv from \"dotenv\";\nimport http from './src/transports/http'\nimport mysql from \"./src/database/mysql\";\n\n(async function() {\n    dotenv.config();\n    const knex = await mysql.init();\n    http.initialize(knex);\n}());\n"],"mappings":";;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,MAAA,GAAAD,sBAAA,CAAAF,OAAA;AAAyC,SAAAE,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAT,wBAAAS,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAH,UAAA,SAAAG,CAAA,eAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,WAAAF,OAAA,EAAAE,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAC,GAAA,CAAAJ,CAAA,UAAAG,CAAA,CAAAE,GAAA,CAAAL,CAAA,OAAAM,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAZ,CAAA,oBAAAY,CAAA,IAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAY,CAAA,SAAAI,CAAA,GAAAR,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAX,CAAA,EAAAY,CAAA,UAAAI,CAAA,KAAAA,CAAA,CAAAX,GAAA,IAAAW,CAAA,CAAAC,GAAA,IAAAR,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAI,CAAA,IAAAV,CAAA,CAAAM,CAAA,IAAAZ,CAAA,CAAAY,CAAA,YAAAN,CAAA,CAAAR,OAAA,GAAAE,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAc,GAAA,CAAAjB,CAAA,EAAAM,CAAA,GAAAA,CAAA;AAExC,mBAAiB;EACdhB,MAAM,CAAC4B,MAAM,CAAC,CAAC;EACf,MAAMC,IAAI,GAAG,MAAMC,cAAK,CAACC,IAAI,CAAC,CAAC;EAC/BC,aAAI,CAACC,UAAU,CAACJ,IAAI,CAAC;AACzB,CAAC,EAAC,CAAC"}},"mtime":1699045899852},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/http.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _main = _interopRequireDefault(require(\"./main.handlers\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _authentication = _interopRequireDefault(require(\"./authentication.handlers\"));\nvar _auth = _interopRequireDefault(require(\"./middlewares/auth\"));\nvar _user = _interopRequireDefault(require(\"../database/user\"));\nvar _user2 = _interopRequireDefault(require(\"../services/user\"));\nvar _users = _interopRequireDefault(require(\"./users.handlers\"));\nvar _chat = _interopRequireDefault(require(\"../services/chat\"));\nvar _chatMessages = _interopRequireDefault(require(\"../database/chatMessages\"));\nvar _chat2 = _interopRequireDefault(require(\"./chat.handlers\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst initialize = knex => {\n  const app = (0, _express.default)();\n  app.use((0, _bodyParser.default)());\n  app.use((0, _cors.default)());\n  const _chatMessagesRepository = (0, _chatMessages.default)(knex);\n  const _userRepository = (0, _user.default)(knex);\n  const _userService = (0, _user2.default)(_userRepository);\n  const _chatService = (0, _chat.default)(_chatMessagesRepository, _userService);\n  const mainHandlers = (0, _main.default)();\n  const authenticationHandlers = (0, _authentication.default)();\n  const _usersHandlers = (0, _users.default)();\n  const _chatHandlers = (0, _chat2.default)(_chatService);\n  const authorizationMiddleware = (0, _auth.default)(_userService);\n  app.get('/', mainHandlers.home);\n  app.get('/v1/user/me', authorizationMiddleware, _usersHandlers.me);\n  app.get('/v1/chat', authorizationMiddleware, _chatHandlers.getMessages);\n  app.post('/v1/authentication/by-name', authenticationHandlers.byName);\n  app.post('/v1/chat', authorizationMiddleware, _chatHandlers.sendMessage);\n  app.listen(process.env.PORT);\n};\nconst http = {\n  initialize\n};\nvar _default = exports.default = http;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX21haW4iLCJfYm9keVBhcnNlciIsIl9jb3JzIiwiX2F1dGhlbnRpY2F0aW9uIiwiX2F1dGgiLCJfdXNlciIsIl91c2VyMiIsIl91c2VycyIsIl9jaGF0IiwiX2NoYXRNZXNzYWdlcyIsIl9jaGF0MiIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiaW5pdGlhbGl6ZSIsImtuZXgiLCJhcHAiLCJleHByZXNzIiwidXNlIiwiYm9keVBhcnNlciIsImNvcnMiLCJfY2hhdE1lc3NhZ2VzUmVwb3NpdG9yeSIsImNoYXRNZXNzYWdlc1JlcG9zaXRvcnkiLCJfdXNlclJlcG9zaXRvcnkiLCJ1c2VyUmVwb3NpdG9yeSIsIl91c2VyU2VydmljZSIsInVzZXJTZXJ2aWNlIiwiX2NoYXRTZXJ2aWNlIiwiY2hhdFNlcnZpY2UiLCJtYWluSGFuZGxlcnMiLCJtaCIsImF1dGhlbnRpY2F0aW9uSGFuZGxlcnMiLCJhdXRoSCIsIl91c2Vyc0hhbmRsZXJzIiwidXNlcnNIYW5kbGVycyIsIl9jaGF0SGFuZGxlcnMiLCJjaGF0SGFuZGxlcnMiLCJhdXRob3JpemF0aW9uTWlkZGxld2FyZSIsImF1dGhNaWRkbGV3YXJlIiwiZ2V0IiwiaG9tZSIsIm1lIiwiZ2V0TWVzc2FnZXMiLCJwb3N0IiwiYnlOYW1lIiwic2VuZE1lc3NhZ2UiLCJsaXN0ZW4iLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsImh0dHAiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3RyYW5zcG9ydHMvIiwic291cmNlcyI6WyJodHRwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgbWggZnJvbSBcIi4vbWFpbi5oYW5kbGVyc1wiXG5pbXBvcnQgYm9keVBhcnNlciBmcm9tIFwiYm9keS1wYXJzZXJcIlxuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIlxuaW1wb3J0IGF1dGhIIGZyb20gXCIuL2F1dGhlbnRpY2F0aW9uLmhhbmRsZXJzXCJcbmltcG9ydCBhdXRoTWlkZGxld2FyZSBmcm9tIFwiLi9taWRkbGV3YXJlcy9hdXRoXCI7XG5pbXBvcnQgdXNlclJlcG9zaXRvcnkgZnJvbSBcIi4uL2RhdGFiYXNlL3VzZXJcIjtcbmltcG9ydCB1c2VyU2VydmljZSBmcm9tIFwiLi4vc2VydmljZXMvdXNlclwiO1xuaW1wb3J0IHVzZXJzSGFuZGxlcnMgZnJvbSBcIi4vdXNlcnMuaGFuZGxlcnNcIjtcbmltcG9ydCBjaGF0U2VydmljZSBmcm9tIFwiLi4vc2VydmljZXMvY2hhdFwiO1xuaW1wb3J0IGNoYXRNZXNzYWdlc1JlcG9zaXRvcnkgZnJvbSBcIi4uL2RhdGFiYXNlL2NoYXRNZXNzYWdlc1wiO1xuaW1wb3J0IGNoYXRIYW5kbGVycyBmcm9tIFwiLi9jaGF0LmhhbmRsZXJzXCI7XG5cbmNvbnN0IGluaXRpYWxpemUgPSAoa25leCkgPT4ge1xuICAgIGNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuICAgIGFwcC51c2UoYm9keVBhcnNlcigpKTtcbiAgICBhcHAudXNlKGNvcnMoKSlcblxuICAgIGNvbnN0IF9jaGF0TWVzc2FnZXNSZXBvc2l0b3J5ID0gY2hhdE1lc3NhZ2VzUmVwb3NpdG9yeShrbmV4KTtcblxuICAgIGNvbnN0IF91c2VyUmVwb3NpdG9yeSA9IHVzZXJSZXBvc2l0b3J5KGtuZXgpO1xuICAgIGNvbnN0IF91c2VyU2VydmljZSA9IHVzZXJTZXJ2aWNlKF91c2VyUmVwb3NpdG9yeSk7XG5cbiAgICBjb25zdCBfY2hhdFNlcnZpY2UgPSBjaGF0U2VydmljZShcbiAgICAgICAgX2NoYXRNZXNzYWdlc1JlcG9zaXRvcnksIF91c2VyU2VydmljZVxuICAgICk7XG5cbiAgICBjb25zdCBtYWluSGFuZGxlcnMgPSBtaCgpO1xuICAgIGNvbnN0IGF1dGhlbnRpY2F0aW9uSGFuZGxlcnMgPSBhdXRoSCgpO1xuICAgIGNvbnN0IF91c2Vyc0hhbmRsZXJzID0gdXNlcnNIYW5kbGVycygpO1xuICAgIGNvbnN0IF9jaGF0SGFuZGxlcnMgPSBjaGF0SGFuZGxlcnMoX2NoYXRTZXJ2aWNlKTtcblxuICAgIGNvbnN0IGF1dGhvcml6YXRpb25NaWRkbGV3YXJlID0gYXV0aE1pZGRsZXdhcmUoX3VzZXJTZXJ2aWNlKTtcblxuICAgIGFwcC5nZXQoJy8nLCBtYWluSGFuZGxlcnMuaG9tZSk7XG4gICAgYXBwLmdldCgnL3YxL3VzZXIvbWUnLCBhdXRob3JpemF0aW9uTWlkZGxld2FyZSwgX3VzZXJzSGFuZGxlcnMubWUpXG4gICAgYXBwLmdldCgnL3YxL2NoYXQnLCBhdXRob3JpemF0aW9uTWlkZGxld2FyZSwgX2NoYXRIYW5kbGVycy5nZXRNZXNzYWdlcyk7XG5cbiAgICBhcHAucG9zdCgnL3YxL2F1dGhlbnRpY2F0aW9uL2J5LW5hbWUnLCBhdXRoZW50aWNhdGlvbkhhbmRsZXJzLmJ5TmFtZSk7XG4gICAgYXBwLnBvc3QoJy92MS9jaGF0JywgYXV0aG9yaXphdGlvbk1pZGRsZXdhcmUsIF9jaGF0SGFuZGxlcnMuc2VuZE1lc3NhZ2UpO1xuXG4gICAgYXBwLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JUKTtcblxuXG59O1xuXG5jb25zdCBodHRwID0ge1xuICAgIGluaXRpYWxpemVcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGh0dHA7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFdBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLEtBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLGVBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLEtBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFNLEtBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFPLE1BQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFRLE1BQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFTLEtBQUEsR0FBQVYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFVLGFBQUEsR0FBQVgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFXLE1BQUEsR0FBQVosc0JBQUEsQ0FBQUMsT0FBQTtBQUEyQyxTQUFBRCx1QkFBQWEsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUUzQyxNQUFNRyxVQUFVLEdBQUlDLElBQUksSUFBSztFQUN6QixNQUFNQyxHQUFHLEdBQUcsSUFBQUMsZ0JBQU8sRUFBQyxDQUFDO0VBRXJCRCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxJQUFBQyxtQkFBVSxFQUFDLENBQUMsQ0FBQztFQUNyQkgsR0FBRyxDQUFDRSxHQUFHLENBQUMsSUFBQUUsYUFBSSxFQUFDLENBQUMsQ0FBQztFQUVmLE1BQU1DLHVCQUF1QixHQUFHLElBQUFDLHFCQUFzQixFQUFDUCxJQUFJLENBQUM7RUFFNUQsTUFBTVEsZUFBZSxHQUFHLElBQUFDLGFBQWMsRUFBQ1QsSUFBSSxDQUFDO0VBQzVDLE1BQU1VLFlBQVksR0FBRyxJQUFBQyxjQUFXLEVBQUNILGVBQWUsQ0FBQztFQUVqRCxNQUFNSSxZQUFZLEdBQUcsSUFBQUMsYUFBVyxFQUM1QlAsdUJBQXVCLEVBQUVJLFlBQzdCLENBQUM7RUFFRCxNQUFNSSxZQUFZLEdBQUcsSUFBQUMsYUFBRSxFQUFDLENBQUM7RUFDekIsTUFBTUMsc0JBQXNCLEdBQUcsSUFBQUMsdUJBQUssRUFBQyxDQUFDO0VBQ3RDLE1BQU1DLGNBQWMsR0FBRyxJQUFBQyxjQUFhLEVBQUMsQ0FBQztFQUN0QyxNQUFNQyxhQUFhLEdBQUcsSUFBQUMsY0FBWSxFQUFDVCxZQUFZLENBQUM7RUFFaEQsTUFBTVUsdUJBQXVCLEdBQUcsSUFBQUMsYUFBYyxFQUFDYixZQUFZLENBQUM7RUFFNURULEdBQUcsQ0FBQ3VCLEdBQUcsQ0FBQyxHQUFHLEVBQUVWLFlBQVksQ0FBQ1csSUFBSSxDQUFDO0VBQy9CeEIsR0FBRyxDQUFDdUIsR0FBRyxDQUFDLGFBQWEsRUFBRUYsdUJBQXVCLEVBQUVKLGNBQWMsQ0FBQ1EsRUFBRSxDQUFDO0VBQ2xFekIsR0FBRyxDQUFDdUIsR0FBRyxDQUFDLFVBQVUsRUFBRUYsdUJBQXVCLEVBQUVGLGFBQWEsQ0FBQ08sV0FBVyxDQUFDO0VBRXZFMUIsR0FBRyxDQUFDMkIsSUFBSSxDQUFDLDRCQUE0QixFQUFFWixzQkFBc0IsQ0FBQ2EsTUFBTSxDQUFDO0VBQ3JFNUIsR0FBRyxDQUFDMkIsSUFBSSxDQUFDLFVBQVUsRUFBRU4sdUJBQXVCLEVBQUVGLGFBQWEsQ0FBQ1UsV0FBVyxDQUFDO0VBRXhFN0IsR0FBRyxDQUFDOEIsTUFBTSxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDO0FBR2hDLENBQUM7QUFFRCxNQUFNQyxJQUFJLEdBQUc7RUFDVHBDO0FBQ0osQ0FBQztBQUFDLElBQUFxQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQXZDLE9BQUEsR0FFYXFDLElBQUkifQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_main","_bodyParser","_cors","_authentication","_auth","_user","_user2","_users","_chat","_chatMessages","_chat2","obj","__esModule","default","initialize","knex","app","express","use","bodyParser","cors","_chatMessagesRepository","chatMessagesRepository","_userRepository","userRepository","_userService","userService","_chatService","chatService","mainHandlers","mh","authenticationHandlers","authH","_usersHandlers","usersHandlers","_chatHandlers","chatHandlers","authorizationMiddleware","authMiddleware","get","home","me","getMessages","post","byName","sendMessage","listen","process","env","PORT","http","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["http.js"],"sourcesContent":["import express from 'express'\nimport mh from \"./main.handlers\"\nimport bodyParser from \"body-parser\"\nimport cors from \"cors\"\nimport authH from \"./authentication.handlers\"\nimport authMiddleware from \"./middlewares/auth\";\nimport userRepository from \"../database/user\";\nimport userService from \"../services/user\";\nimport usersHandlers from \"./users.handlers\";\nimport chatService from \"../services/chat\";\nimport chatMessagesRepository from \"../database/chatMessages\";\nimport chatHandlers from \"./chat.handlers\";\n\nconst initialize = (knex) => {\n    const app = express();\n\n    app.use(bodyParser());\n    app.use(cors())\n\n    const _chatMessagesRepository = chatMessagesRepository(knex);\n\n    const _userRepository = userRepository(knex);\n    const _userService = userService(_userRepository);\n\n    const _chatService = chatService(\n        _chatMessagesRepository, _userService\n    );\n\n    const mainHandlers = mh();\n    const authenticationHandlers = authH();\n    const _usersHandlers = usersHandlers();\n    const _chatHandlers = chatHandlers(_chatService);\n\n    const authorizationMiddleware = authMiddleware(_userService);\n\n    app.get('/', mainHandlers.home);\n    app.get('/v1/user/me', authorizationMiddleware, _usersHandlers.me)\n    app.get('/v1/chat', authorizationMiddleware, _chatHandlers.getMessages);\n\n    app.post('/v1/authentication/by-name', authenticationHandlers.byName);\n    app.post('/v1/chat', authorizationMiddleware, _chatHandlers.sendMessage);\n\n    app.listen(process.env.PORT);\n\n\n};\n\nconst http = {\n    initialize\n};\n\nexport default http;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,WAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,KAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,eAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,KAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,KAAA,GAAAP,sBAAA,CAAAC,OAAA;AACA,IAAAO,MAAA,GAAAR,sBAAA,CAAAC,OAAA;AACA,IAAAQ,MAAA,GAAAT,sBAAA,CAAAC,OAAA;AACA,IAAAS,KAAA,GAAAV,sBAAA,CAAAC,OAAA;AACA,IAAAU,aAAA,GAAAX,sBAAA,CAAAC,OAAA;AACA,IAAAW,MAAA,GAAAZ,sBAAA,CAAAC,OAAA;AAA2C,SAAAD,uBAAAa,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE3C,MAAMG,UAAU,GAAIC,IAAI,IAAK;EACzB,MAAMC,GAAG,GAAG,IAAAC,gBAAO,EAAC,CAAC;EAErBD,GAAG,CAACE,GAAG,CAAC,IAAAC,mBAAU,EAAC,CAAC,CAAC;EACrBH,GAAG,CAACE,GAAG,CAAC,IAAAE,aAAI,EAAC,CAAC,CAAC;EAEf,MAAMC,uBAAuB,GAAG,IAAAC,qBAAsB,EAACP,IAAI,CAAC;EAE5D,MAAMQ,eAAe,GAAG,IAAAC,aAAc,EAACT,IAAI,CAAC;EAC5C,MAAMU,YAAY,GAAG,IAAAC,cAAW,EAACH,eAAe,CAAC;EAEjD,MAAMI,YAAY,GAAG,IAAAC,aAAW,EAC5BP,uBAAuB,EAAEI,YAC7B,CAAC;EAED,MAAMI,YAAY,GAAG,IAAAC,aAAE,EAAC,CAAC;EACzB,MAAMC,sBAAsB,GAAG,IAAAC,uBAAK,EAAC,CAAC;EACtC,MAAMC,cAAc,GAAG,IAAAC,cAAa,EAAC,CAAC;EACtC,MAAMC,aAAa,GAAG,IAAAC,cAAY,EAACT,YAAY,CAAC;EAEhD,MAAMU,uBAAuB,GAAG,IAAAC,aAAc,EAACb,YAAY,CAAC;EAE5DT,GAAG,CAACuB,GAAG,CAAC,GAAG,EAAEV,YAAY,CAACW,IAAI,CAAC;EAC/BxB,GAAG,CAACuB,GAAG,CAAC,aAAa,EAAEF,uBAAuB,EAAEJ,cAAc,CAACQ,EAAE,CAAC;EAClEzB,GAAG,CAACuB,GAAG,CAAC,UAAU,EAAEF,uBAAuB,EAAEF,aAAa,CAACO,WAAW,CAAC;EAEvE1B,GAAG,CAAC2B,IAAI,CAAC,4BAA4B,EAAEZ,sBAAsB,CAACa,MAAM,CAAC;EACrE5B,GAAG,CAAC2B,IAAI,CAAC,UAAU,EAAEN,uBAAuB,EAAEF,aAAa,CAACU,WAAW,CAAC;EAExE7B,GAAG,CAAC8B,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,IAAI,CAAC;AAGhC,CAAC;AAED,MAAMC,IAAI,GAAG;EACTpC;AACJ,CAAC;AAAC,IAAAqC,QAAA,GAAAC,OAAA,CAAAvC,OAAA,GAEaqC,IAAI"}},"mtime":1699044101151},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/main.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst mainHandlers = () => {\n  const home = (_, res) => {\n    return res.json({\n      ok: true\n    });\n  };\n  return {\n    home\n  };\n};\nvar _default = exports.default = mainHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluSGFuZGxlcnMiLCJob21lIiwiXyIsInJlcyIsImpzb24iLCJvayIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3RyYW5zcG9ydHMvIiwic291cmNlcyI6WyJtYWluLmhhbmRsZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1haW5IYW5kbGVycyA9ICgpID0+IHtcbiAgICBjb25zdCBob21lID0gKF8sIHJlcykgPT4ge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgICAgICAgb2s6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGhvbWVcbiAgICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbWFpbkhhbmRsZXJzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxZQUFZLEdBQUdBLENBQUEsS0FBTTtFQUN2QixNQUFNQyxJQUFJLEdBQUdBLENBQUNDLENBQUMsRUFBRUMsR0FBRyxLQUFLO0lBQ3JCLE9BQU9BLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDO01BQ1pDLEVBQUUsRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNOLENBQUM7RUFFRCxPQUFPO0lBQ0hKO0VBQ0osQ0FBQztBQUNMLENBQUM7QUFBQyxJQUFBSyxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVhUixZQUFZIn0=","map":{"version":3,"names":["mainHandlers","home","_","res","json","ok","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["main.handlers.js"],"sourcesContent":["const mainHandlers = () => {\n    const home = (_, res) => {\n        return res.json({\n            ok: true\n        });\n    };\n\n    return {\n        home\n    };\n};\n\nexport default mainHandlers;\n"],"mappings":";;;;;;AAAA,MAAMA,YAAY,GAAGA,CAAA,KAAM;EACvB,MAAMC,IAAI,GAAGA,CAACC,CAAC,EAAEC,GAAG,KAAK;IACrB,OAAOA,GAAG,CAACC,IAAI,CAAC;MACZC,EAAE,EAAE;IACR,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACHJ;EACJ,CAAC;AACL,CAAC;AAAC,IAAAK,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaR,YAAY"}},"mtime":1699045729945},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/authentication.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _user = require(\"../dto/user\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/**\n * @param {usersService()} usersService\n * @param {userVocabularyService()} userVocabularyService\n * @param {userPassedCoursesService()} userPassedCoursesService\n * @returns {{byName: byName}}\n */\nconst authenticationHandlers = (usersService, userVocabularyService, userPassedCoursesService) => {\n  /**\n   * @param {express.Request} req\n   * @param {express.Response} res\n   */\n  const byName = async (req, res) => {\n    const name = req.body.display_name;\n    if (!name) {\n      return res.status(400).json({\n        type: 'authentication/invalid-name',\n        message: '`name` field is required'\n      });\n    }\n    const [token, user] = await usersService.createUser(name);\n    return res.status(201).json({\n      data: {\n        token,\n        user: {\n          me: (0, _user.newMeUser)(user),\n          vocabulary: await userVocabularyService.getUserVocabulary(user.id),\n          passed_courses: (await userPassedCoursesService.getPassedCoursesByUserID(user.id)) || []\n        }\n      }\n    });\n  };\n  return {\n    byName\n  };\n};\nvar _default = exports.default = authenticationHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImF1dGhlbnRpY2F0aW9uSGFuZGxlcnMiLCJ1c2Vyc1NlcnZpY2UiLCJ1c2VyVm9jYWJ1bGFyeVNlcnZpY2UiLCJ1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UiLCJieU5hbWUiLCJyZXEiLCJyZXMiLCJuYW1lIiwiYm9keSIsImRpc3BsYXlfbmFtZSIsInN0YXR1cyIsImpzb24iLCJ0eXBlIiwibWVzc2FnZSIsInRva2VuIiwidXNlciIsImNyZWF0ZVVzZXIiLCJkYXRhIiwibWUiLCJuZXdNZVVzZXIiLCJ2b2NhYnVsYXJ5IiwiZ2V0VXNlclZvY2FidWxhcnkiLCJpZCIsInBhc3NlZF9jb3Vyc2VzIiwiZ2V0UGFzc2VkQ291cnNlc0J5VXNlcklEIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy90cmFuc3BvcnRzLyIsInNvdXJjZXMiOlsiYXV0aGVudGljYXRpb24uaGFuZGxlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcydcbmltcG9ydCB7bmV3TWVVc2VyfSBmcm9tIFwiLi4vZHRvL3VzZXJcIjtcblxuLyoqXG4gKiBAcGFyYW0ge3VzZXJzU2VydmljZSgpfSB1c2Vyc1NlcnZpY2VcbiAqIEBwYXJhbSB7dXNlclZvY2FidWxhcnlTZXJ2aWNlKCl9IHVzZXJWb2NhYnVsYXJ5U2VydmljZVxuICogQHBhcmFtIHt1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UoKX0gdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlXG4gKiBAcmV0dXJucyB7e2J5TmFtZTogYnlOYW1lfX1cbiAqL1xuY29uc3QgYXV0aGVudGljYXRpb25IYW5kbGVycyA9ICh1c2Vyc1NlcnZpY2UsIHVzZXJWb2NhYnVsYXJ5U2VydmljZSwgdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlKSA9PiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtleHByZXNzLlJlcXVlc3R9IHJlcVxuICAgICAqIEBwYXJhbSB7ZXhwcmVzcy5SZXNwb25zZX0gcmVzXG4gICAgICovXG4gICAgY29uc3QgYnlOYW1lID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSByZXEuYm9keS5kaXNwbGF5X25hbWU7XG5cbiAgICAgICAgaWYoIW5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2F1dGhlbnRpY2F0aW9uL2ludmFsaWQtbmFtZScsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ2BuYW1lYCBmaWVsZCBpcyByZXF1aXJlZCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgW3Rva2VuLCB1c2VyXSA9IGF3YWl0IHVzZXJzU2VydmljZS5jcmVhdGVVc2VyKG5hbWUpO1xuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgICBtZTogbmV3TWVVc2VyKHVzZXIpLFxuICAgICAgICAgICAgICAgICAgICB2b2NhYnVsYXJ5OiBhd2FpdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UuZ2V0VXNlclZvY2FidWxhcnkodXNlci5pZCksXG4gICAgICAgICAgICAgICAgICAgIHBhc3NlZF9jb3Vyc2VzOiAoYXdhaXQgdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlLmdldFBhc3NlZENvdXJzZXNCeVVzZXJJRCh1c2VyLmlkKSkgfHwgW10sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGJ5TmFtZVxuICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhdXRoZW50aWNhdGlvbkhhbmRsZXJzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFELE9BQUE7QUFBc0MsU0FBQUQsdUJBQUFHLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUcsc0JBQXNCLEdBQUdBLENBQUNDLFlBQVksRUFBRUMscUJBQXFCLEVBQUVDLHdCQUF3QixLQUFLO0VBQzlGO0FBQ0o7QUFDQTtBQUNBO0VBQ0ksTUFBTUMsTUFBTSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0lBQy9CLE1BQU1DLElBQUksR0FBR0YsR0FBRyxDQUFDRyxJQUFJLENBQUNDLFlBQVk7SUFFbEMsSUFBRyxDQUFDRixJQUFJLEVBQUU7TUFDTixPQUFPRCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQ3hCQyxJQUFJLEVBQUUsNkJBQTZCO1FBQ25DQyxPQUFPLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDTjtJQUVBLE1BQU0sQ0FBQ0MsS0FBSyxFQUFFQyxJQUFJLENBQUMsR0FBRyxNQUFNZCxZQUFZLENBQUNlLFVBQVUsQ0FBQ1QsSUFBSSxDQUFDO0lBRXpELE9BQU9ELEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJNLElBQUksRUFBRTtRQUNGSCxLQUFLO1FBQ0xDLElBQUksRUFBRTtVQUNGRyxFQUFFLEVBQUUsSUFBQUMsZUFBUyxFQUFDSixJQUFJLENBQUM7VUFDbkJLLFVBQVUsRUFBRSxNQUFNbEIscUJBQXFCLENBQUNtQixpQkFBaUIsQ0FBQ04sSUFBSSxDQUFDTyxFQUFFLENBQUM7VUFDbEVDLGNBQWMsRUFBRSxDQUFDLE1BQU1wQix3QkFBd0IsQ0FBQ3FCLHdCQUF3QixDQUFDVCxJQUFJLENBQUNPLEVBQUUsQ0FBQyxLQUFLO1FBQzFGO01BQ0o7SUFDSixDQUFDLENBQUM7RUFDTixDQUFDO0VBRUQsT0FBTztJQUNIbEI7RUFDSixDQUFDO0FBQ0wsQ0FBQztBQUFDLElBQUFxQixRQUFBLEdBQUFDLE9BQUEsQ0FBQTNCLE9BQUEsR0FFYUMsc0JBQXNCIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_user","obj","__esModule","default","authenticationHandlers","usersService","userVocabularyService","userPassedCoursesService","byName","req","res","name","body","display_name","status","json","type","message","token","user","createUser","data","me","newMeUser","vocabulary","getUserVocabulary","id","passed_courses","getPassedCoursesByUserID","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["authentication.handlers.js"],"sourcesContent":["import express from 'express'\nimport {newMeUser} from \"../dto/user\";\n\n/**\n * @param {usersService()} usersService\n * @param {userVocabularyService()} userVocabularyService\n * @param {userPassedCoursesService()} userPassedCoursesService\n * @returns {{byName: byName}}\n */\nconst authenticationHandlers = (usersService, userVocabularyService, userPassedCoursesService) => {\n    /**\n     * @param {express.Request} req\n     * @param {express.Response} res\n     */\n    const byName = async (req, res) => {\n        const name = req.body.display_name;\n\n        if(!name) {\n            return res.status(400).json({\n                type: 'authentication/invalid-name',\n                message: '`name` field is required'\n            });\n        }\n\n        const [token, user] = await usersService.createUser(name);\n\n        return res.status(201).json({\n            data: {\n                token,\n                user: {\n                    me: newMeUser(user),\n                    vocabulary: await userVocabularyService.getUserVocabulary(user.id),\n                    passed_courses: (await userPassedCoursesService.getPassedCoursesByUserID(user.id)) || [],\n                },\n            }\n        });\n    };\n\n    return {\n        byName\n    };\n};\n\nexport default authenticationHandlers;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAAsC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA,MAAMG,sBAAsB,GAAGA,CAACC,YAAY,EAAEC,qBAAqB,EAAEC,wBAAwB,KAAK;EAC9F;AACJ;AACA;AACA;EACI,MAAMC,MAAM,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;IAC/B,MAAMC,IAAI,GAAGF,GAAG,CAACG,IAAI,CAACC,YAAY;IAElC,IAAG,CAACF,IAAI,EAAE;MACN,OAAOD,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QACxBC,IAAI,EAAE,6BAA6B;QACnCC,OAAO,EAAE;MACb,CAAC,CAAC;IACN;IAEA,MAAM,CAACC,KAAK,EAAEC,IAAI,CAAC,GAAG,MAAMd,YAAY,CAACe,UAAU,CAACT,IAAI,CAAC;IAEzD,OAAOD,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBM,IAAI,EAAE;QACFH,KAAK;QACLC,IAAI,EAAE;UACFG,EAAE,EAAE,IAAAC,eAAS,EAACJ,IAAI,CAAC;UACnBK,UAAU,EAAE,MAAMlB,qBAAqB,CAACmB,iBAAiB,CAACN,IAAI,CAACO,EAAE,CAAC;UAClEC,cAAc,EAAE,CAAC,MAAMpB,wBAAwB,CAACqB,wBAAwB,CAACT,IAAI,CAACO,EAAE,CAAC,KAAK;QAC1F;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACHlB;EACJ,CAAC;AACL,CAAC;AAAC,IAAAqB,QAAA,GAAAC,OAAA,CAAA3B,OAAA,GAEaC,sBAAsB"}},"mtime":1699070458840},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/middlewares/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst authMiddleware = userService => async (req, res, next) => {\n  const authorization = req.headers['authorization'] ?? '';\n  const splitedAuthorization = authorization.split(' ');\n  if (splitedAuthorization.length !== 2 || splitedAuthorization[0] !== 'Bearer') {\n    return res.status(401).json({\n      type: 'authorization/invalid-header',\n      message: 'You provided invalid header'\n    });\n  }\n  try {\n    const user = await userService.getUserByToken(splitedAuthorization[1]);\n    req.user = user[0];\n    next();\n  } catch (e) {\n    console.error(e);\n    return res.status(401).json({\n      type: 'authorization/invalid-token',\n      message: 'You provided invalid token'\n    });\n  }\n};\nvar _default = exports.default = authMiddleware;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoTWlkZGxld2FyZSIsInVzZXJTZXJ2aWNlIiwicmVxIiwicmVzIiwibmV4dCIsImF1dGhvcml6YXRpb24iLCJoZWFkZXJzIiwic3BsaXRlZEF1dGhvcml6YXRpb24iLCJzcGxpdCIsImxlbmd0aCIsInN0YXR1cyIsImpzb24iLCJ0eXBlIiwibWVzc2FnZSIsInVzZXIiLCJnZXRVc2VyQnlUb2tlbiIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy90cmFuc3BvcnRzL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhdXRoTWlkZGxld2FyZSA9ICh1c2VyU2VydmljZSkgPT4gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgYXV0aG9yaXphdGlvbiA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ10gPz8gJyc7XG5cbiAgICBjb25zdCBzcGxpdGVkQXV0aG9yaXphdGlvbiA9IGF1dGhvcml6YXRpb24uc3BsaXQoJyAnKTtcblxuXG4gICAgaWYoc3BsaXRlZEF1dGhvcml6YXRpb24ubGVuZ3RoICE9PSAyIHx8IHNwbGl0ZWRBdXRob3JpemF0aW9uWzBdICE9PSAnQmVhcmVyJykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgICAgdHlwZTogJ2F1dGhvcml6YXRpb24vaW52YWxpZC1oZWFkZXInLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBwcm92aWRlZCBpbnZhbGlkIGhlYWRlcicsXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlLmdldFVzZXJCeVRva2VuKHNwbGl0ZWRBdXRob3JpemF0aW9uWzFdKTtcblxuICAgICAgICByZXEudXNlciA9IHVzZXJbMF07XG4gICAgICAgIG5leHQoKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICAgIHR5cGU6ICdhdXRob3JpemF0aW9uL2ludmFsaWQtdG9rZW4nLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBwcm92aWRlZCBpbnZhbGlkIHRva2VuJ1xuICAgICAgICB9KVxuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGF1dGhNaWRkbGV3YXJlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxjQUFjLEdBQUlDLFdBQVcsSUFBSyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzlELE1BQU1DLGFBQWEsR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRTtFQUV4RCxNQUFNQyxvQkFBb0IsR0FBR0YsYUFBYSxDQUFDRyxLQUFLLENBQUMsR0FBRyxDQUFDO0VBR3JELElBQUdELG9CQUFvQixDQUFDRSxNQUFNLEtBQUssQ0FBQyxJQUFJRixvQkFBb0IsQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRLEVBQUU7SUFDMUUsT0FBT0osR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QkMsSUFBSSxFQUFFLDhCQUE4QjtNQUNwQ0MsT0FBTyxFQUFFO0lBQ2IsQ0FBQyxDQUFDO0VBQ047RUFFQSxJQUFJO0lBQ0EsTUFBTUMsSUFBSSxHQUFHLE1BQU1iLFdBQVcsQ0FBQ2MsY0FBYyxDQUFDUixvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV0RUwsR0FBRyxDQUFDWSxJQUFJLEdBQUdBLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbEJWLElBQUksQ0FBQyxDQUFDO0VBQ1YsQ0FBQyxDQUFDLE9BQU1ZLENBQUMsRUFBRTtJQUNQQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0YsQ0FBQyxDQUFDO0lBQ2hCLE9BQU9iLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLElBQUksRUFBRSw2QkFBNkI7TUFDbkNDLE9BQU8sRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNOO0FBQ0osQ0FBQztBQUFDLElBQUFNLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWFyQixjQUFjIn0=","map":{"version":3,"names":["authMiddleware","userService","req","res","next","authorization","headers","splitedAuthorization","split","length","status","json","type","message","user","getUserByToken","e","console","error","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/middlewares/","sources":["auth.js"],"sourcesContent":["const authMiddleware = (userService) => async (req, res, next) => {\n    const authorization = req.headers['authorization'] ?? '';\n\n    const splitedAuthorization = authorization.split(' ');\n\n\n    if(splitedAuthorization.length !== 2 || splitedAuthorization[0] !== 'Bearer') {\n        return res.status(401).json({\n            type: 'authorization/invalid-header',\n            message: 'You provided invalid header',\n        })\n    }\n\n    try {\n        const user = await userService.getUserByToken(splitedAuthorization[1]);\n\n        req.user = user[0];\n        next();\n    } catch(e) {\n        console.error(e);\n        return res.status(401).json({\n            type: 'authorization/invalid-token',\n            message: 'You provided invalid token'\n        })\n    }\n};\n\nexport default authMiddleware;\n"],"mappings":";;;;;;AAAA,MAAMA,cAAc,GAAIC,WAAW,IAAK,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC9D,MAAMC,aAAa,GAAGH,GAAG,CAACI,OAAO,CAAC,eAAe,CAAC,IAAI,EAAE;EAExD,MAAMC,oBAAoB,GAAGF,aAAa,CAACG,KAAK,CAAC,GAAG,CAAC;EAGrD,IAAGD,oBAAoB,CAACE,MAAM,KAAK,CAAC,IAAIF,oBAAoB,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;IAC1E,OAAOJ,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBC,IAAI,EAAE,8BAA8B;MACpCC,OAAO,EAAE;IACb,CAAC,CAAC;EACN;EAEA,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMb,WAAW,CAACc,cAAc,CAACR,oBAAoB,CAAC,CAAC,CAAC,CAAC;IAEtEL,GAAG,CAACY,IAAI,GAAGA,IAAI,CAAC,CAAC,CAAC;IAClBV,IAAI,CAAC,CAAC;EACV,CAAC,CAAC,OAAMY,CAAC,EAAE;IACPC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;IAChB,OAAOb,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBC,IAAI,EAAE,6BAA6B;MACnCC,OAAO,EAAE;IACb,CAAC,CAAC;EACN;AACJ,CAAC;AAAC,IAAAM,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEarB,cAAc"}},"mtime":1699055406766},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/database/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _knex = require(\"knex\");\n/**\n * TABLE: users\n * STRUCTURE:\n * id INT AI\n * display_name VARCHAR 64\n * xp INT\n * access_token VARCHAR 512\n */\n/**\n * @param {Knex} knex\n */\nconst getUserByToken = knex => token => {\n  return knex.select('id', 'display_name', 'xp').from('users').where('access_token', token);\n};\n\n/**\n * @param {Knex} knex\n */\nconst getUsersByIDs = knex => ids => {\n  return knex.select('id', 'display_name', 'xp').from('users').where('id', 'IN', ids);\n};\n\n/**\n * @param {Knex} knex\n */\nconst getUserByID = knex => id => {\n  return knex.select('id', 'display_name', 'xp').from('users').where('id', id);\n};\n\n/**\n * @param {Knex} knex\n */\nconst createUser = knex => (displayName, xp, accessToken) => {\n  return knex('users').insert({\n    display_name: displayName,\n    xp,\n    access_token: accessToken\n  }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userRepository = knex => {\n  return {\n    getUserByToken: getUserByToken(knex),\n    getUsersByIDs: getUsersByIDs(knex),\n    getUserByID: getUserByID(knex),\n    createUser: createUser(knex)\n  };\n};\nvar _default = exports.default = userRepository;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfa25leCIsInJlcXVpcmUiLCJnZXRVc2VyQnlUb2tlbiIsImtuZXgiLCJ0b2tlbiIsInNlbGVjdCIsImZyb20iLCJ3aGVyZSIsImdldFVzZXJzQnlJRHMiLCJpZHMiLCJnZXRVc2VyQnlJRCIsImlkIiwiY3JlYXRlVXNlciIsImRpc3BsYXlOYW1lIiwieHAiLCJhY2Nlc3NUb2tlbiIsImluc2VydCIsImRpc3BsYXlfbmFtZSIsImFjY2Vzc190b2tlbiIsInJldHVybmluZyIsInVzZXJSZXBvc2l0b3J5IiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJ1c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tIFwia25leFwiXG5cbi8qKlxuICogVEFCTEU6IHVzZXJzXG4gKiBTVFJVQ1RVUkU6XG4gKiBpZCBJTlQgQUlcbiAqIGRpc3BsYXlfbmFtZSBWQVJDSEFSIDY0XG4gKiB4cCBJTlRcbiAqIGFjY2Vzc190b2tlbiBWQVJDSEFSIDUxMlxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqL1xuY29uc3QgZ2V0VXNlckJ5VG9rZW4gPSAoa25leCkgPT4gKHRva2VuKSA9PiB7XG4gICAgcmV0dXJuIGtuZXguc2VsZWN0KCdpZCcsICdkaXNwbGF5X25hbWUnLCAneHAnKVxuICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAud2hlcmUoJ2FjY2Vzc190b2tlbicsIHRva2VuKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtLbmV4fSBrbmV4XG4gKi9cbmNvbnN0IGdldFVzZXJzQnlJRHMgPSAoa25leCkgPT4gKGlkcykgPT4ge1xuICAgIHJldHVybiBrbmV4LnNlbGVjdCgnaWQnLCAnZGlzcGxheV9uYW1lJywgJ3hwJylcbiAgICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgICAgLndoZXJlKCdpZCcsICdJTicsIGlkcyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7S25leH0ga25leFxuICovXG5jb25zdCBnZXRVc2VyQnlJRCA9IChrbmV4KSA9PiAoaWQpID0+IHtcbiAgICByZXR1cm4ga25leC5zZWxlY3QoJ2lkJywgJ2Rpc3BsYXlfbmFtZScsICd4cCcpXG4gICAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAgIC53aGVyZSgnaWQnLCBpZCk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7S25leH0ga25leFxuICovXG5jb25zdCBjcmVhdGVVc2VyID0gKGtuZXgpID0+IChkaXNwbGF5TmFtZSwgeHAsIGFjY2Vzc1Rva2VuKSA9PiB7XG4gICAgcmV0dXJuIGtuZXgoJ3VzZXJzJykuaW5zZXJ0KHtcbiAgICAgICAgZGlzcGxheV9uYW1lOiBkaXNwbGF5TmFtZSxcbiAgICAgICAgeHAsXG4gICAgICAgIGFjY2Vzc190b2tlbjogYWNjZXNzVG9rZW5cbiAgICB9KS5yZXR1cm5pbmcoJ2lkJyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7S25leH0ga25leFxuICogQHJldHVybnMge3tnZXRVc2VyQnlUb2tlbjogKGZ1bmN0aW9uKCopOiBmdW5jdGlvbigqKTogKil9fVxuICovXG5jb25zdCB1c2VyUmVwb3NpdG9yeSA9IChrbmV4KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0VXNlckJ5VG9rZW46IGdldFVzZXJCeVRva2VuKGtuZXgpLFxuICAgICAgICBnZXRVc2Vyc0J5SURzOiBnZXRVc2Vyc0J5SURzKGtuZXgpLFxuICAgICAgICBnZXRVc2VyQnlJRDogZ2V0VXNlckJ5SUQoa25leCksXG4gICAgICAgIGNyZWF0ZVVzZXI6IGNyZWF0ZVVzZXIoa25leCksXG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlclJlcG9zaXRvcnk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxjQUFjLEdBQUlDLElBQUksSUFBTUMsS0FBSyxJQUFLO0VBQ3hDLE9BQU9ELElBQUksQ0FBQ0UsTUFBTSxDQUFDLElBQUksRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQ3pDQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQ2JDLEtBQUssQ0FBQyxjQUFjLEVBQUVILEtBQUssQ0FBQztBQUNyQyxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLE1BQU1JLGFBQWEsR0FBSUwsSUFBSSxJQUFNTSxHQUFHLElBQUs7RUFDckMsT0FBT04sSUFBSSxDQUFDRSxNQUFNLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FDekNDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FDYkMsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUVFLEdBQUcsQ0FBQztBQUMvQixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLFdBQVcsR0FBSVAsSUFBSSxJQUFNUSxFQUFFLElBQUs7RUFDbEMsT0FBT1IsSUFBSSxDQUFDRSxNQUFNLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FDekNDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FDYkMsS0FBSyxDQUFDLElBQUksRUFBRUksRUFBRSxDQUFDO0FBQ3hCLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsVUFBVSxHQUFJVCxJQUFJLElBQUssQ0FBQ1UsV0FBVyxFQUFFQyxFQUFFLEVBQUVDLFdBQVcsS0FBSztFQUMzRCxPQUFPWixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUNhLE1BQU0sQ0FBQztJQUN4QkMsWUFBWSxFQUFFSixXQUFXO0lBQ3pCQyxFQUFFO0lBQ0ZJLFlBQVksRUFBRUg7RUFDbEIsQ0FBQyxDQUFDLENBQUNJLFNBQVMsQ0FBQyxJQUFJLENBQUM7QUFDdEIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLGNBQWMsR0FBSWpCLElBQUksSUFBSztFQUM3QixPQUFPO0lBQ0hELGNBQWMsRUFBRUEsY0FBYyxDQUFDQyxJQUFJLENBQUM7SUFDcENLLGFBQWEsRUFBRUEsYUFBYSxDQUFDTCxJQUFJLENBQUM7SUFDbENPLFdBQVcsRUFBRUEsV0FBVyxDQUFDUCxJQUFJLENBQUM7SUFDOUJTLFVBQVUsRUFBRUEsVUFBVSxDQUFDVCxJQUFJO0VBQy9CLENBQUM7QUFDTCxDQUFDO0FBQUMsSUFBQWtCLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWFILGNBQWMifQ==","map":{"version":3,"names":["_knex","require","getUserByToken","knex","token","select","from","where","getUsersByIDs","ids","getUserByID","id","createUser","displayName","xp","accessToken","insert","display_name","access_token","returning","userRepository","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/database/","sources":["user.js"],"sourcesContent":["import { Knex } from \"knex\"\n\n/**\n * TABLE: users\n * STRUCTURE:\n * id INT AI\n * display_name VARCHAR 64\n * xp INT\n * access_token VARCHAR 512\n */\n\n\n/**\n * @param {Knex} knex\n */\nconst getUserByToken = (knex) => (token) => {\n    return knex.select('id', 'display_name', 'xp')\n        .from('users')\n        .where('access_token', token);\n};\n\n/**\n * @param {Knex} knex\n */\nconst getUsersByIDs = (knex) => (ids) => {\n    return knex.select('id', 'display_name', 'xp')\n        .from('users')\n        .where('id', 'IN', ids);\n};\n\n/**\n * @param {Knex} knex\n */\nconst getUserByID = (knex) => (id) => {\n    return knex.select('id', 'display_name', 'xp')\n        .from('users')\n        .where('id', id);\n};\n\n/**\n * @param {Knex} knex\n */\nconst createUser = (knex) => (displayName, xp, accessToken) => {\n    return knex('users').insert({\n        display_name: displayName,\n        xp,\n        access_token: accessToken\n    }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userRepository = (knex) => {\n    return {\n        getUserByToken: getUserByToken(knex),\n        getUsersByIDs: getUsersByIDs(knex),\n        getUserByID: getUserByID(knex),\n        createUser: createUser(knex),\n    }\n};\n\nexport default userRepository;\n"],"mappings":";;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA,MAAMC,cAAc,GAAIC,IAAI,IAAMC,KAAK,IAAK;EACxC,OAAOD,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,cAAc,EAAE,IAAI,CAAC,CACzCC,IAAI,CAAC,OAAO,CAAC,CACbC,KAAK,CAAC,cAAc,EAAEH,KAAK,CAAC;AACrC,CAAC;;AAED;AACA;AACA;AACA,MAAMI,aAAa,GAAIL,IAAI,IAAMM,GAAG,IAAK;EACrC,OAAON,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,cAAc,EAAE,IAAI,CAAC,CACzCC,IAAI,CAAC,OAAO,CAAC,CACbC,KAAK,CAAC,IAAI,EAAE,IAAI,EAAEE,GAAG,CAAC;AAC/B,CAAC;;AAED;AACA;AACA;AACA,MAAMC,WAAW,GAAIP,IAAI,IAAMQ,EAAE,IAAK;EAClC,OAAOR,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,cAAc,EAAE,IAAI,CAAC,CACzCC,IAAI,CAAC,OAAO,CAAC,CACbC,KAAK,CAAC,IAAI,EAAEI,EAAE,CAAC;AACxB,CAAC;;AAED;AACA;AACA;AACA,MAAMC,UAAU,GAAIT,IAAI,IAAK,CAACU,WAAW,EAAEC,EAAE,EAAEC,WAAW,KAAK;EAC3D,OAAOZ,IAAI,CAAC,OAAO,CAAC,CAACa,MAAM,CAAC;IACxBC,YAAY,EAAEJ,WAAW;IACzBC,EAAE;IACFI,YAAY,EAAEH;EAClB,CAAC,CAAC,CAACI,SAAS,CAAC,IAAI,CAAC;AACtB,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMC,cAAc,GAAIjB,IAAI,IAAK;EAC7B,OAAO;IACHD,cAAc,EAAEA,cAAc,CAACC,IAAI,CAAC;IACpCK,aAAa,EAAEA,aAAa,CAACL,IAAI,CAAC;IAClCO,WAAW,EAAEA,WAAW,CAACP,IAAI,CAAC;IAC9BS,UAAU,EAAEA,UAAU,CAACT,IAAI;EAC/B,CAAC;AACL,CAAC;AAAC,IAAAkB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaH,cAAc"}},"mtime":1699059004482},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/services/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _generateRandomString = _interopRequireDefault(require(\"../utils/generateRandomString\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/**\n * @param {userRepository()} repository\n */\nconst userService = repository => {\n  const getUserByID = async id => {\n    return repository.getUserByID(id);\n  };\n  const getUserByToken = async token => {\n    const user = await repository.getUserByToken(token);\n    if (user === null) {\n      throw new Error('Failed to find user by token');\n    }\n    return user;\n  };\n  const getUsersByIDs = ids => {\n    return repository.getUsersByIDs(ids);\n  };\n  const createUser = async displayName => {\n    const token = (0, _generateRandomString.default)(30);\n    const userID = await repository.createUser(displayName, 0, token);\n    const user = await repository.getUserByID(userID[0]);\n    return [token, user[0]];\n  };\n  return {\n    getUserByToken,\n    getUserByID,\n    getUsersByIDs,\n    createUser\n  };\n};\nvar _default = exports.default = userService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2VuZXJhdGVSYW5kb21TdHJpbmciLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwidXNlclNlcnZpY2UiLCJyZXBvc2l0b3J5IiwiZ2V0VXNlckJ5SUQiLCJpZCIsImdldFVzZXJCeVRva2VuIiwidG9rZW4iLCJ1c2VyIiwiRXJyb3IiLCJnZXRVc2Vyc0J5SURzIiwiaWRzIiwiY3JlYXRlVXNlciIsImRpc3BsYXlOYW1lIiwiZ2VuZXJhdGVSYW5kb21TdHJpbmciLCJ1c2VySUQiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsidXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ2VuZXJhdGVSYW5kb21TdHJpbmcgZnJvbSBcIi4uL3V0aWxzL2dlbmVyYXRlUmFuZG9tU3RyaW5nXCI7XG5cbi8qKlxuICogQHBhcmFtIHt1c2VyUmVwb3NpdG9yeSgpfSByZXBvc2l0b3J5XG4gKi9cbmNvbnN0IHVzZXJTZXJ2aWNlID0gKHJlcG9zaXRvcnkpID0+IHtcblxuICAgIGNvbnN0IGdldFVzZXJCeUlEID0gYXN5bmMgKGlkKSA9PiB7XG4gICAgICAgIHJldHVybiByZXBvc2l0b3J5LmdldFVzZXJCeUlEKGlkKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0VXNlckJ5VG9rZW4gPSBhc3luYyAodG9rZW4pID0+IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHJlcG9zaXRvcnkuZ2V0VXNlckJ5VG9rZW4odG9rZW4pO1xuXG4gICAgICAgIGlmKHVzZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZpbmQgdXNlciBieSB0b2tlbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfTtcblxuICAgIGNvbnN0IGdldFVzZXJzQnlJRHMgPSAoaWRzKSA9PiB7XG4gICAgICAgIHJldHVybiByZXBvc2l0b3J5LmdldFVzZXJzQnlJRHMoaWRzKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY3JlYXRlVXNlciA9IGFzeW5jIChkaXNwbGF5TmFtZSkgPT4ge1xuICAgICAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMwKTtcbiAgICAgICAgY29uc3QgdXNlcklEID0gYXdhaXQgcmVwb3NpdG9yeS5jcmVhdGVVc2VyKGRpc3BsYXlOYW1lLCAwLCB0b2tlbik7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHJlcG9zaXRvcnkuZ2V0VXNlckJ5SUQodXNlcklEWzBdKTtcblxuICAgICAgICByZXR1cm4gW3Rva2VuLCB1c2VyWzBdXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0VXNlckJ5VG9rZW4sXG4gICAgICAgIGdldFVzZXJCeUlELFxuICAgICAgICBnZXRVc2Vyc0J5SURzLFxuICAgICAgICBjcmVhdGVVc2VyXG4gICAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJTZXJ2aWNlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxxQkFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQWlFLFNBQUFELHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRWpFO0FBQ0E7QUFDQTtBQUNBLE1BQU1HLFdBQVcsR0FBSUMsVUFBVSxJQUFLO0VBRWhDLE1BQU1DLFdBQVcsR0FBRyxNQUFPQyxFQUFFLElBQUs7SUFDOUIsT0FBT0YsVUFBVSxDQUFDQyxXQUFXLENBQUNDLEVBQUUsQ0FBQztFQUNyQyxDQUFDO0VBRUQsTUFBTUMsY0FBYyxHQUFHLE1BQU9DLEtBQUssSUFBSztJQUNwQyxNQUFNQyxJQUFJLEdBQUcsTUFBTUwsVUFBVSxDQUFDRyxjQUFjLENBQUNDLEtBQUssQ0FBQztJQUVuRCxJQUFHQyxJQUFJLEtBQUssSUFBSSxFQUFFO01BQ2QsTUFBTSxJQUFJQyxLQUFLLENBQUMsOEJBQThCLENBQUM7SUFDbkQ7SUFFQSxPQUFPRCxJQUFJO0VBQ2YsQ0FBQztFQUVELE1BQU1FLGFBQWEsR0FBSUMsR0FBRyxJQUFLO0lBQzNCLE9BQU9SLFVBQVUsQ0FBQ08sYUFBYSxDQUFDQyxHQUFHLENBQUM7RUFDeEMsQ0FBQztFQUVELE1BQU1DLFVBQVUsR0FBRyxNQUFPQyxXQUFXLElBQUs7SUFDdEMsTUFBTU4sS0FBSyxHQUFHLElBQUFPLDZCQUFvQixFQUFDLEVBQUUsQ0FBQztJQUN0QyxNQUFNQyxNQUFNLEdBQUcsTUFBTVosVUFBVSxDQUFDUyxVQUFVLENBQUNDLFdBQVcsRUFBRSxDQUFDLEVBQUVOLEtBQUssQ0FBQztJQUVqRSxNQUFNQyxJQUFJLEdBQUcsTUFBTUwsVUFBVSxDQUFDQyxXQUFXLENBQUNXLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVwRCxPQUFPLENBQUNSLEtBQUssRUFBRUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzNCLENBQUM7RUFFRCxPQUFPO0lBQ0hGLGNBQWM7SUFDZEYsV0FBVztJQUNYTSxhQUFhO0lBQ2JFO0VBQ0osQ0FBQztBQUNMLENBQUM7QUFBQyxJQUFBSSxRQUFBLEdBQUFDLE9BQUEsQ0FBQWhCLE9BQUEsR0FFYUMsV0FBVyJ9","map":{"version":3,"names":["_generateRandomString","_interopRequireDefault","require","obj","__esModule","default","userService","repository","getUserByID","id","getUserByToken","token","user","Error","getUsersByIDs","ids","createUser","displayName","generateRandomString","userID","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/services/","sources":["user.js"],"sourcesContent":["import generateRandomString from \"../utils/generateRandomString\";\n\n/**\n * @param {userRepository()} repository\n */\nconst userService = (repository) => {\n\n    const getUserByID = async (id) => {\n        return repository.getUserByID(id);\n    };\n\n    const getUserByToken = async (token) => {\n        const user = await repository.getUserByToken(token);\n\n        if(user === null) {\n            throw new Error('Failed to find user by token');\n        }\n\n        return user;\n    };\n\n    const getUsersByIDs = (ids) => {\n        return repository.getUsersByIDs(ids);\n    };\n\n    const createUser = async (displayName) => {\n        const token = generateRandomString(30);\n        const userID = await repository.createUser(displayName, 0, token);\n\n        const user = await repository.getUserByID(userID[0]);\n\n        return [token, user[0]];\n    };\n\n    return {\n        getUserByToken,\n        getUserByID,\n        getUsersByIDs,\n        createUser\n    };\n};\n\nexport default userService;\n"],"mappings":";;;;;;AAAA,IAAAA,qBAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAiE,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEjE;AACA;AACA;AACA,MAAMG,WAAW,GAAIC,UAAU,IAAK;EAEhC,MAAMC,WAAW,GAAG,MAAOC,EAAE,IAAK;IAC9B,OAAOF,UAAU,CAACC,WAAW,CAACC,EAAE,CAAC;EACrC,CAAC;EAED,MAAMC,cAAc,GAAG,MAAOC,KAAK,IAAK;IACpC,MAAMC,IAAI,GAAG,MAAML,UAAU,CAACG,cAAc,CAACC,KAAK,CAAC;IAEnD,IAAGC,IAAI,KAAK,IAAI,EAAE;MACd,MAAM,IAAIC,KAAK,CAAC,8BAA8B,CAAC;IACnD;IAEA,OAAOD,IAAI;EACf,CAAC;EAED,MAAME,aAAa,GAAIC,GAAG,IAAK;IAC3B,OAAOR,UAAU,CAACO,aAAa,CAACC,GAAG,CAAC;EACxC,CAAC;EAED,MAAMC,UAAU,GAAG,MAAOC,WAAW,IAAK;IACtC,MAAMN,KAAK,GAAG,IAAAO,6BAAoB,EAAC,EAAE,CAAC;IACtC,MAAMC,MAAM,GAAG,MAAMZ,UAAU,CAACS,UAAU,CAACC,WAAW,EAAE,CAAC,EAAEN,KAAK,CAAC;IAEjE,MAAMC,IAAI,GAAG,MAAML,UAAU,CAACC,WAAW,CAACW,MAAM,CAAC,CAAC,CAAC,CAAC;IAEpD,OAAO,CAACR,KAAK,EAAEC,IAAI,CAAC,CAAC,CAAC,CAAC;EAC3B,CAAC;EAED,OAAO;IACHF,cAAc;IACdF,WAAW;IACXM,aAAa;IACbE;EACJ,CAAC;AACL,CAAC;AAAC,IAAAI,QAAA,GAAAC,OAAA,CAAAhB,OAAA,GAEaC,WAAW"}},"mtime":1699070458838},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/utils/generateRandomString.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = (len = 30) => {\n  return [...Array(len)].map(() => Math.random().toString(36)[2]).join('');\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZGVmYXVsdCIsImxlbiIsIkFycmF5IiwibWFwIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwiam9pbiIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbImdlbmVyYXRlUmFuZG9tU3RyaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IChsZW4gPSAzMCkgPT4ge1xuICAgIHJldHVybiBbLi4uQXJyYXkobGVuKV0ubWFwKCgpID0+IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpWzJdKS5qb2luKCcnKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztlQUFlQSxDQUFDQyxHQUFHLEdBQUcsRUFBRSxLQUFLO0VBQ3pCLE9BQU8sQ0FBQyxHQUFHQyxLQUFLLENBQUNELEdBQUcsQ0FBQyxDQUFDLENBQUNFLEdBQUcsQ0FBQyxNQUFNQyxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUNDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQzVFLENBQUM7QUFBQUMsT0FBQSxDQUFBQyxPQUFBLEdBQUFULFFBQUEifQ==","map":{"version":3,"names":["_default","len","Array","map","Math","random","toString","join","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/utils/","sources":["generateRandomString.js"],"sourcesContent":["export default (len = 30) => {\n    return [...Array(len)].map(() => Math.random().toString(36)[2]).join('');\n};\n"],"mappings":";;;;;;eAAeA,CAACC,GAAG,GAAG,EAAE,KAAK;EACzB,OAAO,CAAC,GAAGC,KAAK,CAACD,GAAG,CAAC,CAAC,CAACE,GAAG,CAAC,MAAMC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC;AAC5E,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAT,QAAA"}},"mtime":1699038482338},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/users.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _user = require(\"../dto/user\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/**\n * @param {userVocabularyService} userVocabularyService\n * @param {userPassedCoursesService} userPassedCoursesService\n */\nconst usersHandlers = (userVocabularyService, userPassedCoursesService) => {\n  /**\n   * @param {express.Request} req\n   * @param {express.Response} res\n   */\n  const me = async (req, res) => {\n    return res.status(200).json({\n      data: {\n        me: (0, _user.newMeUser)(req.user),\n        vocabulary: await userVocabularyService.getUserVocabulary(req.user.id),\n        passed_courses: (await userPassedCoursesService.getPassedCoursesByUserID(req.user.id)) || []\n      }\n    });\n  };\n  return {\n    me\n  };\n};\nvar _default = exports.default = usersHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInVzZXJzSGFuZGxlcnMiLCJ1c2VyVm9jYWJ1bGFyeVNlcnZpY2UiLCJ1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UiLCJtZSIsInJlcSIsInJlcyIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwibmV3TWVVc2VyIiwidXNlciIsInZvY2FidWxhcnkiLCJnZXRVc2VyVm9jYWJ1bGFyeSIsImlkIiwicGFzc2VkX2NvdXJzZXMiLCJnZXRQYXNzZWRDb3Vyc2VzQnlVc2VySUQiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3RyYW5zcG9ydHMvIiwic291cmNlcyI6WyJ1c2Vycy5oYW5kbGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJ1xuaW1wb3J0IHtuZXdNZVVzZXJ9IGZyb20gXCIuLi9kdG8vdXNlclwiXG5cbi8qKlxuICogQHBhcmFtIHt1c2VyVm9jYWJ1bGFyeVNlcnZpY2V9IHVzZXJWb2NhYnVsYXJ5U2VydmljZVxuICogQHBhcmFtIHt1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2V9IHVzZXJQYXNzZWRDb3Vyc2VzU2VydmljZVxuICovXG5jb25zdCB1c2Vyc0hhbmRsZXJzID0gKHVzZXJWb2NhYnVsYXJ5U2VydmljZSwgdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlKSA9PiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtleHByZXNzLlJlcXVlc3R9IHJlcVxuICAgICAqIEBwYXJhbSB7ZXhwcmVzcy5SZXNwb25zZX0gcmVzXG4gICAgICovXG4gICAgY29uc3QgbWUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBtZTogbmV3TWVVc2VyKHJlcS51c2VyKSxcbiAgICAgICAgICAgICAgICB2b2NhYnVsYXJ5OiBhd2FpdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UuZ2V0VXNlclZvY2FidWxhcnkocmVxLnVzZXIuaWQpLFxuICAgICAgICAgICAgICAgIHBhc3NlZF9jb3Vyc2VzOiAoYXdhaXQgdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlLmdldFBhc3NlZENvdXJzZXNCeVVzZXJJRChyZXEudXNlci5pZCkpIHx8IFtdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIG1lXG4gICAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJzSGFuZGxlcnM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQUFxQyxTQUFBRCx1QkFBQUcsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1HLGFBQWEsR0FBR0EsQ0FBQ0MscUJBQXFCLEVBQUVDLHdCQUF3QixLQUFLO0VBQ3ZFO0FBQ0o7QUFDQTtBQUNBO0VBQ0ksTUFBTUMsRUFBRSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0lBQzNCLE9BQU9BLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLElBQUksRUFBRTtRQUNGTCxFQUFFLEVBQUUsSUFBQU0sZUFBUyxFQUFDTCxHQUFHLENBQUNNLElBQUksQ0FBQztRQUN2QkMsVUFBVSxFQUFFLE1BQU1WLHFCQUFxQixDQUFDVyxpQkFBaUIsQ0FBQ1IsR0FBRyxDQUFDTSxJQUFJLENBQUNHLEVBQUUsQ0FBQztRQUN0RUMsY0FBYyxFQUFFLENBQUMsTUFBTVosd0JBQXdCLENBQUNhLHdCQUF3QixDQUFDWCxHQUFHLENBQUNNLElBQUksQ0FBQ0csRUFBRSxDQUFDLEtBQUs7TUFDOUY7SUFDSixDQUFDLENBQUM7RUFDTixDQUFDO0VBRUQsT0FBTztJQUNIVjtFQUNKLENBQUM7QUFDTCxDQUFDO0FBQUMsSUFBQWEsUUFBQSxHQUFBQyxPQUFBLENBQUFsQixPQUFBLEdBRWFDLGFBQWEifQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_user","obj","__esModule","default","usersHandlers","userVocabularyService","userPassedCoursesService","me","req","res","status","json","data","newMeUser","user","vocabulary","getUserVocabulary","id","passed_courses","getPassedCoursesByUserID","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["users.handlers.js"],"sourcesContent":["import express from 'express'\nimport {newMeUser} from \"../dto/user\"\n\n/**\n * @param {userVocabularyService} userVocabularyService\n * @param {userPassedCoursesService} userPassedCoursesService\n */\nconst usersHandlers = (userVocabularyService, userPassedCoursesService) => {\n    /**\n     * @param {express.Request} req\n     * @param {express.Response} res\n     */\n    const me = async (req, res) => {\n        return res.status(200).json({\n            data: {\n                me: newMeUser(req.user),\n                vocabulary: await userVocabularyService.getUserVocabulary(req.user.id),\n                passed_courses: (await userPassedCoursesService.getPassedCoursesByUserID(req.user.id)) || [],\n            },\n        });\n    };\n\n    return {\n        me\n    };\n};\n\nexport default usersHandlers;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAAqC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAErC;AACA;AACA;AACA;AACA,MAAMG,aAAa,GAAGA,CAACC,qBAAqB,EAAEC,wBAAwB,KAAK;EACvE;AACJ;AACA;AACA;EACI,MAAMC,EAAE,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;IAC3B,OAAOA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBC,IAAI,EAAE;QACFL,EAAE,EAAE,IAAAM,eAAS,EAACL,GAAG,CAACM,IAAI,CAAC;QACvBC,UAAU,EAAE,MAAMV,qBAAqB,CAACW,iBAAiB,CAACR,GAAG,CAACM,IAAI,CAACG,EAAE,CAAC;QACtEC,cAAc,EAAE,CAAC,MAAMZ,wBAAwB,CAACa,wBAAwB,CAACX,GAAG,CAACM,IAAI,CAACG,EAAE,CAAC,KAAK;MAC9F;IACJ,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACHV;EACJ,CAAC;AACL,CAAC;AAAC,IAAAa,QAAA,GAAAC,OAAA,CAAAlB,OAAA,GAEaC,aAAa"}},"mtime":1699070251798},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/dto/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/dto/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.newUser = exports.newMeUser = void 0;\nvar _level = require(\"./level\");\nconst newMeUser = user => {\n  return {\n    id: user.id,\n    display_name: user.display_name,\n    xp: user.xp,\n    level: (0, _level.getLevelByXP)(user.xp)\n  };\n};\nexports.newMeUser = newMeUser;\nconst newUser = user => {\n  return {\n    id: user.id,\n    display_name: user.display_name,\n    xp: user.xp,\n    level: (0, _level.getLevelByXP)(user.xp)\n  };\n};\nexports.newUser = newUser;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbGV2ZWwiLCJyZXF1aXJlIiwibmV3TWVVc2VyIiwidXNlciIsImlkIiwiZGlzcGxheV9uYW1lIiwieHAiLCJsZXZlbCIsImdldExldmVsQnlYUCIsImV4cG9ydHMiLCJuZXdVc2VyIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy9kdG8vIiwic291cmNlcyI6WyJ1c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z2V0TGV2ZWxCeVhQfSBmcm9tIFwiLi9sZXZlbFwiO1xuXG5jb25zdCBuZXdNZVVzZXIgPSAodXNlcikgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBkaXNwbGF5X25hbWU6IHVzZXIuZGlzcGxheV9uYW1lLFxuICAgICAgICB4cDogdXNlci54cCxcbiAgICAgICAgbGV2ZWw6IGdldExldmVsQnlYUCh1c2VyLnhwKSxcbiAgICB9O1xufTtcblxuY29uc3QgbmV3VXNlciA9ICh1c2VyKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgIGRpc3BsYXlfbmFtZTogdXNlci5kaXNwbGF5X25hbWUsXG4gICAgICAgIHhwOiB1c2VyLnhwLFxuICAgICAgICBsZXZlbDogZ2V0TGV2ZWxCeVhQKHVzZXIueHApLFxuICAgIH07XG59XG5cbmV4cG9ydCB7XG4gICAgbmV3TWVVc2VyLFxuICAgIG5ld1VzZXJcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUVBLE1BQU1DLFNBQVMsR0FBSUMsSUFBSSxJQUFLO0VBQ3hCLE9BQU87SUFDSEMsRUFBRSxFQUFFRCxJQUFJLENBQUNDLEVBQUU7SUFDWEMsWUFBWSxFQUFFRixJQUFJLENBQUNFLFlBQVk7SUFDL0JDLEVBQUUsRUFBRUgsSUFBSSxDQUFDRyxFQUFFO0lBQ1hDLEtBQUssRUFBRSxJQUFBQyxtQkFBWSxFQUFDTCxJQUFJLENBQUNHLEVBQUU7RUFDL0IsQ0FBQztBQUNMLENBQUM7QUFBQ0csT0FBQSxDQUFBUCxTQUFBLEdBQUFBLFNBQUE7QUFFRixNQUFNUSxPQUFPLEdBQUlQLElBQUksSUFBSztFQUN0QixPQUFPO0lBQ0hDLEVBQUUsRUFBRUQsSUFBSSxDQUFDQyxFQUFFO0lBQ1hDLFlBQVksRUFBRUYsSUFBSSxDQUFDRSxZQUFZO0lBQy9CQyxFQUFFLEVBQUVILElBQUksQ0FBQ0csRUFBRTtJQUNYQyxLQUFLLEVBQUUsSUFBQUMsbUJBQVksRUFBQ0wsSUFBSSxDQUFDRyxFQUFFO0VBQy9CLENBQUM7QUFDTCxDQUFDO0FBQUFHLE9BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBIn0=","map":{"version":3,"names":["_level","require","newMeUser","user","id","display_name","xp","level","getLevelByXP","exports","newUser"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/dto/","sources":["user.js"],"sourcesContent":["import {getLevelByXP} from \"./level\";\n\nconst newMeUser = (user) => {\n    return {\n        id: user.id,\n        display_name: user.display_name,\n        xp: user.xp,\n        level: getLevelByXP(user.xp),\n    };\n};\n\nconst newUser = (user) => {\n    return {\n        id: user.id,\n        display_name: user.display_name,\n        xp: user.xp,\n        level: getLevelByXP(user.xp),\n    };\n}\n\nexport {\n    newMeUser,\n    newUser\n};\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,MAAMC,SAAS,GAAIC,IAAI,IAAK;EACxB,OAAO;IACHC,EAAE,EAAED,IAAI,CAACC,EAAE;IACXC,YAAY,EAAEF,IAAI,CAACE,YAAY;IAC/BC,EAAE,EAAEH,IAAI,CAACG,EAAE;IACXC,KAAK,EAAE,IAAAC,mBAAY,EAACL,IAAI,CAACG,EAAE;EAC/B,CAAC;AACL,CAAC;AAACG,OAAA,CAAAP,SAAA,GAAAA,SAAA;AAEF,MAAMQ,OAAO,GAAIP,IAAI,IAAK;EACtB,OAAO;IACHC,EAAE,EAAED,IAAI,CAACC,EAAE;IACXC,YAAY,EAAEF,IAAI,CAACE,YAAY;IAC/BC,EAAE,EAAEH,IAAI,CAACG,EAAE;IACXC,KAAK,EAAE,IAAAC,mBAAY,EAACL,IAAI,CAACG,EAAE;EAC/B,CAAC;AACL,CAAC;AAAAG,OAAA,CAAAC,OAAA,GAAAA,OAAA"}},"mtime":1699057458069},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/services/chat.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _user = require(\"../dto/user\");\nvar _level = require(\"../dto/level\");\nvar _knex = _interopRequireDefault(require(\"knex\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nconst chatService = (chatMessagesRepository, usersService) => {\n  const getMessages = async userID => {\n    const user = await usersService.getUserByID(userID);\n    const level = (0, _level.getLevelByXP)(user.xp);\n    let messages = await chatMessagesRepository.getMessagesByLevel(level);\n    const userIDs = [...new Set(messages.map(m => m.user_id))];\n    const users = await usersService.getUsersByIDs(userIDs);\n    messages = messages.map(m => {\n      return _objectSpread(_objectSpread({}, m), {}, {\n        user: (0, _user.newUser)(users.find(u => u.id === m.user_id) || {})\n      });\n    });\n    return messages;\n  };\n  const sendMessage = async (userID, message) => {\n    const user = await usersService.getUserByID(userID);\n    const level = (0, _level.getLevelByXP)(user.xp);\n    await chatMessagesRepository.sendMessage(userID, message, level);\n    return true;\n  };\n  return {\n    getMessages,\n    sendMessage\n  };\n};\nvar _default = exports.default = chatService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlciIsInJlcXVpcmUiLCJfbGV2ZWwiLCJfa25leCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm93bktleXMiLCJlIiwiciIsInQiLCJPYmplY3QiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhcmciLCJfdG9QcmltaXRpdmUiLCJTdHJpbmciLCJpbnB1dCIsImhpbnQiLCJwcmltIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJ1bmRlZmluZWQiLCJyZXMiLCJjYWxsIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiY2hhdFNlcnZpY2UiLCJjaGF0TWVzc2FnZXNSZXBvc2l0b3J5IiwidXNlcnNTZXJ2aWNlIiwiZ2V0TWVzc2FnZXMiLCJ1c2VySUQiLCJ1c2VyIiwiZ2V0VXNlckJ5SUQiLCJsZXZlbCIsImdldExldmVsQnlYUCIsInhwIiwibWVzc2FnZXMiLCJnZXRNZXNzYWdlc0J5TGV2ZWwiLCJ1c2VySURzIiwiU2V0IiwibWFwIiwibSIsInVzZXJfaWQiLCJ1c2VycyIsImdldFVzZXJzQnlJRHMiLCJuZXdVc2VyIiwiZmluZCIsInUiLCJpZCIsInNlbmRNZXNzYWdlIiwibWVzc2FnZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJjaGF0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7bmV3VXNlcn0gZnJvbSBcIi4uL2R0by91c2VyXCI7XG5pbXBvcnQge2dldExldmVsQnlYUH0gZnJvbSBcIi4uL2R0by9sZXZlbFwiO1xuaW1wb3J0IGtuZXggZnJvbSBcImtuZXhcIjtcblxuY29uc3QgY2hhdFNlcnZpY2UgPSAoY2hhdE1lc3NhZ2VzUmVwb3NpdG9yeSwgdXNlcnNTZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgZ2V0TWVzc2FnZXMgPSBhc3luYyAodXNlcklEKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vyc1NlcnZpY2UuZ2V0VXNlckJ5SUQodXNlcklEKTtcbiAgICAgICAgY29uc3QgbGV2ZWwgPSBnZXRMZXZlbEJ5WFAodXNlci54cCk7XG5cbiAgICAgICAgbGV0IG1lc3NhZ2VzID0gYXdhaXQgY2hhdE1lc3NhZ2VzUmVwb3NpdG9yeS5nZXRNZXNzYWdlc0J5TGV2ZWwobGV2ZWwpO1xuICAgICAgICBjb25zdCB1c2VySURzID0gWy4uLm5ldyBTZXQobWVzc2FnZXMubWFwKChtKSA9PiBtLnVzZXJfaWQpKV07XG5cbiAgICAgICAgY29uc3QgdXNlcnMgPSBhd2FpdCB1c2Vyc1NlcnZpY2UuZ2V0VXNlcnNCeUlEcyh1c2VySURzKTtcblxuICAgICAgICBtZXNzYWdlcyA9IG1lc3NhZ2VzLm1hcCgobSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5tLFxuICAgICAgICAgICAgICAgIHVzZXI6IG5ld1VzZXIodXNlcnMuZmluZCgodSkgPT4gdS5pZCA9PT0gbS51c2VyX2lkKSB8fCB7fSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICB9O1xuXG4gICAgY29uc3Qgc2VuZE1lc3NhZ2UgPSBhc3luYyAodXNlcklELCBtZXNzYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vyc1NlcnZpY2UuZ2V0VXNlckJ5SUQodXNlcklEKTtcbiAgICAgICAgY29uc3QgbGV2ZWwgPSBnZXRMZXZlbEJ5WFAodXNlci54cCk7XG5cbiAgICAgICAgYXdhaXQgY2hhdE1lc3NhZ2VzUmVwb3NpdG9yeS5zZW5kTWVzc2FnZSh1c2VySUQsIG1lc3NhZ2UsIGxldmVsKTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0TWVzc2FnZXMsXG4gICAgICAgIHNlbmRNZXNzYWdlXG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2hhdFNlcnZpY2U7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQUF3QixTQUFBRyx1QkFBQUMsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLFNBQUFHLFFBQUFDLENBQUEsRUFBQUMsQ0FBQSxRQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsSUFBQSxDQUFBSixDQUFBLE9BQUFHLE1BQUEsQ0FBQUUscUJBQUEsUUFBQUMsQ0FBQSxHQUFBSCxNQUFBLENBQUFFLHFCQUFBLENBQUFMLENBQUEsR0FBQUMsQ0FBQSxLQUFBSyxDQUFBLEdBQUFBLENBQUEsQ0FBQUMsTUFBQSxXQUFBTixDQUFBLFdBQUFFLE1BQUEsQ0FBQUssd0JBQUEsQ0FBQVIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFRLFVBQUEsT0FBQVAsQ0FBQSxDQUFBUSxJQUFBLENBQUFDLEtBQUEsQ0FBQVQsQ0FBQSxFQUFBSSxDQUFBLFlBQUFKLENBQUE7QUFBQSxTQUFBVSxjQUFBWixDQUFBLGFBQUFDLENBQUEsTUFBQUEsQ0FBQSxHQUFBWSxTQUFBLENBQUFDLE1BQUEsRUFBQWIs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","map":{"version":3,"names":["_user","require","_level","_knex","_interopRequireDefault","obj","__esModule","default","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","key","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","chatService","chatMessagesRepository","usersService","getMessages","userID","user","getUserByID","level","getLevelByXP","xp","messages","getMessagesByLevel","userIDs","Set","map","m","user_id","users","getUsersByIDs","newUser","find","u","id","sendMessage","message","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/services/","sources":["chat.js"],"sourcesContent":["import {newUser} from \"../dto/user\";\nimport {getLevelByXP} from \"../dto/level\";\nimport knex from \"knex\";\n\nconst chatService = (chatMessagesRepository, usersService) => {\n    const getMessages = async (userID) => {\n        const user = await usersService.getUserByID(userID);\n        const level = getLevelByXP(user.xp);\n\n        let messages = await chatMessagesRepository.getMessagesByLevel(level);\n        const userIDs = [...new Set(messages.map((m) => m.user_id))];\n\n        const users = await usersService.getUsersByIDs(userIDs);\n\n        messages = messages.map((m) => {\n            return {\n                ...m,\n                user: newUser(users.find((u) => u.id === m.user_id) || {})\n            };\n        });\n\n        return messages;\n    };\n\n    const sendMessage = async (userID, message) => {\n        const user = await usersService.getUserByID(userID);\n        const level = getLevelByXP(user.xp);\n\n        await chatMessagesRepository.sendMessage(userID, message, level);\n\n        return true;\n    };\n\n    return {\n        getMessages,\n        sendMessage\n    };\n}\n\nexport default chatService;\n"],"mappings":"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"}},"mtime":1699060038957},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/database/chatMessages.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _knex = require(\"knex\");\n/**\n * TABLE: chat_messages\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * message TEXT\n * level INT\n * created_at DATE\n */\n/**\n * @param {Knex} knex\n */\nconst getMessagesByLevel = knex => level => {\n  return knex.select('id', 'user_id', 'message', 'level', 'created_at').from('chat_messages').where('level', level).orderBy('created_at', 'desc');\n};\nconst sendMessage = knex => (userID, message, level) => {\n  return knex('chat_messages').insert({\n    user_id: userID,\n    message,\n    created_at: knex.raw('NOW()'),\n    level\n  }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst chatMessagesRepository = knex => {\n  return {\n    getMessagesByLevel: getMessagesByLevel(knex),\n    sendMessage: sendMessage(knex)\n  };\n};\nvar _default = exports.default = chatMessagesRepository;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfa25leCIsInJlcXVpcmUiLCJnZXRNZXNzYWdlc0J5TGV2ZWwiLCJrbmV4IiwibGV2ZWwiLCJzZWxlY3QiLCJmcm9tIiwid2hlcmUiLCJvcmRlckJ5Iiwic2VuZE1lc3NhZ2UiLCJ1c2VySUQiLCJtZXNzYWdlIiwiaW5zZXJ0IiwidXNlcl9pZCIsImNyZWF0ZWRfYXQiLCJyYXciLCJyZXR1cm5pbmciLCJjaGF0TWVzc2FnZXNSZXBvc2l0b3J5IiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJjaGF0TWVzc2FnZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBLbmV4IH0gZnJvbSBcImtuZXhcIlxuXG4vKipcbiAqIFRBQkxFOiBjaGF0X21lc3NhZ2VzXG4gKiBTVFJVQ1RVUkU6XG4gKiBpZCBJTlQgQUlcbiAqIHVzZXJfaWQgSU5UXG4gKiBtZXNzYWdlIFRFWFRcbiAqIGxldmVsIElOVFxuICogY3JlYXRlZF9hdCBEQVRFXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqL1xuY29uc3QgZ2V0TWVzc2FnZXNCeUxldmVsID0gKGtuZXgpID0+IChsZXZlbCkgPT4ge1xuICAgIHJldHVybiBrbmV4LnNlbGVjdCgnaWQnLCAndXNlcl9pZCcsICdtZXNzYWdlJywgJ2xldmVsJywgJ2NyZWF0ZWRfYXQnKVxuICAgICAgICAuZnJvbSgnY2hhdF9tZXNzYWdlcycpXG4gICAgICAgIC53aGVyZSgnbGV2ZWwnLCBsZXZlbClcbiAgICAgICAgLm9yZGVyQnkoJ2NyZWF0ZWRfYXQnLCAnZGVzYycpXG59O1xuXG5cbmNvbnN0IHNlbmRNZXNzYWdlID0gKGtuZXgpID0+ICh1c2VySUQsIG1lc3NhZ2UsIGxldmVsKSA9PiB7XG4gICAgcmV0dXJuIGtuZXgoJ2NoYXRfbWVzc2FnZXMnKS5pbnNlcnQoe1xuICAgICAgICB1c2VyX2lkOiB1c2VySUQsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IGtuZXgucmF3KCdOT1coKScpLFxuICAgICAgICBsZXZlbCxcbiAgICB9KS5yZXR1cm5pbmcoJ2lkJyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7S25leH0ga25leFxuICogQHJldHVybnMge3tnZXRVc2VyQnlUb2tlbjogKGZ1bmN0aW9uKCopOiBmdW5jdGlvbigqKTogKil9fVxuICovXG5jb25zdCBjaGF0TWVzc2FnZXNSZXBvc2l0b3J5ID0gKGtuZXgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRNZXNzYWdlc0J5TGV2ZWw6IGdldE1lc3NhZ2VzQnlMZXZlbChrbmV4KSxcbiAgICAgICAgc2VuZE1lc3NhZ2U6IHNlbmRNZXNzYWdlKGtuZXgpLFxuICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjaGF0TWVzc2FnZXNSZXBvc2l0b3J5O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQUFBQSxLQUFBLEdBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxrQkFBa0IsR0FBSUMsSUFBSSxJQUFNQyxLQUFLLElBQUs7RUFDNUMsT0FBT0QsSUFBSSxDQUFDRSxNQUFNLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUNoRUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUNyQkMsS0FBSyxDQUFDLE9BQU8sRUFBRUgsS0FBSyxDQUFDLENBQ3JCSSxPQUFPLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQztBQUN0QyxDQUFDO0FBR0QsTUFBTUMsV0FBVyxHQUFJTixJQUFJLElBQUssQ0FBQ08sTUFBTSxFQUFFQyxPQUFPLEVBQUVQLEtBQUssS0FBSztFQUN0RCxPQUFPRCxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUNTLE1BQU0sQ0FBQztJQUNoQ0MsT0FBTyxFQUFFSCxNQUFNO0lBQ2ZDLE9BQU87SUFDUEcsVUFBVSxFQUFFWCxJQUFJLENBQUNZLEdBQUcsQ0FBQyxPQUFPLENBQUM7SUFDN0JYO0VBQ0osQ0FBQyxDQUFDLENBQUNZLFNBQVMsQ0FBQyxJQUFJLENBQUM7QUFDdEIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLHNCQUFzQixHQUFJZCxJQUFJLElBQUs7RUFDckMsT0FBTztJQUNIRCxrQkFBa0IsRUFBRUEsa0JBQWtCLENBQUNDLElBQUksQ0FBQztJQUM1Q00sV0FBVyxFQUFFQSxXQUFXLENBQUNOLElBQUk7RUFDakMsQ0FBQztBQUNMLENBQUM7QUFBQyxJQUFBZSxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVhSCxzQkFBc0IifQ==","map":{"version":3,"names":["_knex","require","getMessagesByLevel","knex","level","select","from","where","orderBy","sendMessage","userID","message","insert","user_id","created_at","raw","returning","chatMessagesRepository","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/database/","sources":["chatMessages.js"],"sourcesContent":["\nimport { Knex } from \"knex\"\n\n/**\n * TABLE: chat_messages\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * message TEXT\n * level INT\n * created_at DATE\n */\n\n/**\n * @param {Knex} knex\n */\nconst getMessagesByLevel = (knex) => (level) => {\n    return knex.select('id', 'user_id', 'message', 'level', 'created_at')\n        .from('chat_messages')\n        .where('level', level)\n        .orderBy('created_at', 'desc')\n};\n\n\nconst sendMessage = (knex) => (userID, message, level) => {\n    return knex('chat_messages').insert({\n        user_id: userID,\n        message,\n        created_at: knex.raw('NOW()'),\n        level,\n    }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst chatMessagesRepository = (knex) => {\n    return {\n        getMessagesByLevel: getMessagesByLevel(knex),\n        sendMessage: sendMessage(knex),\n    };\n};\n\nexport default chatMessagesRepository;\n"],"mappings":";;;;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA,MAAMC,kBAAkB,GAAIC,IAAI,IAAMC,KAAK,IAAK;EAC5C,OAAOD,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,YAAY,CAAC,CAChEC,IAAI,CAAC,eAAe,CAAC,CACrBC,KAAK,CAAC,OAAO,EAAEH,KAAK,CAAC,CACrBI,OAAO,CAAC,YAAY,EAAE,MAAM,CAAC;AACtC,CAAC;AAGD,MAAMC,WAAW,GAAIN,IAAI,IAAK,CAACO,MAAM,EAAEC,OAAO,EAAEP,KAAK,KAAK;EACtD,OAAOD,IAAI,CAAC,eAAe,CAAC,CAACS,MAAM,CAAC;IAChCC,OAAO,EAAEH,MAAM;IACfC,OAAO;IACPG,UAAU,EAAEX,IAAI,CAACY,GAAG,CAAC,OAAO,CAAC;IAC7BX;EACJ,CAAC,CAAC,CAACY,SAAS,CAAC,IAAI,CAAC;AACtB,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMC,sBAAsB,GAAId,IAAI,IAAK;EACrC,OAAO;IACHD,kBAAkB,EAAEA,kBAAkB,CAACC,IAAI,CAAC;IAC5CM,WAAW,EAAEA,WAAW,CAACN,IAAI;EACjC,CAAC;AACL,CAAC;AAAC,IAAAe,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaH,sBAAsB"}},"mtime":1699070855629},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/chat.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst chatHandlers = chatService => {\n  /**\n   * @type {express.Request} req\n   * @type {express.Response} response}\n   */\n  const getMessages = async (req, res) => {\n    const user = req.user;\n    const messages = await chatService.getMessages(user.id);\n    return res.status(200).json({\n      data: messages\n    });\n  };\n\n  /**\n   * @type {express.Request} req\n   * @type {express.Response} response}\n   */\n  const sendMessage = async (req, res) => {\n    const {\n      message\n    } = req.body;\n    const user = req.user;\n    await chatService.sendMessage(req.user.id, message);\n    return res.status(200).json(true);\n  };\n  return {\n    getMessages,\n    sendMessage\n  };\n};\nvar _default = exports.default = chatHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjaGF0SGFuZGxlcnMiLCJjaGF0U2VydmljZSIsImdldE1lc3NhZ2VzIiwicmVxIiwicmVzIiwidXNlciIsIm1lc3NhZ2VzIiwiaWQiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSIsInNlbmRNZXNzYWdlIiwibWVzc2FnZSIsImJvZHkiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3RyYW5zcG9ydHMvIiwic291cmNlcyI6WyJjaGF0LmhhbmRsZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG5cbmNvbnN0IGNoYXRIYW5kbGVycyA9IChjaGF0U2VydmljZSkgPT4ge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtleHByZXNzLlJlcXVlc3R9IHJlcVxuICAgICAqIEB0eXBlIHtleHByZXNzLlJlc3BvbnNlfSByZXNwb25zZX1cbiAgICAgKi9cbiAgICBjb25zdCBnZXRNZXNzYWdlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgY2hhdFNlcnZpY2UuZ2V0TWVzc2FnZXModXNlci5pZCk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgIGRhdGE6IG1lc3NhZ2VzXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7ZXhwcmVzcy5SZXF1ZXN0fSByZXFcbiAgICAgKiBAdHlwZSB7ZXhwcmVzcy5SZXNwb25zZX0gcmVzcG9uc2V9XG4gICAgICovXG4gICAgY29uc3Qgc2VuZE1lc3NhZ2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgbWVzc2FnZVxuICAgICAgICB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgICBhd2FpdCBjaGF0U2VydmljZS5zZW5kTWVzc2FnZShyZXEudXNlci5pZCwgbWVzc2FnZSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHRydWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRNZXNzYWdlcyxcbiAgICAgICAgc2VuZE1lc3NhZ2VcbiAgICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2hhdEhhbmRsZXJzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBNkIsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFN0IsTUFBTUcsWUFBWSxHQUFJQyxXQUFXLElBQUs7RUFDbEM7QUFDSjtBQUNBO0FBQ0E7RUFDSSxNQUFNQyxXQUFXLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7SUFDcEMsTUFBTUMsSUFBSSxHQUFHRixHQUFHLENBQUNFLElBQUk7SUFDckIsTUFBTUMsUUFBUSxHQUFHLE1BQU1MLFdBQVcsQ0FBQ0MsV0FBVyxDQUFDRyxJQUFJLENBQUNFLEVBQUUsQ0FBQztJQUV2RCxPQUFPSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ3hCQyxJQUFJLEVBQUVKO0lBQ1YsQ0FBQyxDQUFDO0VBQ04sQ0FBQzs7RUFFRDtBQUNKO0FBQ0E7QUFDQTtFQUNJLE1BQU1LLFdBQVcsR0FBRyxNQUFBQSxDQUFPUixHQUFHLEVBQUVDLEdBQUcsS0FBSztJQUNwQyxNQUFNO01BQ0ZRO0lBQ0osQ0FBQyxHQUFHVCxHQUFHLENBQUNVLElBQUk7SUFFWixNQUFNUixJQUFJLEdBQUdGLEdBQUcsQ0FBQ0UsSUFBSTtJQUNyQixNQUFNSixXQUFXLENBQUNVLFdBQVcsQ0FBQ1IsR0FBRyxDQUFDRSxJQUFJLENBQUNFLEVBQUUsRUFBRUssT0FBTyxDQUFDO0lBRW5ELE9BQU9SLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDO0VBQ3JDLENBQUM7RUFFRCxPQUFPO0lBQ0hQLFdBQVc7SUFDWFM7RUFDSixDQUFDO0FBQ0wsQ0FBQztBQUFDLElBQUFHLFFBQUEsR0FBQUMsT0FBQSxDQUFBaEIsT0FBQSxHQUVhQyxZQUFZIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","obj","__esModule","default","chatHandlers","chatService","getMessages","req","res","user","messages","id","status","json","data","sendMessage","message","body","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["chat.handlers.js"],"sourcesContent":["import express from 'express'\n\nconst chatHandlers = (chatService) => {\n    /**\n     * @type {express.Request} req\n     * @type {express.Response} response}\n     */\n    const getMessages = async (req, res) => {\n        const user = req.user;\n        const messages = await chatService.getMessages(user.id);\n\n        return res.status(200).json({\n            data: messages\n        });\n    };\n\n    /**\n     * @type {express.Request} req\n     * @type {express.Response} response}\n     */\n    const sendMessage = async (req, res) => {\n        const {\n            message\n        } = req.body;\n\n        const user = req.user;\n        await chatService.sendMessage(req.user.id, message);\n\n        return res.status(200).json(true);\n    };\n\n    return {\n        getMessages,\n        sendMessage\n    };\n};\n\nexport default chatHandlers;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA6B,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE7B,MAAMG,YAAY,GAAIC,WAAW,IAAK;EAClC;AACJ;AACA;AACA;EACI,MAAMC,WAAW,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;IACpC,MAAMC,IAAI,GAAGF,GAAG,CAACE,IAAI;IACrB,MAAMC,QAAQ,GAAG,MAAML,WAAW,CAACC,WAAW,CAACG,IAAI,CAACE,EAAE,CAAC;IAEvD,OAAOH,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBC,IAAI,EAAEJ;IACV,CAAC,CAAC;EACN,CAAC;;EAED;AACJ;AACA;AACA;EACI,MAAMK,WAAW,GAAG,MAAAA,CAAOR,GAAG,EAAEC,GAAG,KAAK;IACpC,MAAM;MACFQ;IACJ,CAAC,GAAGT,GAAG,CAACU,IAAI;IAEZ,MAAMR,IAAI,GAAGF,GAAG,CAACE,IAAI;IACrB,MAAMJ,WAAW,CAACU,WAAW,CAACR,GAAG,CAACE,IAAI,CAACE,EAAE,EAAEK,OAAO,CAAC;IAEnD,OAAOR,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;EACrC,CAAC;EAED,OAAO;IACHP,WAAW;IACXS;EACJ,CAAC;AACL,CAAC;AAAC,IAAAG,QAAA,GAAAC,OAAA,CAAAhB,OAAA,GAEaC,YAAY"}},"mtime":1699044214841},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/database/mysql.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst init = () => {\n  const {\n    DB_HOST,\n    DB_PORT = 3306,\n    DB_USERNAME,\n    DB_PASSWORD,\n    DB_NAME\n  } = process.env;\n  return require('knex')({\n    client: 'mysql2',\n    connection: {\n      host: DB_HOST,\n      port: DB_PORT,\n      user: DB_USERNAME,\n      password: DB_PASSWORD,\n      database: DB_NAME\n    }\n  });\n  ;\n};\nconst mysql = {\n  init\n};\nvar _default = exports.default = mysql;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbml0IiwiREJfSE9TVCIsIkRCX1BPUlQiLCJEQl9VU0VSTkFNRSIsIkRCX1BBU1NXT1JEIiwiREJfTkFNRSIsInByb2Nlc3MiLCJlbnYiLCJyZXF1aXJlIiwiY2xpZW50IiwiY29ubmVjdGlvbiIsImhvc3QiLCJwb3J0IiwidXNlciIsInBhc3N3b3JkIiwiZGF0YWJhc2UiLCJteXNxbCIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL2RhdGFiYXNlLyIsInNvdXJjZXMiOlsibXlzcWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAgIERCX0hPU1QsXG4gICAgICAgIERCX1BPUlQgPSAzMzA2LFxuICAgICAgICBEQl9VU0VSTkFNRSxcbiAgICAgICAgREJfUEFTU1dPUkQsXG4gICAgICAgIERCX05BTUVcbiAgICB9ID0gcHJvY2Vzcy5lbnY7XG5cbiAgICByZXR1cm4gcmVxdWlyZSgna25leCcpKHtcbiAgICAgICAgY2xpZW50OiAnbXlzcWwyJyxcbiAgICAgICAgY29ubmVjdGlvbjoge1xuICAgICAgICAgICAgaG9zdCA6IERCX0hPU1QsXG4gICAgICAgICAgICBwb3J0IDogREJfUE9SVCxcbiAgICAgICAgICAgIHVzZXIgOiBEQl9VU0VSTkFNRSxcbiAgICAgICAgICAgIHBhc3N3b3JkIDogREJfUEFTU1dPUkQsXG4gICAgICAgICAgICBkYXRhYmFzZSA6IERCX05BTUVcbiAgICAgICAgfVxuICAgIH0pOztcbn07XG5cblxuY29uc3QgbXlzcWwgPSB7XG4gICAgaW5pdFxufTtcblxuZXhwb3J0IGRlZmF1bHQgbXlzcWw7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLElBQUksR0FBR0EsQ0FBQSxLQUFNO0VBQ2YsTUFBTTtJQUNGQyxPQUFPO0lBQ1BDLE9BQU8sR0FBRyxJQUFJO0lBQ2RDLFdBQVc7SUFDWEMsV0FBVztJQUNYQztFQUNKLENBQUMsR0FBR0MsT0FBTyxDQUFDQyxHQUFHO0VBRWYsT0FBT0MsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ25CQyxNQUFNLEVBQUUsUUFBUTtJQUNoQkMsVUFBVSxFQUFFO01BQ1JDLElBQUksRUFBR1YsT0FBTztNQUNkVyxJQUFJLEVBQUdWLE9BQU87TUFDZFcsSUFBSSxFQUFHVixXQUFXO01BQ2xCVyxRQUFRLEVBQUdWLFdBQVc7TUFDdEJXLFFBQVEsRUFBR1Y7SUFDZjtFQUNKLENBQUMsQ0FBQztFQUFDO0FBQ1AsQ0FBQztBQUdELE1BQU1XLEtBQUssR0FBRztFQUNWaEI7QUFDSixDQUFDO0FBQUMsSUFBQWlCLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWFILEtBQUsifQ==","map":{"version":3,"names":["init","DB_HOST","DB_PORT","DB_USERNAME","DB_PASSWORD","DB_NAME","process","env","require","client","connection","host","port","user","password","database","mysql","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/database/","sources":["mysql.js"],"sourcesContent":["const init = () => {\n    const {\n        DB_HOST,\n        DB_PORT = 3306,\n        DB_USERNAME,\n        DB_PASSWORD,\n        DB_NAME\n    } = process.env;\n\n    return require('knex')({\n        client: 'mysql2',\n        connection: {\n            host : DB_HOST,\n            port : DB_PORT,\n            user : DB_USERNAME,\n            password : DB_PASSWORD,\n            database : DB_NAME\n        }\n    });;\n};\n\n\nconst mysql = {\n    init\n};\n\nexport default mysql;\n"],"mappings":";;;;;;AAAA,MAAMA,IAAI,GAAGA,CAAA,KAAM;EACf,MAAM;IACFC,OAAO;IACPC,OAAO,GAAG,IAAI;IACdC,WAAW;IACXC,WAAW;IACXC;EACJ,CAAC,GAAGC,OAAO,CAACC,GAAG;EAEf,OAAOC,OAAO,CAAC,MAAM,CAAC,CAAC;IACnBC,MAAM,EAAE,QAAQ;IAChBC,UAAU,EAAE;MACRC,IAAI,EAAGV,OAAO;MACdW,IAAI,EAAGV,OAAO;MACdW,IAAI,EAAGV,WAAW;MAClBW,QAAQ,EAAGV,WAAW;MACtBW,QAAQ,EAAGV;IACf;EACJ,CAAC,CAAC;EAAC;AACP,CAAC;AAGD,MAAMW,KAAK,GAAG;EACVhB;AACJ,CAAC;AAAC,IAAAiB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaH,KAAK"}},"mtime":1699046447117},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/http.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _main = _interopRequireDefault(require(\"./main.handlers\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _authentication = _interopRequireDefault(require(\"./authentication.handlers\"));\nvar _auth = _interopRequireDefault(require(\"./middlewares/auth\"));\nvar _user = _interopRequireDefault(require(\"../database/user\"));\nvar _user2 = _interopRequireDefault(require(\"../services/user\"));\nvar _users = _interopRequireDefault(require(\"./users.handlers\"));\nvar _chat = _interopRequireDefault(require(\"../services/chat\"));\nvar _chatMessages = _interopRequireDefault(require(\"../database/chatMessages\"));\nvar _chat2 = _interopRequireDefault(require(\"./chat.handlers\"));\nvar _userVocabulary = _interopRequireDefault(require(\"../services/userVocabulary\"));\nvar _vocabulary = _interopRequireDefault(require(\"../database/vocabulary\"));\nvar _vocabulary2 = _interopRequireDefault(require(\"./vocabulary.handlers\"));\nvar _userPassedCourses = _interopRequireDefault(require(\"../services/userPassedCourses\"));\nvar _userPassedCourses2 = _interopRequireDefault(require(\"../database/userPassedCourses\"));\nvar _course = _interopRequireDefault(require(\"./course.handlers\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst initialize = knex => {\n  const app = (0, _express.default)();\n  app.use((0, _bodyParser.default)());\n  app.use((0, _cors.default)());\n  const _chatMessagesRepository = (0, _chatMessages.default)(knex);\n  const _userVocabularyRepository = (0, _vocabulary.default)(knex);\n  const _userRepository = (0, _user.default)(knex);\n  const _userPassedCourseRepository = (0, _userPassedCourses2.default)(knex);\n  const _userService = (0, _user2.default)(_userRepository);\n  const _chatService = (0, _chat.default)(_chatMessagesRepository, _userService);\n  const _userVocabularyService = (0, _userVocabulary.default)(_userVocabularyRepository);\n  const _userPassedCoursesService = (0, _userPassedCourses.default)(_userPassedCourseRepository, _userService);\n  const mainHandlers = (0, _main.default)();\n  const authenticationHandlers = (0, _authentication.default)(_userService, _userVocabularyService, _userPassedCoursesService);\n  const _usersHandlers = (0, _users.default)(_userVocabularyService, _userPassedCoursesService);\n  const _chatHandlers = (0, _chat2.default)(_chatService);\n  const _vocabularyHandlers = (0, _vocabulary2.default)(_userVocabularyService);\n  const _courseHandlers = (0, _course.default)(_userPassedCoursesService);\n  const authorizationMiddleware = (0, _auth.default)(_userService);\n  app.get('/', mainHandlers.home);\n  app.get('/v1/user/me', authorizationMiddleware, _usersHandlers.me);\n  app.get('/v1/chat', authorizationMiddleware, _chatHandlers.getMessages);\n  app.post('/v1/authentication/by-name', authenticationHandlers.byName);\n  app.post('/v1/chat', authorizationMiddleware, _chatHandlers.sendMessage);\n  app.post('/v1/vocabulary', authorizationMiddleware, _vocabularyHandlers.insert);\n  app.post('/v1/course/pass', authorizationMiddleware, _courseHandlers.passCourse);\n  app.listen(process.env.PORT);\n};\nconst http = {\n  initialize\n};\nvar _default = exports.default = http;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX21haW4iLCJfYm9keVBhcnNlciIsIl9jb3JzIiwiX2F1dGhlbnRpY2F0aW9uIiwiX2F1dGgiLCJfdXNlciIsIl91c2VyMiIsIl91c2VycyIsIl9jaGF0IiwiX2NoYXRNZXNzYWdlcyIsIl9jaGF0MiIsIl91c2VyVm9jYWJ1bGFyeSIsIl92b2NhYnVsYXJ5IiwiX3ZvY2FidWxhcnkyIiwiX3VzZXJQYXNzZWRDb3Vyc2VzIiwiX3VzZXJQYXNzZWRDb3Vyc2VzMiIsIl9jb3Vyc2UiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImluaXRpYWxpemUiLCJrbmV4IiwiYXBwIiwiZXhwcmVzcyIsInVzZSIsImJvZHlQYXJzZXIiLCJjb3JzIiwiX2NoYXRNZXNzYWdlc1JlcG9zaXRvcnkiLCJjaGF0TWVzc2FnZXNSZXBvc2l0b3J5IiwiX3VzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeSIsInVzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeSIsIl91c2VyUmVwb3NpdG9yeSIsInVzZXJSZXBvc2l0b3J5IiwiX3VzZXJQYXNzZWRDb3Vyc2VSZXBvc2l0b3J5IiwidXNlclBhc3NlZENvdXJzZXNSZXBvc2l0b3J5IiwiX3VzZXJTZXJ2aWNlIiwidXNlclNlcnZpY2UiLCJfY2hhdFNlcnZpY2UiLCJjaGF0U2VydmljZSIsIl91c2VyVm9jYWJ1bGFyeVNlcnZpY2UiLCJ1c2VyVm9jYWJ1bGFyeVNlcnZpY2UiLCJfdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlIiwidXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlIiwibWFpbkhhbmRsZXJzIiwibWgiLCJhdXRoZW50aWNhdGlvbkhhbmRsZXJzIiwiYXV0aEgiLCJfdXNlcnNIYW5kbGVycyIsInVzZXJzSGFuZGxlcnMiLCJfY2hhdEhhbmRsZXJzIiwiY2hhdEhhbmRsZXJzIiwiX3ZvY2FidWxhcnlIYW5kbGVycyIsInZvY2FidWxhcnlIYW5kbGVycyIsIl9jb3Vyc2VIYW5kbGVycyIsImNvdXJzZUhhbmRsZXJzIiwiYXV0aG9yaXphdGlvbk1pZGRsZXdhcmUiLCJhdXRoTWlkZGxld2FyZSIsImdldCIsImhvbWUiLCJtZSIsImdldE1lc3NhZ2VzIiwicG9zdCIsImJ5TmFtZSIsInNlbmRNZXNzYWdlIiwiaW5zZXJ0IiwicGFzc0NvdXJzZSIsImxpc3RlbiIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwiaHR0cCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvdHJhbnNwb3J0cy8iLCJzb3VyY2VzIjpbImh0dHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcydcbmltcG9ydCBtaCBmcm9tIFwiLi9tYWluLmhhbmRsZXJzXCJcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gXCJib2R5LXBhcnNlclwiXG5pbXBvcnQgY29ycyBmcm9tIFwiY29yc1wiXG5pbXBvcnQgYXV0aEggZnJvbSBcIi4vYXV0aGVudGljYXRpb24uaGFuZGxlcnNcIlxuaW1wb3J0IGF1dGhNaWRkbGV3YXJlIGZyb20gXCIuL21pZGRsZXdhcmVzL2F1dGhcIjtcbmltcG9ydCB1c2VyUmVwb3NpdG9yeSBmcm9tIFwiLi4vZGF0YWJhc2UvdXNlclwiO1xuaW1wb3J0IHVzZXJTZXJ2aWNlIGZyb20gXCIuLi9zZXJ2aWNlcy91c2VyXCI7XG5pbXBvcnQgdXNlcnNIYW5kbGVycyBmcm9tIFwiLi91c2Vycy5oYW5kbGVyc1wiO1xuaW1wb3J0IGNoYXRTZXJ2aWNlIGZyb20gXCIuLi9zZXJ2aWNlcy9jaGF0XCI7XG5pbXBvcnQgY2hhdE1lc3NhZ2VzUmVwb3NpdG9yeSBmcm9tIFwiLi4vZGF0YWJhc2UvY2hhdE1lc3NhZ2VzXCI7XG5pbXBvcnQgY2hhdEhhbmRsZXJzIGZyb20gXCIuL2NoYXQuaGFuZGxlcnNcIjtcbmltcG9ydCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UgZnJvbSBcIi4uL3NlcnZpY2VzL3VzZXJWb2NhYnVsYXJ5XCI7XG5pbXBvcnQgdXNlclZvY2FidWxhcnlSZXBvc2l0b3J5IGZyb20gXCIuLi9kYXRhYmFzZS92b2NhYnVsYXJ5XCI7XG5pbXBvcnQgdm9jYWJ1bGFyeUhhbmRsZXJzIGZyb20gXCIuL3ZvY2FidWxhcnkuaGFuZGxlcnNcIjtcbmltcG9ydCB1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UgZnJvbSBcIi4uL3NlcnZpY2VzL3VzZXJQYXNzZWRDb3Vyc2VzXCI7XG5pbXBvcnQgdXNlclBhc3NlZENvdXJzZXNSZXBvc2l0b3J5IGZyb20gXCIuLi9kYXRhYmFzZS91c2VyUGFzc2VkQ291cnNlc1wiO1xuaW1wb3J0IGNvdXJzZUhhbmRsZXJzIGZyb20gXCIuL2NvdXJzZS5oYW5kbGVyc1wiO1xuXG5jb25zdCBpbml0aWFsaXplID0gKGtuZXgpID0+IHtcbiAgICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbiAgICBhcHAudXNlKGJvZHlQYXJzZXIoKSk7XG4gICAgYXBwLnVzZShjb3JzKCkpXG5cbiAgICBjb25zdCBfY2hhdE1lc3NhZ2VzUmVwb3NpdG9yeSA9IGNoYXRNZXNzYWdlc1JlcG9zaXRvcnkoa25leCk7XG4gICAgY29uc3QgX3VzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeSA9IHVzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeShrbmV4KTtcbiAgICBjb25zdCBfdXNlclJlcG9zaXRvcnkgPSB1c2VyUmVwb3NpdG9yeShrbmV4KTtcbiAgICBjb25zdCBfdXNlclBhc3NlZENvdXJzZVJlcG9zaXRvcnkgPSB1c2VyUGFzc2VkQ291cnNlc1JlcG9zaXRvcnkoa25leCk7XG5cbiAgICBjb25zdCBfdXNlclNlcnZpY2UgPSB1c2VyU2VydmljZShfdXNlclJlcG9zaXRvcnkpO1xuXG4gICAgY29uc3QgX2NoYXRTZXJ2aWNlID0gY2hhdFNlcnZpY2UoXG4gICAgICAgIF9jaGF0TWVzc2FnZXNSZXBvc2l0b3J5LCBfdXNlclNlcnZpY2VcbiAgICApO1xuXG4gICAgY29uc3QgX3VzZXJWb2NhYnVsYXJ5U2VydmljZSA9IHVzZXJWb2NhYnVsYXJ5U2VydmljZShcbiAgICAgICAgX3VzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeVxuICAgICk7XG5cbiAgICBjb25zdCBfdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlID0gdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlKF91c2VyUGFzc2VkQ291cnNlUmVwb3NpdG9yeSwgX3VzZXJTZXJ2aWNlKTtcblxuICAgIGNvbnN0IG1haW5IYW5kbGVycyA9IG1oKCk7XG4gICAgY29uc3QgYXV0aGVudGljYXRpb25IYW5kbGVycyA9IGF1dGhIKF91c2VyU2VydmljZSwgX3VzZXJWb2NhYnVsYXJ5U2VydmljZSwgX3VzZXJQYXNzZWRDb3Vyc2VzU2VydmljZSk7XG4gICAgY29uc3QgX3VzZXJzSGFuZGxlcnMgPSB1c2Vyc0hhbmRsZXJzKF91c2VyVm9jYWJ1bGFyeVNlcnZpY2UsIF91c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UpO1xuICAgIGNvbnN0IF9jaGF0SGFuZGxlcnMgPSBjaGF0SGFuZGxlcnMoX2NoYXRTZXJ2aWNlKTtcbiAgICBjb25zdCBfdm9jYWJ1bGFyeUhhbmRsZXJzID0gdm9jYWJ1bGFyeUhhbmRsZXJzKF91c2VyVm9jYWJ1bGFyeVNlcnZpY2UpO1xuICAgIGNvbnN0IF9jb3Vyc2VIYW5kbGVycyA9IGNvdXJzZUhhbmRsZXJzKF91c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UpO1xuXG4gICAgY29uc3QgYXV0aG9yaXphdGlvbk1pZGRsZXdhcmUgPSBhdXRoTWlkZGxld2FyZShfdXNlclNlcnZpY2UpO1xuXG4gICAgYXBwLmdldCgnLycsIG1haW5IYW5kbGVycy5ob21lKTtcbiAgICBhcHAuZ2V0KCcvdjEvdXNlci9tZScsIGF1dGhvcml6YXRpb25NaWRkbGV3YXJlLCBfdXNlcnNIYW5kbGVycy5tZSlcbiAgICBhcHAuZ2V0KCcvdjEvY2hhdCcsIGF1dGhvcml6YXRpb25NaWRkbGV3YXJlLCBfY2hhdEhhbmRsZXJzLmdldE1lc3NhZ2VzKTtcblxuICAgIGFwcC5wb3N0KCcvdjEvYXV0aGVudGljYXRpb24vYnktbmFtZScsIGF1dGhlbnRpY2F0aW9uSGFuZGxlcnMuYnlOYW1lKTtcbiAgICBhcHAucG9zdCgnL3YxL2NoYXQnLCBhdXRob3JpemF0aW9uTWlkZGxld2FyZSwgX2NoYXRIYW5kbGVycy5zZW5kTWVzc2FnZSk7XG5cbiAgICBhcHAucG9zdCgnL3YxL3ZvY2FidWxhcnknLCBhdXRob3JpemF0aW9uTWlkZGxld2FyZSwgX3ZvY2FidWxhcnlIYW5kbGVycy5pbnNlcnQpO1xuXG4gICAgYXBwLnBvc3QoJy92MS9jb3Vyc2UvcGFzcycsIGF1dGhvcml6YXRpb25NaWRkbGV3YXJlLCBfY291cnNlSGFuZGxlcnMucGFzc0NvdXJzZSlcblxuICAgIGFwcC5saXN0ZW4ocHJvY2Vzcy5lbnYuUE9SVCk7XG59O1xuXG5jb25zdCBodHRwID0ge1xuICAgIGluaXRpYWxpemVcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGh0dHA7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFdBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLEtBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLGVBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLEtBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFNLEtBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFPLE1BQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFRLE1BQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFTLEtBQUEsR0FBQVYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFVLGFBQUEsR0FBQVgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFXLE1BQUEsR0FBQVosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFZLGVBQUEsR0FBQWIsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFhLFdBQUEsR0FBQWQsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFjLFlBQUEsR0FBQWYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFlLGtCQUFBLEdBQUFoQixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQWdCLG1CQUFBLEdBQUFqQixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQWlCLE9BQUEsR0FBQWxCLHNCQUFBLENBQUFDLE9BQUE7QUFBK0MsU0FBQUQsdUJBQUFtQixHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRS9DLE1BQU1HLFVBQVUsR0FBSUMsSUFBSSxJQUFLO0VBQ3pCLE1BQU1DLEdBQUcsR0FBRyxJQUFBQyxnQkFBTyxFQUFDLENBQUM7RUFFckJELEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLElBQUFDLG1CQUFVLEVBQUMsQ0FBQyxDQUFDO0VBQ3JCSCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxJQUFBRSxhQUFJLEVBQUMsQ0FBQyxDQUFDO0VBRWYsTUFBTUMsdUJBQXVCLEdBQUcsSUFBQUMscUJBQXNCLEVBQUNQLElBQUksQ0FBQztFQUM1RCxNQUFNUSx5QkFBeUIsR0FBRyxJQUFBQyxtQkFBd0IsRUFBQ1QsSUFBSSxDQUFDO0VBQ2hFLE1BQU1VLGVBQWUsR0FBRyxJQUFBQyxhQUFjLEVBQUNYLElBQUksQ0FBQztFQUM1QyxNQUFNWSwyQkFBMkIsR0FBRyxJQUFBQywyQkFBMkIsRUFBQ2IsSUFBSSxDQUFDO0VBRXJFLE1BQU1jLFlBQVksR0FBRyxJQUFBQyxjQUFXLEVBQUNMLGVBQWUsQ0FBQztFQUVqRCxNQUFNTSxZQUFZLEdBQUcsSUFBQUMsYUFBVyxFQUM1QlgsdUJBQXVCLEVBQUVRLFlBQzdCLENBQUM7RUFFRCxNQUFNSSxzQkFBc0IsR0FBRyxJQUFBQyx1QkFBcUIsRUFDaERYLHlCQUNKLENBQUM7RUFFRCxNQUFNWSx5QkFBeUIsR0FBRyxJQUFBQywwQkFBd0IsRUFBQ1QsMkJBQTJCLEVBQUVFLFlBQVksQ0FBQztFQUVyRyxNQUFNUSxZQUFZLEdBQUcsSUFBQUMsYUFBRSxFQUFDLENBQUM7RUFDekIsTUFBTUMsc0JBQXNCLEdBQUcsSUFBQUMsdUJBQUssRUFBQ1gsWUFBWSxFQUFFSSxzQkFBc0IsRUFBRUUseUJBQXlCLENBQUM7RUFDckcsTUFBTU0sY0FBYyxHQUFHLElBQUFDLGNBQWEsRUFBQ1Qsc0JBQXNCLEVBQUVFLHlCQUF5QixDQUFDO0VBQ3ZGLE1BQU1RLGFBQWEsR0FBRyxJQUFBQyxjQUFZLEVBQUNiLFlBQVksQ0FBQztFQUNoRCxNQUFNYyxtQkFBbUIsR0FBRyxJQUFBQyxvQkFBa0IsRUFBQ2Isc0JBQXNCLENBQUM7RUFDdEUsTUFBTWMsZUFBZSxHQUFHLElBQUFDLGVBQWMsRUFBQ2IseUJBQXlCLENBQUM7RUFFakUsTUFBTWMsdUJBQXVCLEdBQUcsSUFBQUMsYUFBYyxFQUFDckIsWUFBWSxDQUFDO0VBRTVEYixHQUFHLENBQUNtQyxHQUFHLENBQUMsR0FBRyxFQUFFZCxZQUFZLENBQUNlLElBQUksQ0FBQztFQUMvQnBDLEdBQUcsQ0FBQ21DLEdBQUcsQ0FBQyxhQUFhLEVBQUVGLHVCQUF1QixFQUFFUixjQUFjLENBQUNZLEVBQUUsQ0FBQztFQUNsRXJDLEdBQUcsQ0FBQ21DLEdBQUcsQ0FBQyxVQUFVLEVBQUVGLHVCQUF1QixFQUFFTixhQUFhLENBQUNXLFdBQVcsQ0FBQztFQUV2RXRDLEdBQUcsQ0FBQ3VDLElBQUksQ0FBQyw0QkFBNEIsRUFBRWhCLHNCQUFzQixDQUFDaUIsTUFBTSxDQUFDO0VBQ3JFeEMsR0FBRyxDQUFDdUMsSUFBSSxDQUFDLFVBQVUsRUFBRU4sdUJBQXVCLEVBQUVOLGFBQWEsQ0FBQ2MsV0FBVyxDQUFDO0VBRXhFekMsR0FBRyxDQUFDdUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFTix1QkFBdUIsRUFBRUosbUJBQW1CLENBQUNhLE1BQU0sQ0FBQztFQUUvRTFDLEdBQUcsQ0FBQ3VDLElBQUksQ0FBQyxpQkFBaUIsRUFBRU4sdUJBQXVCLEVBQUVGLGVBQWUsQ0FBQ1ksVUFBVSxDQUFDO0VBRWhGM0MsR0FBRyxDQUFDNEMsTUFBTSxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDO0FBQ2hDLENBQUM7QUFFRCxNQUFNQyxJQUFJLEdBQUc7RUFDVGxEO0FBQ0osQ0FBQztBQUFDLElBQUFtRCxRQUFBLEdBQUFDLE9BQUEsQ0FBQXJELE9BQUEsR0FFYW1ELElBQUkifQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_main","_bodyParser","_cors","_authentication","_auth","_user","_user2","_users","_chat","_chatMessages","_chat2","_userVocabulary","_vocabulary","_vocabulary2","_userPassedCourses","_userPassedCourses2","_course","obj","__esModule","default","initialize","knex","app","express","use","bodyParser","cors","_chatMessagesRepository","chatMessagesRepository","_userVocabularyRepository","userVocabularyRepository","_userRepository","userRepository","_userPassedCourseRepository","userPassedCoursesRepository","_userService","userService","_chatService","chatService","_userVocabularyService","userVocabularyService","_userPassedCoursesService","userPassedCoursesService","mainHandlers","mh","authenticationHandlers","authH","_usersHandlers","usersHandlers","_chatHandlers","chatHandlers","_vocabularyHandlers","vocabularyHandlers","_courseHandlers","courseHandlers","authorizationMiddleware","authMiddleware","get","home","me","getMessages","post","byName","sendMessage","insert","passCourse","listen","process","env","PORT","http","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["http.js"],"sourcesContent":["import express from 'express'\nimport mh from \"./main.handlers\"\nimport bodyParser from \"body-parser\"\nimport cors from \"cors\"\nimport authH from \"./authentication.handlers\"\nimport authMiddleware from \"./middlewares/auth\";\nimport userRepository from \"../database/user\";\nimport userService from \"../services/user\";\nimport usersHandlers from \"./users.handlers\";\nimport chatService from \"../services/chat\";\nimport chatMessagesRepository from \"../database/chatMessages\";\nimport chatHandlers from \"./chat.handlers\";\nimport userVocabularyService from \"../services/userVocabulary\";\nimport userVocabularyRepository from \"../database/vocabulary\";\nimport vocabularyHandlers from \"./vocabulary.handlers\";\nimport userPassedCoursesService from \"../services/userPassedCourses\";\nimport userPassedCoursesRepository from \"../database/userPassedCourses\";\nimport courseHandlers from \"./course.handlers\";\n\nconst initialize = (knex) => {\n    const app = express();\n\n    app.use(bodyParser());\n    app.use(cors())\n\n    const _chatMessagesRepository = chatMessagesRepository(knex);\n    const _userVocabularyRepository = userVocabularyRepository(knex);\n    const _userRepository = userRepository(knex);\n    const _userPassedCourseRepository = userPassedCoursesRepository(knex);\n\n    const _userService = userService(_userRepository);\n\n    const _chatService = chatService(\n        _chatMessagesRepository, _userService\n    );\n\n    const _userVocabularyService = userVocabularyService(\n        _userVocabularyRepository\n    );\n\n    const _userPassedCoursesService = userPassedCoursesService(_userPassedCourseRepository, _userService);\n\n    const mainHandlers = mh();\n    const authenticationHandlers = authH(_userService, _userVocabularyService, _userPassedCoursesService);\n    const _usersHandlers = usersHandlers(_userVocabularyService, _userPassedCoursesService);\n    const _chatHandlers = chatHandlers(_chatService);\n    const _vocabularyHandlers = vocabularyHandlers(_userVocabularyService);\n    const _courseHandlers = courseHandlers(_userPassedCoursesService);\n\n    const authorizationMiddleware = authMiddleware(_userService);\n\n    app.get('/', mainHandlers.home);\n    app.get('/v1/user/me', authorizationMiddleware, _usersHandlers.me)\n    app.get('/v1/chat', authorizationMiddleware, _chatHandlers.getMessages);\n\n    app.post('/v1/authentication/by-name', authenticationHandlers.byName);\n    app.post('/v1/chat', authorizationMiddleware, _chatHandlers.sendMessage);\n\n    app.post('/v1/vocabulary', authorizationMiddleware, _vocabularyHandlers.insert);\n\n    app.post('/v1/course/pass', authorizationMiddleware, _courseHandlers.passCourse)\n\n    app.listen(process.env.PORT);\n};\n\nconst http = {\n    initialize\n};\n\nexport default http;\n"],"mappings":"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"}},"mtime":1699071234192},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/main.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst mainHandlers = () => {\n  const home = (_, res) => {\n    return res.json({\n      ok: true\n    });\n  };\n  return {\n    home\n  };\n};\nvar _default = exports.default = mainHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluSGFuZGxlcnMiLCJob21lIiwiXyIsInJlcyIsImpzb24iLCJvayIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3RyYW5zcG9ydHMvIiwic291cmNlcyI6WyJtYWluLmhhbmRsZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1haW5IYW5kbGVycyA9ICgpID0+IHtcbiAgICBjb25zdCBob21lID0gKF8sIHJlcykgPT4ge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgICAgICAgb2s6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGhvbWVcbiAgICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbWFpbkhhbmRsZXJzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxZQUFZLEdBQUdBLENBQUEsS0FBTTtFQUN2QixNQUFNQyxJQUFJLEdBQUdBLENBQUNDLENBQUMsRUFBRUMsR0FBRyxLQUFLO0lBQ3JCLE9BQU9BLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDO01BQ1pDLEVBQUUsRUFBRTtJQUNSLENBQUMsQ0FBQztFQUNOLENBQUM7RUFFRCxPQUFPO0lBQ0hKO0VBQ0osQ0FBQztBQUNMLENBQUM7QUFBQyxJQUFBSyxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVhUixZQUFZIn0=","map":{"version":3,"names":["mainHandlers","home","_","res","json","ok","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["main.handlers.js"],"sourcesContent":["const mainHandlers = () => {\n    const home = (_, res) => {\n        return res.json({\n            ok: true\n        });\n    };\n\n    return {\n        home\n    };\n};\n\nexport default mainHandlers;\n"],"mappings":";;;;;;AAAA,MAAMA,YAAY,GAAGA,CAAA,KAAM;EACvB,MAAMC,IAAI,GAAGA,CAACC,CAAC,EAAEC,GAAG,KAAK;IACrB,OAAOA,GAAG,CAACC,IAAI,CAAC;MACZC,EAAE,EAAE;IACR,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACHJ;EACJ,CAAC;AACL,CAAC;AAAC,IAAAK,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaR,YAAY"}},"mtime":1699045729945},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/authentication.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _user = require(\"../dto/user\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/**\n * @param {usersService()} usersService\n * @param {userVocabularyService()} userVocabularyService\n * @param {userPassedCoursesService()} userPassedCoursesService\n * @returns {{byName: byName}}\n */\nconst authenticationHandlers = (usersService, userVocabularyService, userPassedCoursesService) => {\n  /**\n   * @param {express.Request} req\n   * @param {express.Response} res\n   */\n  const byName = async (req, res) => {\n    const name = req.body.display_name;\n    if (!name) {\n      return res.status(400).json({\n        type: 'authentication/invalid-name',\n        message: '`name` field is required'\n      });\n    }\n    const [token, user] = await usersService.createUser(name);\n    return res.status(201).json({\n      data: {\n        token,\n        user: {\n          me: (0, _user.newMeUser)(user),\n          vocabulary: await userVocabularyService.getUserVocabulary(user.id),\n          passed_courses: (await userPassedCoursesService.getPassedCoursesByUserID(user.id)) || []\n        }\n      }\n    });\n  };\n  return {\n    byName\n  };\n};\nvar _default = exports.default = authenticationHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImF1dGhlbnRpY2F0aW9uSGFuZGxlcnMiLCJ1c2Vyc1NlcnZpY2UiLCJ1c2VyVm9jYWJ1bGFyeVNlcnZpY2UiLCJ1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UiLCJieU5hbWUiLCJyZXEiLCJyZXMiLCJuYW1lIiwiYm9keSIsImRpc3BsYXlfbmFtZSIsInN0YXR1cyIsImpzb24iLCJ0eXBlIiwibWVzc2FnZSIsInRva2VuIiwidXNlciIsImNyZWF0ZVVzZXIiLCJkYXRhIiwibWUiLCJuZXdNZVVzZXIiLCJ2b2NhYnVsYXJ5IiwiZ2V0VXNlclZvY2FidWxhcnkiLCJpZCIsInBhc3NlZF9jb3Vyc2VzIiwiZ2V0UGFzc2VkQ291cnNlc0J5VXNlcklEIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy90cmFuc3BvcnRzLyIsInNvdXJjZXMiOlsiYXV0aGVudGljYXRpb24uaGFuZGxlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcydcbmltcG9ydCB7bmV3TWVVc2VyfSBmcm9tIFwiLi4vZHRvL3VzZXJcIjtcblxuLyoqXG4gKiBAcGFyYW0ge3VzZXJzU2VydmljZSgpfSB1c2Vyc1NlcnZpY2VcbiAqIEBwYXJhbSB7dXNlclZvY2FidWxhcnlTZXJ2aWNlKCl9IHVzZXJWb2NhYnVsYXJ5U2VydmljZVxuICogQHBhcmFtIHt1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UoKX0gdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlXG4gKiBAcmV0dXJucyB7e2J5TmFtZTogYnlOYW1lfX1cbiAqL1xuY29uc3QgYXV0aGVudGljYXRpb25IYW5kbGVycyA9ICh1c2Vyc1NlcnZpY2UsIHVzZXJWb2NhYnVsYXJ5U2VydmljZSwgdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlKSA9PiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtleHByZXNzLlJlcXVlc3R9IHJlcVxuICAgICAqIEBwYXJhbSB7ZXhwcmVzcy5SZXNwb25zZX0gcmVzXG4gICAgICovXG4gICAgY29uc3QgYnlOYW1lID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSByZXEuYm9keS5kaXNwbGF5X25hbWU7XG5cbiAgICAgICAgaWYoIW5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2F1dGhlbnRpY2F0aW9uL2ludmFsaWQtbmFtZScsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ2BuYW1lYCBmaWVsZCBpcyByZXF1aXJlZCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgW3Rva2VuLCB1c2VyXSA9IGF3YWl0IHVzZXJzU2VydmljZS5jcmVhdGVVc2VyKG5hbWUpO1xuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgICBtZTogbmV3TWVVc2VyKHVzZXIpLFxuICAgICAgICAgICAgICAgICAgICB2b2NhYnVsYXJ5OiBhd2FpdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UuZ2V0VXNlclZvY2FidWxhcnkodXNlci5pZCksXG4gICAgICAgICAgICAgICAgICAgIHBhc3NlZF9jb3Vyc2VzOiAoYXdhaXQgdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlLmdldFBhc3NlZENvdXJzZXNCeVVzZXJJRCh1c2VyLmlkKSkgfHwgW10sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGJ5TmFtZVxuICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhdXRoZW50aWNhdGlvbkhhbmRsZXJzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFELE9BQUE7QUFBc0MsU0FBQUQsdUJBQUFHLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUcsc0JBQXNCLEdBQUdBLENBQUNDLFlBQVksRUFBRUMscUJBQXFCLEVBQUVDLHdCQUF3QixLQUFLO0VBQzlGO0FBQ0o7QUFDQTtBQUNBO0VBQ0ksTUFBTUMsTUFBTSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0lBQy9CLE1BQU1DLElBQUksR0FBR0YsR0FBRyxDQUFDRyxJQUFJLENBQUNDLFlBQVk7SUFFbEMsSUFBRyxDQUFDRixJQUFJLEVBQUU7TUFDTixPQUFPRCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQ3hCQyxJQUFJLEVBQUUsNkJBQTZCO1FBQ25DQyxPQUFPLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDTjtJQUVBLE1BQU0sQ0FBQ0MsS0FBSyxFQUFFQyxJQUFJLENBQUMsR0FBRyxNQUFNZCxZQUFZLENBQUNlLFVBQVUsQ0FBQ1QsSUFBSSxDQUFDO0lBRXpELE9BQU9ELEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJNLElBQUksRUFBRTtRQUNGSCxLQUFLO1FBQ0xDLElBQUksRUFBRTtVQUNGRyxFQUFFLEVBQUUsSUFBQUMsZUFBUyxFQUFDSixJQUFJLENBQUM7VUFDbkJLLFVBQVUsRUFBRSxNQUFNbEIscUJBQXFCLENBQUNtQixpQkFBaUIsQ0FBQ04sSUFBSSxDQUFDTyxFQUFFLENBQUM7VUFDbEVDLGNBQWMsRUFBRSxDQUFDLE1BQU1wQix3QkFBd0IsQ0FBQ3FCLHdCQUF3QixDQUFDVCxJQUFJLENBQUNPLEVBQUUsQ0FBQyxLQUFLO1FBQzFGO01BQ0o7SUFDSixDQUFDLENBQUM7RUFDTixDQUFDO0VBRUQsT0FBTztJQUNIbEI7RUFDSixDQUFDO0FBQ0wsQ0FBQztBQUFDLElBQUFxQixRQUFBLEdBQUFDLE9BQUEsQ0FBQTNCLE9BQUEsR0FFYUMsc0JBQXNCIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_user","obj","__esModule","default","authenticationHandlers","usersService","userVocabularyService","userPassedCoursesService","byName","req","res","name","body","display_name","status","json","type","message","token","user","createUser","data","me","newMeUser","vocabulary","getUserVocabulary","id","passed_courses","getPassedCoursesByUserID","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["authentication.handlers.js"],"sourcesContent":["import express from 'express'\nimport {newMeUser} from \"../dto/user\";\n\n/**\n * @param {usersService()} usersService\n * @param {userVocabularyService()} userVocabularyService\n * @param {userPassedCoursesService()} userPassedCoursesService\n * @returns {{byName: byName}}\n */\nconst authenticationHandlers = (usersService, userVocabularyService, userPassedCoursesService) => {\n    /**\n     * @param {express.Request} req\n     * @param {express.Response} res\n     */\n    const byName = async (req, res) => {\n        const name = req.body.display_name;\n\n        if(!name) {\n            return res.status(400).json({\n                type: 'authentication/invalid-name',\n                message: '`name` field is required'\n            });\n        }\n\n        const [token, user] = await usersService.createUser(name);\n\n        return res.status(201).json({\n            data: {\n                token,\n                user: {\n                    me: newMeUser(user),\n                    vocabulary: await userVocabularyService.getUserVocabulary(user.id),\n                    passed_courses: (await userPassedCoursesService.getPassedCoursesByUserID(user.id)) || [],\n                },\n            }\n        });\n    };\n\n    return {\n        byName\n    };\n};\n\nexport default authenticationHandlers;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAAsC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA,MAAMG,sBAAsB,GAAGA,CAACC,YAAY,EAAEC,qBAAqB,EAAEC,wBAAwB,KAAK;EAC9F;AACJ;AACA;AACA;EACI,MAAMC,MAAM,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;IAC/B,MAAMC,IAAI,GAAGF,GAAG,CAACG,IAAI,CAACC,YAAY;IAElC,IAAG,CAACF,IAAI,EAAE;MACN,OAAOD,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QACxBC,IAAI,EAAE,6BAA6B;QACnCC,OAAO,EAAE;MACb,CAAC,CAAC;IACN;IAEA,MAAM,CAACC,KAAK,EAAEC,IAAI,CAAC,GAAG,MAAMd,YAAY,CAACe,UAAU,CAACT,IAAI,CAAC;IAEzD,OAAOD,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBM,IAAI,EAAE;QACFH,KAAK;QACLC,IAAI,EAAE;UACFG,EAAE,EAAE,IAAAC,eAAS,EAACJ,IAAI,CAAC;UACnBK,UAAU,EAAE,MAAMlB,qBAAqB,CAACmB,iBAAiB,CAACN,IAAI,CAACO,EAAE,CAAC;UAClEC,cAAc,EAAE,CAAC,MAAMpB,wBAAwB,CAACqB,wBAAwB,CAACT,IAAI,CAACO,EAAE,CAAC,KAAK;QAC1F;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACHlB;EACJ,CAAC;AACL,CAAC;AAAC,IAAAqB,QAAA,GAAAC,OAAA,CAAA3B,OAAA,GAEaC,sBAAsB"}},"mtime":1699070458840},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/dto/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/dto/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.newUser = exports.newMeUser = void 0;\nvar _level = require(\"./level\");\nconst newMeUser = user => {\n  return {\n    id: user.id,\n    display_name: user.display_name,\n    xp: user.xp,\n    level: (0, _level.getLevelByXP)(user.xp)\n  };\n};\nexports.newMeUser = newMeUser;\nconst newUser = user => {\n  return {\n    id: user.id,\n    display_name: user.display_name,\n    xp: user.xp,\n    level: (0, _level.getLevelByXP)(user.xp)\n  };\n};\nexports.newUser = newUser;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbGV2ZWwiLCJyZXF1aXJlIiwibmV3TWVVc2VyIiwidXNlciIsImlkIiwiZGlzcGxheV9uYW1lIiwieHAiLCJsZXZlbCIsImdldExldmVsQnlYUCIsImV4cG9ydHMiLCJuZXdVc2VyIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy9kdG8vIiwic291cmNlcyI6WyJ1c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z2V0TGV2ZWxCeVhQfSBmcm9tIFwiLi9sZXZlbFwiO1xuXG5jb25zdCBuZXdNZVVzZXIgPSAodXNlcikgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICBkaXNwbGF5X25hbWU6IHVzZXIuZGlzcGxheV9uYW1lLFxuICAgICAgICB4cDogdXNlci54cCxcbiAgICAgICAgbGV2ZWw6IGdldExldmVsQnlYUCh1c2VyLnhwKSxcbiAgICB9O1xufTtcblxuY29uc3QgbmV3VXNlciA9ICh1c2VyKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgIGRpc3BsYXlfbmFtZTogdXNlci5kaXNwbGF5X25hbWUsXG4gICAgICAgIHhwOiB1c2VyLnhwLFxuICAgICAgICBsZXZlbDogZ2V0TGV2ZWxCeVhQKHVzZXIueHApLFxuICAgIH07XG59XG5cbmV4cG9ydCB7XG4gICAgbmV3TWVVc2VyLFxuICAgIG5ld1VzZXJcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUVBLE1BQU1DLFNBQVMsR0FBSUMsSUFBSSxJQUFLO0VBQ3hCLE9BQU87SUFDSEMsRUFBRSxFQUFFRCxJQUFJLENBQUNDLEVBQUU7SUFDWEMsWUFBWSxFQUFFRixJQUFJLENBQUNFLFlBQVk7SUFDL0JDLEVBQUUsRUFBRUgsSUFBSSxDQUFDRyxFQUFFO0lBQ1hDLEtBQUssRUFBRSxJQUFBQyxtQkFBWSxFQUFDTCxJQUFJLENBQUNHLEVBQUU7RUFDL0IsQ0FBQztBQUNMLENBQUM7QUFBQ0csT0FBQSxDQUFBUCxTQUFBLEdBQUFBLFNBQUE7QUFFRixNQUFNUSxPQUFPLEdBQUlQLElBQUksSUFBSztFQUN0QixPQUFPO0lBQ0hDLEVBQUUsRUFBRUQsSUFBSSxDQUFDQyxFQUFFO0lBQ1hDLFlBQVksRUFBRUYsSUFBSSxDQUFDRSxZQUFZO0lBQy9CQyxFQUFFLEVBQUVILElBQUksQ0FBQ0csRUFBRTtJQUNYQyxLQUFLLEVBQUUsSUFBQUMsbUJBQVksRUFBQ0wsSUFBSSxDQUFDRyxFQUFFO0VBQy9CLENBQUM7QUFDTCxDQUFDO0FBQUFHLE9BQUEsQ0FBQUMsT0FBQSxHQUFBQSxPQUFBIn0=","map":{"version":3,"names":["_level","require","newMeUser","user","id","display_name","xp","level","getLevelByXP","exports","newUser"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/dto/","sources":["user.js"],"sourcesContent":["import {getLevelByXP} from \"./level\";\n\nconst newMeUser = (user) => {\n    return {\n        id: user.id,\n        display_name: user.display_name,\n        xp: user.xp,\n        level: getLevelByXP(user.xp),\n    };\n};\n\nconst newUser = (user) => {\n    return {\n        id: user.id,\n        display_name: user.display_name,\n        xp: user.xp,\n        level: getLevelByXP(user.xp),\n    };\n}\n\nexport {\n    newMeUser,\n    newUser\n};\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,MAAMC,SAAS,GAAIC,IAAI,IAAK;EACxB,OAAO;IACHC,EAAE,EAAED,IAAI,CAACC,EAAE;IACXC,YAAY,EAAEF,IAAI,CAACE,YAAY;IAC/BC,EAAE,EAAEH,IAAI,CAACG,EAAE;IACXC,KAAK,EAAE,IAAAC,mBAAY,EAACL,IAAI,CAACG,EAAE;EAC/B,CAAC;AACL,CAAC;AAACG,OAAA,CAAAP,SAAA,GAAAA,SAAA;AAEF,MAAMQ,OAAO,GAAIP,IAAI,IAAK;EACtB,OAAO;IACHC,EAAE,EAAED,IAAI,CAACC,EAAE;IACXC,YAAY,EAAEF,IAAI,CAACE,YAAY;IAC/BC,EAAE,EAAEH,IAAI,CAACG,EAAE;IACXC,KAAK,EAAE,IAAAC,mBAAY,EAACL,IAAI,CAACG,EAAE;EAC/B,CAAC;AACL,CAAC;AAAAG,OAAA,CAAAC,OAAA,GAAAA,OAAA"}},"mtime":1699057458069},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/services/userVocabulary.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n/**\n * @param {userVocalburyRepository()} repository\n */\nconst userVocabularyService = repository => {\n  const getUserVocabulary = async userID => {\n    return repository.getUserVocabulary(userID);\n  };\n  const insertUserVocabularyWords = (userID, wordsPair) => {\n    return repository.insertUserVocabularyWords(userID, wordsPair);\n  };\n  return {\n    getUserVocabulary,\n    insertUserVocabularyWords\n  };\n};\nvar _default = exports.default = userVocabularyService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyVm9jYWJ1bGFyeVNlcnZpY2UiLCJyZXBvc2l0b3J5IiwiZ2V0VXNlclZvY2FidWxhcnkiLCJ1c2VySUQiLCJpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzIiwid29yZHNQYWlyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJ1c2VyVm9jYWJ1bGFyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYXJhbSB7dXNlclZvY2FsYnVyeVJlcG9zaXRvcnkoKX0gcmVwb3NpdG9yeVxuICovXG5jb25zdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UgPSAocmVwb3NpdG9yeSkgPT4ge1xuICAgIGNvbnN0IGdldFVzZXJWb2NhYnVsYXJ5ID0gYXN5bmMgKHVzZXJJRCkgPT4ge1xuICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5nZXRVc2VyVm9jYWJ1bGFyeSh1c2VySUQpO1xuICAgIH07XG5cbiAgICBjb25zdCBpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzID0gKHVzZXJJRCwgd29yZHNQYWlyKSA9PiB7XG4gICAgICAgIHJldHVybiByZXBvc2l0b3J5Lmluc2VydFVzZXJWb2NhYnVsYXJ5V29yZHModXNlcklELCB3b3Jkc1BhaXIpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRVc2VyVm9jYWJ1bGFyeSxcbiAgICAgICAgaW5zZXJ0VXNlclZvY2FidWxhcnlXb3Jkc1xuICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2U7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLHFCQUFxQixHQUFJQyxVQUFVLElBQUs7RUFDMUMsTUFBTUMsaUJBQWlCLEdBQUcsTUFBT0MsTUFBTSxJQUFLO0lBQ3hDLE9BQU9GLFVBQVUsQ0FBQ0MsaUJBQWlCLENBQUNDLE1BQU0sQ0FBQztFQUMvQyxDQUFDO0VBRUQsTUFBTUMseUJBQXlCLEdBQUdBLENBQUNELE1BQU0sRUFBRUUsU0FBUyxLQUFLO0lBQ3JELE9BQU9KLFVBQVUsQ0FBQ0cseUJBQXlCLENBQUNELE1BQU0sRUFBRUUsU0FBUyxDQUFDO0VBQ2xFLENBQUM7RUFFRCxPQUFPO0lBQ0hILGlCQUFpQjtJQUNqQkU7RUFDSixDQUFDO0FBQ0wsQ0FBQztBQUFDLElBQUFFLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWFSLHFCQUFxQiJ9","map":{"version":3,"names":["userVocabularyService","repository","getUserVocabulary","userID","insertUserVocabularyWords","wordsPair","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/services/","sources":["userVocabulary.js"],"sourcesContent":["/**\n * @param {userVocalburyRepository()} repository\n */\nconst userVocabularyService = (repository) => {\n    const getUserVocabulary = async (userID) => {\n        return repository.getUserVocabulary(userID);\n    };\n\n    const insertUserVocabularyWords = (userID, wordsPair) => {\n        return repository.insertUserVocabularyWords(userID, wordsPair);\n    };\n\n    return {\n        getUserVocabulary,\n        insertUserVocabularyWords\n    };\n};\n\nexport default userVocabularyService;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA,MAAMA,qBAAqB,GAAIC,UAAU,IAAK;EAC1C,MAAMC,iBAAiB,GAAG,MAAOC,MAAM,IAAK;IACxC,OAAOF,UAAU,CAACC,iBAAiB,CAACC,MAAM,CAAC;EAC/C,CAAC;EAED,MAAMC,yBAAyB,GAAGA,CAACD,MAAM,EAAEE,SAAS,KAAK;IACrD,OAAOJ,UAAU,CAACG,yBAAyB,CAACD,MAAM,EAAEE,SAAS,CAAC;EAClE,CAAC;EAED,OAAO;IACHH,iBAAiB;IACjBE;EACJ,CAAC;AACL,CAAC;AAAC,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaR,qBAAqB"}},"mtime":1699054878321},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/database/vocabulary.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _knex = _interopRequireWildcard(require(\"knex\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n/**\n * TABLE: user_vocabulary\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * left_word VARCHAR\n * right_word VARCHAR\n * created_at DATE\n */\n/**\n * @param {Knex} knex\n */\nconst getUserVocabulary = knex => userID => {\n  return knex.select(['id', 'left_word', 'right_word', 'created_at']).from('user_vocabulary').where('user_id', userID).orderBy('created_at', 'desc');\n};\n\n/**\n * @param {Knex} knex\n */\nconst insertUserVocabularyWords = knex => (userID, wordsPair) => {\n  return knex('user_vocabulary').insert(wordsPair.map(p => ({\n    user_id: userID,\n    left_word: p[0],\n    right_word: p[1],\n    created_at: knex.raw('NOW()')\n  })));\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userVocabularyRepository = knex => {\n  return {\n    getUserVocabulary: getUserVocabulary(knex),\n    insertUserVocabularyWords: insertUserVocabularyWords(knex)\n  };\n};\nvar _default = exports.default = userVocabularyRepository;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfa25leCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsImdldFVzZXJWb2NhYnVsYXJ5Iiwia25leCIsInVzZXJJRCIsInNlbGVjdCIsImZyb20iLCJ3aGVyZSIsIm9yZGVyQnkiLCJpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzIiwid29yZHNQYWlyIiwiaW5zZXJ0IiwibWFwIiwicCIsInVzZXJfaWQiLCJsZWZ0X3dvcmQiLCJyaWdodF93b3JkIiwiY3JlYXRlZF9hdCIsInJhdyIsInVzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJ2b2NhYnVsYXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBrbmV4LCB7IEtuZXggfSBmcm9tIFwia25leFwiXG5cbi8qKlxuICogVEFCTEU6IHVzZXJfdm9jYWJ1bGFyeVxuICogU1RSVUNUVVJFOlxuICogaWQgSU5UIEFJXG4gKiB1c2VyX2lkIElOVFxuICogbGVmdF93b3JkIFZBUkNIQVJcbiAqIHJpZ2h0X3dvcmQgVkFSQ0hBUlxuICogY3JlYXRlZF9hdCBEQVRFXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqL1xuY29uc3QgZ2V0VXNlclZvY2FidWxhcnkgPSAoa25leCkgPT4gKHVzZXJJRCkgPT4ge1xuICAgIHJldHVybiBrbmV4LnNlbGVjdChbJ2lkJywgJ2xlZnRfd29yZCcsICdyaWdodF93b3JkJywgJ2NyZWF0ZWRfYXQnXSlcbiAgICAgICAgLmZyb20oJ3VzZXJfdm9jYWJ1bGFyeScpXG4gICAgICAgIC53aGVyZSgndXNlcl9pZCcsIHVzZXJJRClcbiAgICAgICAgLm9yZGVyQnkoJ2NyZWF0ZWRfYXQnLCAnZGVzYycpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqL1xuY29uc3QgaW5zZXJ0VXNlclZvY2FidWxhcnlXb3JkcyA9IChrbmV4KSA9PiAodXNlcklELCB3b3Jkc1BhaXIpID0+IHtcbiAgIHJldHVybiBrbmV4KCd1c2VyX3ZvY2FidWxhcnknKS5pbnNlcnQod29yZHNQYWlyLm1hcCgocCkgPT4gKHtcbiAgICAgICB1c2VyX2lkOiB1c2VySUQsXG4gICAgICAgbGVmdF93b3JkOiBwWzBdLFxuICAgICAgIHJpZ2h0X3dvcmQ6IHBbMV0sXG4gICAgICAgY3JlYXRlZF9hdDoga25leC5yYXcoJ05PVygpJylcbiAgIH0pKSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtLbmV4fSBrbmV4XG4gKiBAcmV0dXJucyB7e2dldFVzZXJCeVRva2VuOiAoZnVuY3Rpb24oKik6IGZ1bmN0aW9uKCopOiAqKX19XG4gKi9cbmNvbnN0IHVzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeSA9IChrbmV4KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0VXNlclZvY2FidWxhcnk6IGdldFVzZXJWb2NhYnVsYXJ5KGtuZXgpLFxuICAgICAgICBpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzOiBpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzKGtuZXgpXG4gICAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsS0FBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQWlDLFNBQUFDLHlCQUFBQyxDQUFBLDZCQUFBQyxP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","map":{"version":3,"names":["_knex","_interopRequireWildcard","require","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","getUserVocabulary","knex","userID","select","from","where","orderBy","insertUserVocabularyWords","wordsPair","insert","map","p","user_id","left_word","right_word","created_at","raw","userVocabularyRepository","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/database/","sources":["vocabulary.js"],"sourcesContent":["import knex, { Knex } from \"knex\"\n\n/**\n * TABLE: user_vocabulary\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * left_word VARCHAR\n * right_word VARCHAR\n * created_at DATE\n */\n\n/**\n * @param {Knex} knex\n */\nconst getUserVocabulary = (knex) => (userID) => {\n    return knex.select(['id', 'left_word', 'right_word', 'created_at'])\n        .from('user_vocabulary')\n        .where('user_id', userID)\n        .orderBy('created_at', 'desc');\n};\n\n/**\n * @param {Knex} knex\n */\nconst insertUserVocabularyWords = (knex) => (userID, wordsPair) => {\n   return knex('user_vocabulary').insert(wordsPair.map((p) => ({\n       user_id: userID,\n       left_word: p[0],\n       right_word: p[1],\n       created_at: knex.raw('NOW()')\n   })));\n}\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userVocabularyRepository = (knex) => {\n    return {\n        getUserVocabulary: getUserVocabulary(knex),\n        insertUserVocabularyWords: insertUserVocabularyWords(knex)\n    };\n};\n\nexport default userVocabularyRepository;\n"],"mappings":";;;;;;AAAA,IAAAA,KAAA,GAAAC,uBAAA,CAAAC,OAAA;AAAiC,SAAAC,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAH,wBAAAG,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA,eAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,WAAAK,OAAA,EAAAL,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA,OAAAQ,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,IAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAjB,CAAA,EAAAc,CAAA,SAAAI,CAAA,GAAAR,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,UAAAI,CAAA,KAAAA,CAAA,CAAAX,GAAA,IAAAW,CAAA,CAAAC,GAAA,IAAAR,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAI,CAAA,IAAAV,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA,YAAAN,CAAA,CAAAH,OAAA,GAAAL,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAgB,GAAA,CAAAnB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA,MAAMY,iBAAiB,GAAIC,IAAI,IAAMC,MAAM,IAAK;EAC5C,OAAOD,IAAI,CAACE,MAAM,CAAC,CAAC,IAAI,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC,CAC9DC,IAAI,CAAC,iBAAiB,CAAC,CACvBC,KAAK,CAAC,SAAS,EAAEH,MAAM,CAAC,CACxBI,OAAO,CAAC,YAAY,EAAE,MAAM,CAAC;AACtC,CAAC;;AAED;AACA;AACA;AACA,MAAMC,yBAAyB,GAAIN,IAAI,IAAK,CAACC,MAAM,EAAEM,SAAS,KAAK;EAChE,OAAOP,IAAI,CAAC,iBAAiB,CAAC,CAACQ,MAAM,CAACD,SAAS,CAACE,GAAG,CAAEC,CAAC,KAAM;IACxDC,OAAO,EAAEV,MAAM;IACfW,SAAS,EAAEF,CAAC,CAAC,CAAC,CAAC;IACfG,UAAU,EAAEH,CAAC,CAAC,CAAC,CAAC;IAChBI,UAAU,EAAEd,IAAI,CAACe,GAAG,CAAC,OAAO;EAChC,CAAC,CAAC,CAAC,CAAC;AACP,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMC,wBAAwB,GAAIhB,IAAI,IAAK;EACvC,OAAO;IACHD,iBAAiB,EAAEA,iBAAiB,CAACC,IAAI,CAAC;IAC1CM,yBAAyB,EAAEA,yBAAyB,CAACN,IAAI;EAC7D,CAAC;AACL,CAAC;AAAC,IAAAiB,QAAA,GAAAC,OAAA,CAAAlC,OAAA,GAEagC,wBAAwB"}},"mtime":1699059933403},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/middlewares/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst authMiddleware = userService => async (req, res, next) => {\n  const authorization = req.headers['authorization'] ?? '';\n  const splitedAuthorization = authorization.split(' ');\n  if (splitedAuthorization.length !== 2 || splitedAuthorization[0] !== 'Bearer') {\n    return res.status(401).json({\n      type: 'authorization/invalid-header',\n      message: 'You provided invalid header'\n    });\n  }\n  try {\n    const user = await userService.getUserByToken(splitedAuthorization[1]);\n    req.user = user[0];\n    next();\n  } catch (e) {\n    console.error(e);\n    return res.status(401).json({\n      type: 'authorization/invalid-token',\n      message: 'You provided invalid token'\n    });\n  }\n};\nvar _default = exports.default = authMiddleware;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoTWlkZGxld2FyZSIsInVzZXJTZXJ2aWNlIiwicmVxIiwicmVzIiwibmV4dCIsImF1dGhvcml6YXRpb24iLCJoZWFkZXJzIiwic3BsaXRlZEF1dGhvcml6YXRpb24iLCJzcGxpdCIsImxlbmd0aCIsInN0YXR1cyIsImpzb24iLCJ0eXBlIiwibWVzc2FnZSIsInVzZXIiLCJnZXRVc2VyQnlUb2tlbiIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy90cmFuc3BvcnRzL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhdXRoTWlkZGxld2FyZSA9ICh1c2VyU2VydmljZSkgPT4gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgYXV0aG9yaXphdGlvbiA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ10gPz8gJyc7XG5cbiAgICBjb25zdCBzcGxpdGVkQXV0aG9yaXphdGlvbiA9IGF1dGhvcml6YXRpb24uc3BsaXQoJyAnKTtcblxuXG4gICAgaWYoc3BsaXRlZEF1dGhvcml6YXRpb24ubGVuZ3RoICE9PSAyIHx8IHNwbGl0ZWRBdXRob3JpemF0aW9uWzBdICE9PSAnQmVhcmVyJykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgICAgdHlwZTogJ2F1dGhvcml6YXRpb24vaW52YWxpZC1oZWFkZXInLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBwcm92aWRlZCBpbnZhbGlkIGhlYWRlcicsXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlLmdldFVzZXJCeVRva2VuKHNwbGl0ZWRBdXRob3JpemF0aW9uWzFdKTtcblxuICAgICAgICByZXEudXNlciA9IHVzZXJbMF07XG4gICAgICAgIG5leHQoKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICAgIHR5cGU6ICdhdXRob3JpemF0aW9uL2ludmFsaWQtdG9rZW4nLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBwcm92aWRlZCBpbnZhbGlkIHRva2VuJ1xuICAgICAgICB9KVxuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGF1dGhNaWRkbGV3YXJlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxjQUFjLEdBQUlDLFdBQVcsSUFBSyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQzlELE1BQU1DLGFBQWEsR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRTtFQUV4RCxNQUFNQyxvQkFBb0IsR0FBR0YsYUFBYSxDQUFDRyxLQUFLLENBQUMsR0FBRyxDQUFDO0VBR3JELElBQUdELG9CQUFvQixDQUFDRSxNQUFNLEtBQUssQ0FBQyxJQUFJRixvQkFBb0IsQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRLEVBQUU7SUFDMUUsT0FBT0osR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QkMsSUFBSSxFQUFFLDhCQUE4QjtNQUNwQ0MsT0FBTyxFQUFFO0lBQ2IsQ0FBQyxDQUFDO0VBQ047RUFFQSxJQUFJO0lBQ0EsTUFBTUMsSUFBSSxHQUFHLE1BQU1iLFdBQVcsQ0FBQ2MsY0FBYyxDQUFDUixvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV0RUwsR0FBRyxDQUFDWSxJQUFJLEdBQUdBLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbEJWLElBQUksQ0FBQyxDQUFDO0VBQ1YsQ0FBQyxDQUFDLE9BQU1ZLENBQUMsRUFBRTtJQUNQQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0YsQ0FBQyxDQUFDO0lBQ2hCLE9BQU9iLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLElBQUksRUFBRSw2QkFBNkI7TUFDbkNDLE9BQU8sRUFBRTtJQUNiLENBQUMsQ0FBQztFQUNOO0FBQ0osQ0FBQztBQUFDLElBQUFNLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWFyQixjQUFjIn0=","map":{"version":3,"names":["authMiddleware","userService","req","res","next","authorization","headers","splitedAuthorization","split","length","status","json","type","message","user","getUserByToken","e","console","error","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/middlewares/","sources":["auth.js"],"sourcesContent":["const authMiddleware = (userService) => async (req, res, next) => {\n    const authorization = req.headers['authorization'] ?? '';\n\n    const splitedAuthorization = authorization.split(' ');\n\n\n    if(splitedAuthorization.length !== 2 || splitedAuthorization[0] !== 'Bearer') {\n        return res.status(401).json({\n            type: 'authorization/invalid-header',\n            message: 'You provided invalid header',\n        })\n    }\n\n    try {\n        const user = await userService.getUserByToken(splitedAuthorization[1]);\n\n        req.user = user[0];\n        next();\n    } catch(e) {\n        console.error(e);\n        return res.status(401).json({\n            type: 'authorization/invalid-token',\n            message: 'You provided invalid token'\n        })\n    }\n};\n\nexport default authMiddleware;\n"],"mappings":";;;;;;AAAA,MAAMA,cAAc,GAAIC,WAAW,IAAK,OAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC9D,MAAMC,aAAa,GAAGH,GAAG,CAACI,OAAO,CAAC,eAAe,CAAC,IAAI,EAAE;EAExD,MAAMC,oBAAoB,GAAGF,aAAa,CAACG,KAAK,CAAC,GAAG,CAAC;EAGrD,IAAGD,oBAAoB,CAACE,MAAM,KAAK,CAAC,IAAIF,oBAAoB,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;IAC1E,OAAOJ,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBC,IAAI,EAAE,8BAA8B;MACpCC,OAAO,EAAE;IACb,CAAC,CAAC;EACN;EAEA,IAAI;IACA,MAAMC,IAAI,GAAG,MAAMb,WAAW,CAACc,cAAc,CAACR,oBAAoB,CAAC,CAAC,CAAC,CAAC;IAEtEL,GAAG,CAACY,IAAI,GAAGA,IAAI,CAAC,CAAC,CAAC;IAClBV,IAAI,CAAC,CAAC;EACV,CAAC,CAAC,OAAMY,CAAC,EAAE;IACPC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;IAChB,OAAOb,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBC,IAAI,EAAE,6BAA6B;MACnCC,OAAO,EAAE;IACb,CAAC,CAAC;EACN;AACJ,CAAC;AAAC,IAAAM,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEarB,cAAc"}},"mtime":1699055406766},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/database/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _knex = require(\"knex\");\n/**\n * TABLE: users\n * STRUCTURE:\n * id INT AI\n * display_name VARCHAR 64\n * xp INT\n * access_token VARCHAR 512\n */\n/**\n * @param {Knex} knex\n */\nconst getUserByToken = knex => token => {\n  return knex.select('id', 'display_name', 'xp').from('users').where('access_token', token);\n};\n\n/**\n * @param {Knex} knex\n */\nconst getUsersByIDs = knex => ids => {\n  return knex.select('id', 'display_name', 'xp').from('users').where('id', 'IN', ids);\n};\n\n/**\n * @param {Knex} knex\n */\nconst getUserByID = knex => id => {\n  return knex.select('id', 'display_name', 'xp').from('users').where('id', id);\n};\n\n/**\n * @param {Knex} knex\n */\nconst createUser = knex => (displayName, xp, accessToken) => {\n  return knex('users').insert({\n    display_name: displayName,\n    xp,\n    access_token: accessToken\n  }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userRepository = knex => {\n  return {\n    getUserByToken: getUserByToken(knex),\n    getUsersByIDs: getUsersByIDs(knex),\n    getUserByID: getUserByID(knex),\n    createUser: createUser(knex)\n  };\n};\nvar _default = exports.default = userRepository;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfa25leCIsInJlcXVpcmUiLCJnZXRVc2VyQnlUb2tlbiIsImtuZXgiLCJ0b2tlbiIsInNlbGVjdCIsImZyb20iLCJ3aGVyZSIsImdldFVzZXJzQnlJRHMiLCJpZHMiLCJnZXRVc2VyQnlJRCIsImlkIiwiY3JlYXRlVXNlciIsImRpc3BsYXlOYW1lIiwieHAiLCJhY2Nlc3NUb2tlbiIsImluc2VydCIsImRpc3BsYXlfbmFtZSIsImFjY2Vzc190b2tlbiIsInJldHVybmluZyIsInVzZXJSZXBvc2l0b3J5IiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJ1c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tIFwia25leFwiXG5cbi8qKlxuICogVEFCTEU6IHVzZXJzXG4gKiBTVFJVQ1RVUkU6XG4gKiBpZCBJTlQgQUlcbiAqIGRpc3BsYXlfbmFtZSBWQVJDSEFSIDY0XG4gKiB4cCBJTlRcbiAqIGFjY2Vzc190b2tlbiBWQVJDSEFSIDUxMlxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqL1xuY29uc3QgZ2V0VXNlckJ5VG9rZW4gPSAoa25leCkgPT4gKHRva2VuKSA9PiB7XG4gICAgcmV0dXJuIGtuZXguc2VsZWN0KCdpZCcsICdkaXNwbGF5X25hbWUnLCAneHAnKVxuICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAud2hlcmUoJ2FjY2Vzc190b2tlbicsIHRva2VuKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtLbmV4fSBrbmV4XG4gKi9cbmNvbnN0IGdldFVzZXJzQnlJRHMgPSAoa25leCkgPT4gKGlkcykgPT4ge1xuICAgIHJldHVybiBrbmV4LnNlbGVjdCgnaWQnLCAnZGlzcGxheV9uYW1lJywgJ3hwJylcbiAgICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgICAgLndoZXJlKCdpZCcsICdJTicsIGlkcyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7S25leH0ga25leFxuICovXG5jb25zdCBnZXRVc2VyQnlJRCA9IChrbmV4KSA9PiAoaWQpID0+IHtcbiAgICByZXR1cm4ga25leC5zZWxlY3QoJ2lkJywgJ2Rpc3BsYXlfbmFtZScsICd4cCcpXG4gICAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAgIC53aGVyZSgnaWQnLCBpZCk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7S25leH0ga25leFxuICovXG5jb25zdCBjcmVhdGVVc2VyID0gKGtuZXgpID0+IChkaXNwbGF5TmFtZSwgeHAsIGFjY2Vzc1Rva2VuKSA9PiB7XG4gICAgcmV0dXJuIGtuZXgoJ3VzZXJzJykuaW5zZXJ0KHtcbiAgICAgICAgZGlzcGxheV9uYW1lOiBkaXNwbGF5TmFtZSxcbiAgICAgICAgeHAsXG4gICAgICAgIGFjY2Vzc190b2tlbjogYWNjZXNzVG9rZW5cbiAgICB9KS5yZXR1cm5pbmcoJ2lkJyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7S25leH0ga25leFxuICogQHJldHVybnMge3tnZXRVc2VyQnlUb2tlbjogKGZ1bmN0aW9uKCopOiBmdW5jdGlvbigqKTogKil9fVxuICovXG5jb25zdCB1c2VyUmVwb3NpdG9yeSA9IChrbmV4KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0VXNlckJ5VG9rZW46IGdldFVzZXJCeVRva2VuKGtuZXgpLFxuICAgICAgICBnZXRVc2Vyc0J5SURzOiBnZXRVc2Vyc0J5SURzKGtuZXgpLFxuICAgICAgICBnZXRVc2VyQnlJRDogZ2V0VXNlckJ5SUQoa25leCksXG4gICAgICAgIGNyZWF0ZVVzZXI6IGNyZWF0ZVVzZXIoa25leCksXG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlclJlcG9zaXRvcnk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxjQUFjLEdBQUlDLElBQUksSUFBTUMsS0FBSyxJQUFLO0VBQ3hDLE9BQU9ELElBQUksQ0FBQ0UsTUFBTSxDQUFDLElBQUksRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQ3pDQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQ2JDLEtBQUssQ0FBQyxjQUFjLEVBQUVILEtBQUssQ0FBQztBQUNyQyxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLE1BQU1JLGFBQWEsR0FBSUwsSUFBSSxJQUFNTSxHQUFHLElBQUs7RUFDckMsT0FBT04sSUFBSSxDQUFDRSxNQUFNLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FDekNDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FDYkMsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUVFLEdBQUcsQ0FBQztBQUMvQixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLFdBQVcsR0FBSVAsSUFBSSxJQUFNUSxFQUFFLElBQUs7RUFDbEMsT0FBT1IsSUFBSSxDQUFDRSxNQUFNLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FDekNDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FDYkMsS0FBSyxDQUFDLElBQUksRUFBRUksRUFBRSxDQUFDO0FBQ3hCLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsVUFBVSxHQUFJVCxJQUFJLElBQUssQ0FBQ1UsV0FBVyxFQUFFQyxFQUFFLEVBQUVDLFdBQVcsS0FBSztFQUMzRCxPQUFPWixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUNhLE1BQU0sQ0FBQztJQUN4QkMsWUFBWSxFQUFFSixXQUFXO0lBQ3pCQyxFQUFFO0lBQ0ZJLFlBQVksRUFBRUg7RUFDbEIsQ0FBQyxDQUFDLENBQUNJLFNBQVMsQ0FBQyxJQUFJLENBQUM7QUFDdEIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLGNBQWMsR0FBSWpCLElBQUksSUFBSztFQUM3QixPQUFPO0lBQ0hELGNBQWMsRUFBRUEsY0FBYyxDQUFDQyxJQUFJLENBQUM7SUFDcENLLGFBQWEsRUFBRUEsYUFBYSxDQUFDTCxJQUFJLENBQUM7SUFDbENPLFdBQVcsRUFBRUEsV0FBVyxDQUFDUCxJQUFJLENBQUM7SUFDOUJTLFVBQVUsRUFBRUEsVUFBVSxDQUFDVCxJQUFJO0VBQy9CLENBQUM7QUFDTCxDQUFDO0FBQUMsSUFBQWtCLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWFILGNBQWMifQ==","map":{"version":3,"names":["_knex","require","getUserByToken","knex","token","select","from","where","getUsersByIDs","ids","getUserByID","id","createUser","displayName","xp","accessToken","insert","display_name","access_token","returning","userRepository","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/database/","sources":["user.js"],"sourcesContent":["import { Knex } from \"knex\"\n\n/**\n * TABLE: users\n * STRUCTURE:\n * id INT AI\n * display_name VARCHAR 64\n * xp INT\n * access_token VARCHAR 512\n */\n\n\n/**\n * @param {Knex} knex\n */\nconst getUserByToken = (knex) => (token) => {\n    return knex.select('id', 'display_name', 'xp')\n        .from('users')\n        .where('access_token', token);\n};\n\n/**\n * @param {Knex} knex\n */\nconst getUsersByIDs = (knex) => (ids) => {\n    return knex.select('id', 'display_name', 'xp')\n        .from('users')\n        .where('id', 'IN', ids);\n};\n\n/**\n * @param {Knex} knex\n */\nconst getUserByID = (knex) => (id) => {\n    return knex.select('id', 'display_name', 'xp')\n        .from('users')\n        .where('id', id);\n};\n\n/**\n * @param {Knex} knex\n */\nconst createUser = (knex) => (displayName, xp, accessToken) => {\n    return knex('users').insert({\n        display_name: displayName,\n        xp,\n        access_token: accessToken\n    }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userRepository = (knex) => {\n    return {\n        getUserByToken: getUserByToken(knex),\n        getUsersByIDs: getUsersByIDs(knex),\n        getUserByID: getUserByID(knex),\n        createUser: createUser(knex),\n    }\n};\n\nexport default userRepository;\n"],"mappings":";;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA,MAAMC,cAAc,GAAIC,IAAI,IAAMC,KAAK,IAAK;EACxC,OAAOD,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,cAAc,EAAE,IAAI,CAAC,CACzCC,IAAI,CAAC,OAAO,CAAC,CACbC,KAAK,CAAC,cAAc,EAAEH,KAAK,CAAC;AACrC,CAAC;;AAED;AACA;AACA;AACA,MAAMI,aAAa,GAAIL,IAAI,IAAMM,GAAG,IAAK;EACrC,OAAON,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,cAAc,EAAE,IAAI,CAAC,CACzCC,IAAI,CAAC,OAAO,CAAC,CACbC,KAAK,CAAC,IAAI,EAAE,IAAI,EAAEE,GAAG,CAAC;AAC/B,CAAC;;AAED;AACA;AACA;AACA,MAAMC,WAAW,GAAIP,IAAI,IAAMQ,EAAE,IAAK;EAClC,OAAOR,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,cAAc,EAAE,IAAI,CAAC,CACzCC,IAAI,CAAC,OAAO,CAAC,CACbC,KAAK,CAAC,IAAI,EAAEI,EAAE,CAAC;AACxB,CAAC;;AAED;AACA;AACA;AACA,MAAMC,UAAU,GAAIT,IAAI,IAAK,CAACU,WAAW,EAAEC,EAAE,EAAEC,WAAW,KAAK;EAC3D,OAAOZ,IAAI,CAAC,OAAO,CAAC,CAACa,MAAM,CAAC;IACxBC,YAAY,EAAEJ,WAAW;IACzBC,EAAE;IACFI,YAAY,EAAEH;EAClB,CAAC,CAAC,CAACI,SAAS,CAAC,IAAI,CAAC;AACtB,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMC,cAAc,GAAIjB,IAAI,IAAK;EAC7B,OAAO;IACHD,cAAc,EAAEA,cAAc,CAACC,IAAI,CAAC;IACpCK,aAAa,EAAEA,aAAa,CAACL,IAAI,CAAC;IAClCO,WAAW,EAAEA,WAAW,CAACP,IAAI,CAAC;IAC9BS,UAAU,EAAEA,UAAU,CAACT,IAAI;EAC/B,CAAC;AACL,CAAC;AAAC,IAAAkB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaH,cAAc"}},"mtime":1699059004482},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/services/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _generateRandomString = _interopRequireDefault(require(\"../utils/generateRandomString\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/**\n * @param {userRepository()} repository\n */\nconst userService = repository => {\n  const getUserByID = async id => {\n    return repository.getUserByID(id);\n  };\n  const getUserByToken = async token => {\n    const user = await repository.getUserByToken(token);\n    if (user === null) {\n      throw new Error('Failed to find user by token');\n    }\n    return user;\n  };\n  const getUsersByIDs = ids => {\n    return repository.getUsersByIDs(ids);\n  };\n  const createUser = async displayName => {\n    const token = (0, _generateRandomString.default)(30);\n    const userID = await repository.createUser(displayName, 0, token);\n    const user = await repository.getUserByID(userID[0]);\n    return [token, user[0]];\n  };\n  return {\n    getUserByToken,\n    getUserByID,\n    getUsersByIDs,\n    createUser\n  };\n};\nvar _default = exports.default = userService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2VuZXJhdGVSYW5kb21TdHJpbmciLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwidXNlclNlcnZpY2UiLCJyZXBvc2l0b3J5IiwiZ2V0VXNlckJ5SUQiLCJpZCIsImdldFVzZXJCeVRva2VuIiwidG9rZW4iLCJ1c2VyIiwiRXJyb3IiLCJnZXRVc2Vyc0J5SURzIiwiaWRzIiwiY3JlYXRlVXNlciIsImRpc3BsYXlOYW1lIiwiZ2VuZXJhdGVSYW5kb21TdHJpbmciLCJ1c2VySUQiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsidXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ2VuZXJhdGVSYW5kb21TdHJpbmcgZnJvbSBcIi4uL3V0aWxzL2dlbmVyYXRlUmFuZG9tU3RyaW5nXCI7XG5cbi8qKlxuICogQHBhcmFtIHt1c2VyUmVwb3NpdG9yeSgpfSByZXBvc2l0b3J5XG4gKi9cbmNvbnN0IHVzZXJTZXJ2aWNlID0gKHJlcG9zaXRvcnkpID0+IHtcblxuICAgIGNvbnN0IGdldFVzZXJCeUlEID0gYXN5bmMgKGlkKSA9PiB7XG4gICAgICAgIHJldHVybiByZXBvc2l0b3J5LmdldFVzZXJCeUlEKGlkKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0VXNlckJ5VG9rZW4gPSBhc3luYyAodG9rZW4pID0+IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHJlcG9zaXRvcnkuZ2V0VXNlckJ5VG9rZW4odG9rZW4pO1xuXG4gICAgICAgIGlmKHVzZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZpbmQgdXNlciBieSB0b2tlbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfTtcblxuICAgIGNvbnN0IGdldFVzZXJzQnlJRHMgPSAoaWRzKSA9PiB7XG4gICAgICAgIHJldHVybiByZXBvc2l0b3J5LmdldFVzZXJzQnlJRHMoaWRzKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY3JlYXRlVXNlciA9IGFzeW5jIChkaXNwbGF5TmFtZSkgPT4ge1xuICAgICAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMwKTtcbiAgICAgICAgY29uc3QgdXNlcklEID0gYXdhaXQgcmVwb3NpdG9yeS5jcmVhdGVVc2VyKGRpc3BsYXlOYW1lLCAwLCB0b2tlbik7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHJlcG9zaXRvcnkuZ2V0VXNlckJ5SUQodXNlcklEWzBdKTtcblxuICAgICAgICByZXR1cm4gW3Rva2VuLCB1c2VyWzBdXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0VXNlckJ5VG9rZW4sXG4gICAgICAgIGdldFVzZXJCeUlELFxuICAgICAgICBnZXRVc2Vyc0J5SURzLFxuICAgICAgICBjcmVhdGVVc2VyXG4gICAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJTZXJ2aWNlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxxQkFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQWlFLFNBQUFELHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRWpFO0FBQ0E7QUFDQTtBQUNBLE1BQU1HLFdBQVcsR0FBSUMsVUFBVSxJQUFLO0VBRWhDLE1BQU1DLFdBQVcsR0FBRyxNQUFPQyxFQUFFLElBQUs7SUFDOUIsT0FBT0YsVUFBVSxDQUFDQyxXQUFXLENBQUNDLEVBQUUsQ0FBQztFQUNyQyxDQUFDO0VBRUQsTUFBTUMsY0FBYyxHQUFHLE1BQU9DLEtBQUssSUFBSztJQUNwQyxNQUFNQyxJQUFJLEdBQUcsTUFBTUwsVUFBVSxDQUFDRyxjQUFjLENBQUNDLEtBQUssQ0FBQztJQUVuRCxJQUFHQyxJQUFJLEtBQUssSUFBSSxFQUFFO01BQ2QsTUFBTSxJQUFJQyxLQUFLLENBQUMsOEJBQThCLENBQUM7SUFDbkQ7SUFFQSxPQUFPRCxJQUFJO0VBQ2YsQ0FBQztFQUVELE1BQU1FLGFBQWEsR0FBSUMsR0FBRyxJQUFLO0lBQzNCLE9BQU9SLFVBQVUsQ0FBQ08sYUFBYSxDQUFDQyxHQUFHLENBQUM7RUFDeEMsQ0FBQztFQUVELE1BQU1DLFVBQVUsR0FBRyxNQUFPQyxXQUFXLElBQUs7SUFDdEMsTUFBTU4sS0FBSyxHQUFHLElBQUFPLDZCQUFvQixFQUFDLEVBQUUsQ0FBQztJQUN0QyxNQUFNQyxNQUFNLEdBQUcsTUFBTVosVUFBVSxDQUFDUyxVQUFVLENBQUNDLFdBQVcsRUFBRSxDQUFDLEVBQUVOLEtBQUssQ0FBQztJQUVqRSxNQUFNQyxJQUFJLEdBQUcsTUFBTUwsVUFBVSxDQUFDQyxXQUFXLENBQUNXLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVwRCxPQUFPLENBQUNSLEtBQUssRUFBRUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzNCLENBQUM7RUFFRCxPQUFPO0lBQ0hGLGNBQWM7SUFDZEYsV0FBVztJQUNYTSxhQUFhO0lBQ2JFO0VBQ0osQ0FBQztBQUNMLENBQUM7QUFBQyxJQUFBSSxRQUFBLEdBQUFDLE9BQUEsQ0FBQWhCLE9BQUEsR0FFYUMsV0FBVyJ9","map":{"version":3,"names":["_generateRandomString","_interopRequireDefault","require","obj","__esModule","default","userService","repository","getUserByID","id","getUserByToken","token","user","Error","getUsersByIDs","ids","createUser","displayName","generateRandomString","userID","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/services/","sources":["user.js"],"sourcesContent":["import generateRandomString from \"../utils/generateRandomString\";\n\n/**\n * @param {userRepository()} repository\n */\nconst userService = (repository) => {\n\n    const getUserByID = async (id) => {\n        return repository.getUserByID(id);\n    };\n\n    const getUserByToken = async (token) => {\n        const user = await repository.getUserByToken(token);\n\n        if(user === null) {\n            throw new Error('Failed to find user by token');\n        }\n\n        return user;\n    };\n\n    const getUsersByIDs = (ids) => {\n        return repository.getUsersByIDs(ids);\n    };\n\n    const createUser = async (displayName) => {\n        const token = generateRandomString(30);\n        const userID = await repository.createUser(displayName, 0, token);\n\n        const user = await repository.getUserByID(userID[0]);\n\n        return [token, user[0]];\n    };\n\n    return {\n        getUserByToken,\n        getUserByID,\n        getUsersByIDs,\n        createUser\n    };\n};\n\nexport default userService;\n"],"mappings":";;;;;;AAAA,IAAAA,qBAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAiE,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEjE;AACA;AACA;AACA,MAAMG,WAAW,GAAIC,UAAU,IAAK;EAEhC,MAAMC,WAAW,GAAG,MAAOC,EAAE,IAAK;IAC9B,OAAOF,UAAU,CAACC,WAAW,CAACC,EAAE,CAAC;EACrC,CAAC;EAED,MAAMC,cAAc,GAAG,MAAOC,KAAK,IAAK;IACpC,MAAMC,IAAI,GAAG,MAAML,UAAU,CAACG,cAAc,CAACC,KAAK,CAAC;IAEnD,IAAGC,IAAI,KAAK,IAAI,EAAE;MACd,MAAM,IAAIC,KAAK,CAAC,8BAA8B,CAAC;IACnD;IAEA,OAAOD,IAAI;EACf,CAAC;EAED,MAAME,aAAa,GAAIC,GAAG,IAAK;IAC3B,OAAOR,UAAU,CAACO,aAAa,CAACC,GAAG,CAAC;EACxC,CAAC;EAED,MAAMC,UAAU,GAAG,MAAOC,WAAW,IAAK;IACtC,MAAMN,KAAK,GAAG,IAAAO,6BAAoB,EAAC,EAAE,CAAC;IACtC,MAAMC,MAAM,GAAG,MAAMZ,UAAU,CAACS,UAAU,CAACC,WAAW,EAAE,CAAC,EAAEN,KAAK,CAAC;IAEjE,MAAMC,IAAI,GAAG,MAAML,UAAU,CAACC,WAAW,CAACW,MAAM,CAAC,CAAC,CAAC,CAAC;IAEpD,OAAO,CAACR,KAAK,EAAEC,IAAI,CAAC,CAAC,CAAC,CAAC;EAC3B,CAAC;EAED,OAAO;IACHF,cAAc;IACdF,WAAW;IACXM,aAAa;IACbE;EACJ,CAAC;AACL,CAAC;AAAC,IAAAI,QAAA,GAAAC,OAAA,CAAAhB,OAAA,GAEaC,WAAW"}},"mtime":1699070458838},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/utils/generateRandomString.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = (len = 30) => {\n  return [...Array(len)].map(() => Math.random().toString(36)[2]).join('');\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZGVmYXVsdCIsImxlbiIsIkFycmF5IiwibWFwIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwiam9pbiIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy91dGlscy8iLCJzb3VyY2VzIjpbImdlbmVyYXRlUmFuZG9tU3RyaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IChsZW4gPSAzMCkgPT4ge1xuICAgIHJldHVybiBbLi4uQXJyYXkobGVuKV0ubWFwKCgpID0+IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpWzJdKS5qb2luKCcnKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztlQUFlQSxDQUFDQyxHQUFHLEdBQUcsRUFBRSxLQUFLO0VBQ3pCLE9BQU8sQ0FBQyxHQUFHQyxLQUFLLENBQUNELEdBQUcsQ0FBQyxDQUFDLENBQUNFLEdBQUcsQ0FBQyxNQUFNQyxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUNDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQzVFLENBQUM7QUFBQUMsT0FBQSxDQUFBQyxPQUFBLEdBQUFULFFBQUEifQ==","map":{"version":3,"names":["_default","len","Array","map","Math","random","toString","join","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/utils/","sources":["generateRandomString.js"],"sourcesContent":["export default (len = 30) => {\n    return [...Array(len)].map(() => Math.random().toString(36)[2]).join('');\n};\n"],"mappings":";;;;;;eAAeA,CAACC,GAAG,GAAG,EAAE,KAAK;EACzB,OAAO,CAAC,GAAGC,KAAK,CAACD,GAAG,CAAC,CAAC,CAACE,GAAG,CAAC,MAAMC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC;AAC5E,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAT,QAAA"}},"mtime":1699038482338},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/users.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _user = require(\"../dto/user\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/**\n * @param {userVocabularyService} userVocabularyService\n * @param {userPassedCoursesService} userPassedCoursesService\n */\nconst usersHandlers = (userVocabularyService, userPassedCoursesService) => {\n  /**\n   * @param {express.Request} req\n   * @param {express.Response} res\n   */\n  const me = async (req, res) => {\n    return res.status(200).json({\n      data: {\n        me: (0, _user.newMeUser)(req.user),\n        vocabulary: await userVocabularyService.getUserVocabulary(req.user.id),\n        passed_courses: (await userPassedCoursesService.getPassedCoursesByUserID(req.user.id)) || []\n      }\n    });\n  };\n  return {\n    me\n  };\n};\nvar _default = exports.default = usersHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInVzZXJzSGFuZGxlcnMiLCJ1c2VyVm9jYWJ1bGFyeVNlcnZpY2UiLCJ1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UiLCJtZSIsInJlcSIsInJlcyIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwibmV3TWVVc2VyIiwidXNlciIsInZvY2FidWxhcnkiLCJnZXRVc2VyVm9jYWJ1bGFyeSIsImlkIiwicGFzc2VkX2NvdXJzZXMiLCJnZXRQYXNzZWRDb3Vyc2VzQnlVc2VySUQiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3RyYW5zcG9ydHMvIiwic291cmNlcyI6WyJ1c2Vycy5oYW5kbGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJ1xuaW1wb3J0IHtuZXdNZVVzZXJ9IGZyb20gXCIuLi9kdG8vdXNlclwiXG5cbi8qKlxuICogQHBhcmFtIHt1c2VyVm9jYWJ1bGFyeVNlcnZpY2V9IHVzZXJWb2NhYnVsYXJ5U2VydmljZVxuICogQHBhcmFtIHt1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2V9IHVzZXJQYXNzZWRDb3Vyc2VzU2VydmljZVxuICovXG5jb25zdCB1c2Vyc0hhbmRsZXJzID0gKHVzZXJWb2NhYnVsYXJ5U2VydmljZSwgdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlKSA9PiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtleHByZXNzLlJlcXVlc3R9IHJlcVxuICAgICAqIEBwYXJhbSB7ZXhwcmVzcy5SZXNwb25zZX0gcmVzXG4gICAgICovXG4gICAgY29uc3QgbWUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBtZTogbmV3TWVVc2VyKHJlcS51c2VyKSxcbiAgICAgICAgICAgICAgICB2b2NhYnVsYXJ5OiBhd2FpdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UuZ2V0VXNlclZvY2FidWxhcnkocmVxLnVzZXIuaWQpLFxuICAgICAgICAgICAgICAgIHBhc3NlZF9jb3Vyc2VzOiAoYXdhaXQgdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlLmdldFBhc3NlZENvdXJzZXNCeVVzZXJJRChyZXEudXNlci5pZCkpIHx8IFtdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIG1lXG4gICAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJzSGFuZGxlcnM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQUFxQyxTQUFBRCx1QkFBQUcsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1HLGFBQWEsR0FBR0EsQ0FBQ0MscUJBQXFCLEVBQUVDLHdCQUF3QixLQUFLO0VBQ3ZFO0FBQ0o7QUFDQTtBQUNBO0VBQ0ksTUFBTUMsRUFBRSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0lBQzNCLE9BQU9BLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDeEJDLElBQUksRUFBRTtRQUNGTCxFQUFFLEVBQUUsSUFBQU0sZUFBUyxFQUFDTCxHQUFHLENBQUNNLElBQUksQ0FBQztRQUN2QkMsVUFBVSxFQUFFLE1BQU1WLHFCQUFxQixDQUFDVyxpQkFBaUIsQ0FBQ1IsR0FBRyxDQUFDTSxJQUFJLENBQUNHLEVBQUUsQ0FBQztRQUN0RUMsY0FBYyxFQUFFLENBQUMsTUFBTVosd0JBQXdCLENBQUNhLHdCQUF3QixDQUFDWCxHQUFHLENBQUNNLElBQUksQ0FBQ0csRUFBRSxDQUFDLEtBQUs7TUFDOUY7SUFDSixDQUFDLENBQUM7RUFDTixDQUFDO0VBRUQsT0FBTztJQUNIVjtFQUNKLENBQUM7QUFDTCxDQUFDO0FBQUMsSUFBQWEsUUFBQSxHQUFBQyxPQUFBLENBQUFsQixPQUFBLEdBRWFDLGFBQWEifQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_user","obj","__esModule","default","usersHandlers","userVocabularyService","userPassedCoursesService","me","req","res","status","json","data","newMeUser","user","vocabulary","getUserVocabulary","id","passed_courses","getPassedCoursesByUserID","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["users.handlers.js"],"sourcesContent":["import express from 'express'\nimport {newMeUser} from \"../dto/user\"\n\n/**\n * @param {userVocabularyService} userVocabularyService\n * @param {userPassedCoursesService} userPassedCoursesService\n */\nconst usersHandlers = (userVocabularyService, userPassedCoursesService) => {\n    /**\n     * @param {express.Request} req\n     * @param {express.Response} res\n     */\n    const me = async (req, res) => {\n        return res.status(200).json({\n            data: {\n                me: newMeUser(req.user),\n                vocabulary: await userVocabularyService.getUserVocabulary(req.user.id),\n                passed_courses: (await userPassedCoursesService.getPassedCoursesByUserID(req.user.id)) || [],\n            },\n        });\n    };\n\n    return {\n        me\n    };\n};\n\nexport default usersHandlers;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAAqC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAErC;AACA;AACA;AACA;AACA,MAAMG,aAAa,GAAGA,CAACC,qBAAqB,EAAEC,wBAAwB,KAAK;EACvE;AACJ;AACA;AACA;EACI,MAAMC,EAAE,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;IAC3B,OAAOA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBC,IAAI,EAAE;QACFL,EAAE,EAAE,IAAAM,eAAS,EAACL,GAAG,CAACM,IAAI,CAAC;QACvBC,UAAU,EAAE,MAAMV,qBAAqB,CAACW,iBAAiB,CAACR,GAAG,CAACM,IAAI,CAACG,EAAE,CAAC;QACtEC,cAAc,EAAE,CAAC,MAAMZ,wBAAwB,CAACa,wBAAwB,CAACX,GAAG,CAACM,IAAI,CAACG,EAAE,CAAC,KAAK;MAC9F;IACJ,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACHV;EACJ,CAAC;AACL,CAAC;AAAC,IAAAa,QAAA,GAAAC,OAAA,CAAAlB,OAAA,GAEaC,aAAa"}},"mtime":1699070251798},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/services/chat.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _user = require(\"../dto/user\");\nvar _level = require(\"../dto/level\");\nvar _knex = _interopRequireDefault(require(\"knex\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nconst chatService = (chatMessagesRepository, usersService) => {\n  const getMessages = async userID => {\n    const user = await usersService.getUserByID(userID);\n    const level = (0, _level.getLevelByXP)(user.xp);\n    let messages = await chatMessagesRepository.getMessagesByLevel(level);\n    const userIDs = [...new Set(messages.map(m => m.user_id))];\n    const users = await usersService.getUsersByIDs(userIDs);\n    messages = messages.map(m => {\n      return _objectSpread(_objectSpread({}, m), {}, {\n        user: (0, _user.newUser)(users.find(u => u.id === m.user_id) || {})\n      });\n    });\n    return messages;\n  };\n  const sendMessage = async (userID, message) => {\n    const user = await usersService.getUserByID(userID);\n    const level = (0, _level.getLevelByXP)(user.xp);\n    await chatMessagesRepository.sendMessage(userID, message, level);\n    return true;\n  };\n  return {\n    getMessages,\n    sendMessage\n  };\n};\nvar _default = exports.default = chatService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXNlciIsInJlcXVpcmUiLCJfbGV2ZWwiLCJfa25leCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm93bktleXMiLCJlIiwiciIsInQiLCJPYmplY3QiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhcmciLCJfdG9QcmltaXRpdmUiLCJTdHJpbmciLCJpbnB1dCIsImhpbnQiLCJwcmltIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJ1bmRlZmluZWQiLCJyZXMiLCJjYWxsIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiY2hhdFNlcnZpY2UiLCJjaGF0TWVzc2FnZXNSZXBvc2l0b3J5IiwidXNlcnNTZXJ2aWNlIiwiZ2V0TWVzc2FnZXMiLCJ1c2VySUQiLCJ1c2VyIiwiZ2V0VXNlckJ5SUQiLCJsZXZlbCIsImdldExldmVsQnlYUCIsInhwIiwibWVzc2FnZXMiLCJnZXRNZXNzYWdlc0J5TGV2ZWwiLCJ1c2VySURzIiwiU2V0IiwibWFwIiwibSIsInVzZXJfaWQiLCJ1c2VycyIsImdldFVzZXJzQnlJRHMiLCJuZXdVc2VyIiwiZmluZCIsInUiLCJpZCIsInNlbmRNZXNzYWdlIiwibWVzc2FnZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJjaGF0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7bmV3VXNlcn0gZnJvbSBcIi4uL2R0by91c2VyXCI7XG5pbXBvcnQge2dldExldmVsQnlYUH0gZnJvbSBcIi4uL2R0by9sZXZlbFwiO1xuaW1wb3J0IGtuZXggZnJvbSBcImtuZXhcIjtcblxuY29uc3QgY2hhdFNlcnZpY2UgPSAoY2hhdE1lc3NhZ2VzUmVwb3NpdG9yeSwgdXNlcnNTZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgZ2V0TWVzc2FnZXMgPSBhc3luYyAodXNlcklEKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vyc1NlcnZpY2UuZ2V0VXNlckJ5SUQodXNlcklEKTtcbiAgICAgICAgY29uc3QgbGV2ZWwgPSBnZXRMZXZlbEJ5WFAodXNlci54cCk7XG5cbiAgICAgICAgbGV0IG1lc3NhZ2VzID0gYXdhaXQgY2hhdE1lc3NhZ2VzUmVwb3NpdG9yeS5nZXRNZXNzYWdlc0J5TGV2ZWwobGV2ZWwpO1xuICAgICAgICBjb25zdCB1c2VySURzID0gWy4uLm5ldyBTZXQobWVzc2FnZXMubWFwKChtKSA9PiBtLnVzZXJfaWQpKV07XG5cbiAgICAgICAgY29uc3QgdXNlcnMgPSBhd2FpdCB1c2Vyc1NlcnZpY2UuZ2V0VXNlcnNCeUlEcyh1c2VySURzKTtcblxuICAgICAgICBtZXNzYWdlcyA9IG1lc3NhZ2VzLm1hcCgobSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5tLFxuICAgICAgICAgICAgICAgIHVzZXI6IG5ld1VzZXIodXNlcnMuZmluZCgodSkgPT4gdS5pZCA9PT0gbS51c2VyX2lkKSB8fCB7fSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICB9O1xuXG4gICAgY29uc3Qgc2VuZE1lc3NhZ2UgPSBhc3luYyAodXNlcklELCBtZXNzYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2Vyc1NlcnZpY2UuZ2V0VXNlckJ5SUQodXNlcklEKTtcbiAgICAgICAgY29uc3QgbGV2ZWwgPSBnZXRMZXZlbEJ5WFAodXNlci54cCk7XG5cbiAgICAgICAgYXdhaXQgY2hhdE1lc3NhZ2VzUmVwb3NpdG9yeS5zZW5kTWVzc2FnZSh1c2VySUQsIG1lc3NhZ2UsIGxldmVsKTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0TWVzc2FnZXMsXG4gICAgICAgIHNlbmRNZXNzYWdlXG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2hhdFNlcnZpY2U7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQUF3QixTQUFBRyx1QkFBQUMsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLFNBQUFHLFFBQUFDLENBQUEsRUFBQUMsQ0FBQSxRQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsSUFBQSxDQUFBSixDQUFBLE9BQUFHLE1BQUEsQ0FBQUUscUJBQUEsUUFBQUMsQ0FBQSxHQUFBSCxNQUFBLENBQUFFLHFCQUFBLENBQUFMLENBQUEsR0FBQUMsQ0FBQSxLQUFBSyxDQUFBLEdBQUFBLENBQUEsQ0FBQUMsTUFBQSxXQUFBTixDQUFBLFdBQUFFLE1BQUEsQ0FBQUssd0JBQUEsQ0FBQVIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFRLFVBQUEsT0FBQVAsQ0FBQSxDQUFBUSxJQUFBLENBQUFDLEtBQUEsQ0FBQVQsQ0FBQSxFQUFBSSxDQUFBLFlBQUFKLENBQUE7QUFBQSxTQUFBVSxjQUFBWixDQUFBLGFBQUFDLENBQUEsTUFBQUEsQ0FBQSxHQUFBWSxTQUFBLENBQUFDLE1BQUEsRUFBQWIs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","map":{"version":3,"names":["_user","require","_level","_knex","_interopRequireDefault","obj","__esModule","default","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","key","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","chatService","chatMessagesRepository","usersService","getMessages","userID","user","getUserByID","level","getLevelByXP","xp","messages","getMessagesByLevel","userIDs","Set","map","m","user_id","users","getUsersByIDs","newUser","find","u","id","sendMessage","message","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/services/","sources":["chat.js"],"sourcesContent":["import {newUser} from \"../dto/user\";\nimport {getLevelByXP} from \"../dto/level\";\nimport knex from \"knex\";\n\nconst chatService = (chatMessagesRepository, usersService) => {\n    const getMessages = async (userID) => {\n        const user = await usersService.getUserByID(userID);\n        const level = getLevelByXP(user.xp);\n\n        let messages = await chatMessagesRepository.getMessagesByLevel(level);\n        const userIDs = [...new Set(messages.map((m) => m.user_id))];\n\n        const users = await usersService.getUsersByIDs(userIDs);\n\n        messages = messages.map((m) => {\n            return {\n                ...m,\n                user: newUser(users.find((u) => u.id === m.user_id) || {})\n            };\n        });\n\n        return messages;\n    };\n\n    const sendMessage = async (userID, message) => {\n        const user = await usersService.getUserByID(userID);\n        const level = getLevelByXP(user.xp);\n\n        await chatMessagesRepository.sendMessage(userID, message, level);\n\n        return true;\n    };\n\n    return {\n        getMessages,\n        sendMessage\n    };\n}\n\nexport default chatService;\n"],"mappings":"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"}},"mtime":1699060038957},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/database/chatMessages.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _knex = require(\"knex\");\n/**\n * TABLE: chat_messages\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * message TEXT\n * level INT\n * created_at DATE\n */\n/**\n * @param {Knex} knex\n */\nconst getMessagesByLevel = knex => level => {\n  return knex.select('id', 'user_id', 'message', 'level', 'created_at').from('chat_messages').where('level', level).orderBy('created_at', 'desc');\n};\nconst sendMessage = knex => (userID, message, level) => {\n  return knex('chat_messages').insert({\n    user_id: userID,\n    message,\n    created_at: knex.raw('NOW()'),\n    level\n  }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst chatMessagesRepository = knex => {\n  return {\n    getMessagesByLevel: getMessagesByLevel(knex),\n    sendMessage: sendMessage(knex)\n  };\n};\nvar _default = exports.default = chatMessagesRepository;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfa25leCIsInJlcXVpcmUiLCJnZXRNZXNzYWdlc0J5TGV2ZWwiLCJrbmV4IiwibGV2ZWwiLCJzZWxlY3QiLCJmcm9tIiwid2hlcmUiLCJvcmRlckJ5Iiwic2VuZE1lc3NhZ2UiLCJ1c2VySUQiLCJtZXNzYWdlIiwiaW5zZXJ0IiwidXNlcl9pZCIsImNyZWF0ZWRfYXQiLCJyYXciLCJyZXR1cm5pbmciLCJjaGF0TWVzc2FnZXNSZXBvc2l0b3J5IiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJjaGF0TWVzc2FnZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBLbmV4IH0gZnJvbSBcImtuZXhcIlxuXG4vKipcbiAqIFRBQkxFOiBjaGF0X21lc3NhZ2VzXG4gKiBTVFJVQ1RVUkU6XG4gKiBpZCBJTlQgQUlcbiAqIHVzZXJfaWQgSU5UXG4gKiBtZXNzYWdlIFRFWFRcbiAqIGxldmVsIElOVFxuICogY3JlYXRlZF9hdCBEQVRFXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqL1xuY29uc3QgZ2V0TWVzc2FnZXNCeUxldmVsID0gKGtuZXgpID0+IChsZXZlbCkgPT4ge1xuICAgIHJldHVybiBrbmV4LnNlbGVjdCgnaWQnLCAndXNlcl9pZCcsICdtZXNzYWdlJywgJ2xldmVsJywgJ2NyZWF0ZWRfYXQnKVxuICAgICAgICAuZnJvbSgnY2hhdF9tZXNzYWdlcycpXG4gICAgICAgIC53aGVyZSgnbGV2ZWwnLCBsZXZlbClcbiAgICAgICAgLm9yZGVyQnkoJ2NyZWF0ZWRfYXQnLCAnZGVzYycpXG59O1xuXG5cbmNvbnN0IHNlbmRNZXNzYWdlID0gKGtuZXgpID0+ICh1c2VySUQsIG1lc3NhZ2UsIGxldmVsKSA9PiB7XG4gICAgcmV0dXJuIGtuZXgoJ2NoYXRfbWVzc2FnZXMnKS5pbnNlcnQoe1xuICAgICAgICB1c2VyX2lkOiB1c2VySUQsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IGtuZXgucmF3KCdOT1coKScpLFxuICAgICAgICBsZXZlbCxcbiAgICB9KS5yZXR1cm5pbmcoJ2lkJyk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7S25leH0ga25leFxuICogQHJldHVybnMge3tnZXRVc2VyQnlUb2tlbjogKGZ1bmN0aW9uKCopOiBmdW5jdGlvbigqKTogKil9fVxuICovXG5jb25zdCBjaGF0TWVzc2FnZXNSZXBvc2l0b3J5ID0gKGtuZXgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRNZXNzYWdlc0J5TGV2ZWw6IGdldE1lc3NhZ2VzQnlMZXZlbChrbmV4KSxcbiAgICAgICAgc2VuZE1lc3NhZ2U6IHNlbmRNZXNzYWdlKGtuZXgpLFxuICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjaGF0TWVzc2FnZXNSZXBvc2l0b3J5O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQUFBQSxLQUFBLEdBQUFDLE9BQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxrQkFBa0IsR0FBSUMsSUFBSSxJQUFNQyxLQUFLLElBQUs7RUFDNUMsT0FBT0QsSUFBSSxDQUFDRSxNQUFNLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUNoRUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUNyQkMsS0FBSyxDQUFDLE9BQU8sRUFBRUgsS0FBSyxDQUFDLENBQ3JCSSxPQUFPLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQztBQUN0QyxDQUFDO0FBR0QsTUFBTUMsV0FBVyxHQUFJTixJQUFJLElBQUssQ0FBQ08sTUFBTSxFQUFFQyxPQUFPLEVBQUVQLEtBQUssS0FBSztFQUN0RCxPQUFPRCxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUNTLE1BQU0sQ0FBQztJQUNoQ0MsT0FBTyxFQUFFSCxNQUFNO0lBQ2ZDLE9BQU87SUFDUEcsVUFBVSxFQUFFWCxJQUFJLENBQUNZLEdBQUcsQ0FBQyxPQUFPLENBQUM7SUFDN0JYO0VBQ0osQ0FBQyxDQUFDLENBQUNZLFNBQVMsQ0FBQyxJQUFJLENBQUM7QUFDdEIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLHNCQUFzQixHQUFJZCxJQUFJLElBQUs7RUFDckMsT0FBTztJQUNIRCxrQkFBa0IsRUFBRUEsa0JBQWtCLENBQUNDLElBQUksQ0FBQztJQUM1Q00sV0FBVyxFQUFFQSxXQUFXLENBQUNOLElBQUk7RUFDakMsQ0FBQztBQUNMLENBQUM7QUFBQyxJQUFBZSxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVhSCxzQkFBc0IifQ==","map":{"version":3,"names":["_knex","require","getMessagesByLevel","knex","level","select","from","where","orderBy","sendMessage","userID","message","insert","user_id","created_at","raw","returning","chatMessagesRepository","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/database/","sources":["chatMessages.js"],"sourcesContent":["\nimport { Knex } from \"knex\"\n\n/**\n * TABLE: chat_messages\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * message TEXT\n * level INT\n * created_at DATE\n */\n\n/**\n * @param {Knex} knex\n */\nconst getMessagesByLevel = (knex) => (level) => {\n    return knex.select('id', 'user_id', 'message', 'level', 'created_at')\n        .from('chat_messages')\n        .where('level', level)\n        .orderBy('created_at', 'desc')\n};\n\n\nconst sendMessage = (knex) => (userID, message, level) => {\n    return knex('chat_messages').insert({\n        user_id: userID,\n        message,\n        created_at: knex.raw('NOW()'),\n        level,\n    }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst chatMessagesRepository = (knex) => {\n    return {\n        getMessagesByLevel: getMessagesByLevel(knex),\n        sendMessage: sendMessage(knex),\n    };\n};\n\nexport default chatMessagesRepository;\n"],"mappings":";;;;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA,MAAMC,kBAAkB,GAAIC,IAAI,IAAMC,KAAK,IAAK;EAC5C,OAAOD,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,YAAY,CAAC,CAChEC,IAAI,CAAC,eAAe,CAAC,CACrBC,KAAK,CAAC,OAAO,EAAEH,KAAK,CAAC,CACrBI,OAAO,CAAC,YAAY,EAAE,MAAM,CAAC;AACtC,CAAC;AAGD,MAAMC,WAAW,GAAIN,IAAI,IAAK,CAACO,MAAM,EAAEC,OAAO,EAAEP,KAAK,KAAK;EACtD,OAAOD,IAAI,CAAC,eAAe,CAAC,CAACS,MAAM,CAAC;IAChCC,OAAO,EAAEH,MAAM;IACfC,OAAO;IACPG,UAAU,EAAEX,IAAI,CAACY,GAAG,CAAC,OAAO,CAAC;IAC7BX;EACJ,CAAC,CAAC,CAACY,SAAS,CAAC,IAAI,CAAC;AACtB,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMC,sBAAsB,GAAId,IAAI,IAAK;EACrC,OAAO;IACHD,kBAAkB,EAAEA,kBAAkB,CAACC,IAAI,CAAC;IAC5CM,WAAW,EAAEA,WAAW,CAACN,IAAI;EACjC,CAAC;AACL,CAAC;AAAC,IAAAe,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaH,sBAAsB"}},"mtime":1699070855629},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/chat.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst chatHandlers = chatService => {\n  /**\n   * @type {express.Request} req\n   * @type {express.Response} response}\n   */\n  const getMessages = async (req, res) => {\n    const user = req.user;\n    const messages = await chatService.getMessages(user.id);\n    return res.status(200).json({\n      data: messages\n    });\n  };\n\n  /**\n   * @type {express.Request} req\n   * @type {express.Response} response}\n   */\n  const sendMessage = async (req, res) => {\n    const {\n      message\n    } = req.body;\n    const user = req.user;\n    await chatService.sendMessage(req.user.id, message);\n    return res.status(200).json(true);\n  };\n  return {\n    getMessages,\n    sendMessage\n  };\n};\nvar _default = exports.default = chatHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjaGF0SGFuZGxlcnMiLCJjaGF0U2VydmljZSIsImdldE1lc3NhZ2VzIiwicmVxIiwicmVzIiwidXNlciIsIm1lc3NhZ2VzIiwiaWQiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSIsInNlbmRNZXNzYWdlIiwibWVzc2FnZSIsImJvZHkiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3RyYW5zcG9ydHMvIiwic291cmNlcyI6WyJjaGF0LmhhbmRsZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG5cbmNvbnN0IGNoYXRIYW5kbGVycyA9IChjaGF0U2VydmljZSkgPT4ge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtleHByZXNzLlJlcXVlc3R9IHJlcVxuICAgICAqIEB0eXBlIHtleHByZXNzLlJlc3BvbnNlfSByZXNwb25zZX1cbiAgICAgKi9cbiAgICBjb25zdCBnZXRNZXNzYWdlcyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgY2hhdFNlcnZpY2UuZ2V0TWVzc2FnZXModXNlci5pZCk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICAgIGRhdGE6IG1lc3NhZ2VzXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7ZXhwcmVzcy5SZXF1ZXN0fSByZXFcbiAgICAgKiBAdHlwZSB7ZXhwcmVzcy5SZXNwb25zZX0gcmVzcG9uc2V9XG4gICAgICovXG4gICAgY29uc3Qgc2VuZE1lc3NhZ2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgbWVzc2FnZVxuICAgICAgICB9ID0gcmVxLmJvZHk7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgICBhd2FpdCBjaGF0U2VydmljZS5zZW5kTWVzc2FnZShyZXEudXNlci5pZCwgbWVzc2FnZSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHRydWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRNZXNzYWdlcyxcbiAgICAgICAgc2VuZE1lc3NhZ2VcbiAgICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2hhdEhhbmRsZXJzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBNkIsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFN0IsTUFBTUcsWUFBWSxHQUFJQyxXQUFXLElBQUs7RUFDbEM7QUFDSjtBQUNBO0FBQ0E7RUFDSSxNQUFNQyxXQUFXLEdBQUcsTUFBQUEsQ0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7SUFDcEMsTUFBTUMsSUFBSSxHQUFHRixHQUFHLENBQUNFLElBQUk7SUFDckIsTUFBTUMsUUFBUSxHQUFHLE1BQU1MLFdBQVcsQ0FBQ0MsV0FBVyxDQUFDRyxJQUFJLENBQUNFLEVBQUUsQ0FBQztJQUV2RCxPQUFPSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ3hCQyxJQUFJLEVBQUVKO0lBQ1YsQ0FBQyxDQUFDO0VBQ04sQ0FBQzs7RUFFRDtBQUNKO0FBQ0E7QUFDQTtFQUNJLE1BQU1LLFdBQVcsR0FBRyxNQUFBQSxDQUFPUixHQUFHLEVBQUVDLEdBQUcsS0FBSztJQUNwQyxNQUFNO01BQ0ZRO0lBQ0osQ0FBQyxHQUFHVCxHQUFHLENBQUNVLElBQUk7SUFFWixNQUFNUixJQUFJLEdBQUdGLEdBQUcsQ0FBQ0UsSUFBSTtJQUNyQixNQUFNSixXQUFXLENBQUNVLFdBQVcsQ0FBQ1IsR0FBRyxDQUFDRSxJQUFJLENBQUNFLEVBQUUsRUFBRUssT0FBTyxDQUFDO0lBRW5ELE9BQU9SLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDO0VBQ3JDLENBQUM7RUFFRCxPQUFPO0lBQ0hQLFdBQVc7SUFDWFM7RUFDSixDQUFDO0FBQ0wsQ0FBQztBQUFDLElBQUFHLFFBQUEsR0FBQUMsT0FBQSxDQUFBaEIsT0FBQSxHQUVhQyxZQUFZIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","obj","__esModule","default","chatHandlers","chatService","getMessages","req","res","user","messages","id","status","json","data","sendMessage","message","body","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["chat.handlers.js"],"sourcesContent":["import express from 'express'\n\nconst chatHandlers = (chatService) => {\n    /**\n     * @type {express.Request} req\n     * @type {express.Response} response}\n     */\n    const getMessages = async (req, res) => {\n        const user = req.user;\n        const messages = await chatService.getMessages(user.id);\n\n        return res.status(200).json({\n            data: messages\n        });\n    };\n\n    /**\n     * @type {express.Request} req\n     * @type {express.Response} response}\n     */\n    const sendMessage = async (req, res) => {\n        const {\n            message\n        } = req.body;\n\n        const user = req.user;\n        await chatService.sendMessage(req.user.id, message);\n\n        return res.status(200).json(true);\n    };\n\n    return {\n        getMessages,\n        sendMessage\n    };\n};\n\nexport default chatHandlers;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA6B,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE7B,MAAMG,YAAY,GAAIC,WAAW,IAAK;EAClC;AACJ;AACA;AACA;EACI,MAAMC,WAAW,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;IACpC,MAAMC,IAAI,GAAGF,GAAG,CAACE,IAAI;IACrB,MAAMC,QAAQ,GAAG,MAAML,WAAW,CAACC,WAAW,CAACG,IAAI,CAACE,EAAE,CAAC;IAEvD,OAAOH,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBC,IAAI,EAAEJ;IACV,CAAC,CAAC;EACN,CAAC;;EAED;AACJ;AACA;AACA;EACI,MAAMK,WAAW,GAAG,MAAAA,CAAOR,GAAG,EAAEC,GAAG,KAAK;IACpC,MAAM;MACFQ;IACJ,CAAC,GAAGT,GAAG,CAACU,IAAI;IAEZ,MAAMR,IAAI,GAAGF,GAAG,CAACE,IAAI;IACrB,MAAMJ,WAAW,CAACU,WAAW,CAACR,GAAG,CAACE,IAAI,CAACE,EAAE,EAAEK,OAAO,CAAC;IAEnD,OAAOR,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;EACrC,CAAC;EAED,OAAO;IACHP,WAAW;IACXS;EACJ,CAAC;AACL,CAAC;AAAC,IAAAG,QAAA,GAAAC,OAAA,CAAAhB,OAAA,GAEaC,YAAY"}},"mtime":1699044214841},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/services/userVocabulary.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n/**\n * @param {userVocalburyRepository()} repository\n */\nconst userVocabularyService = repository => {\n  const getUserVocabulary = async userID => {\n    return repository.getUserVocabulary(userID);\n  };\n  const insertUserVocabularyWords = (userID, wordsPair) => {\n    return repository.insertUserVocabularyWords(userID, wordsPair);\n  };\n  return {\n    getUserVocabulary,\n    insertUserVocabularyWords\n  };\n};\nvar _default = exports.default = userVocabularyService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyVm9jYWJ1bGFyeVNlcnZpY2UiLCJyZXBvc2l0b3J5IiwiZ2V0VXNlclZvY2FidWxhcnkiLCJ1c2VySUQiLCJpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzIiwid29yZHNQYWlyIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvc2VydmljZXMvIiwic291cmNlcyI6WyJ1c2VyVm9jYWJ1bGFyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYXJhbSB7dXNlclZvY2FsYnVyeVJlcG9zaXRvcnkoKX0gcmVwb3NpdG9yeVxuICovXG5jb25zdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UgPSAocmVwb3NpdG9yeSkgPT4ge1xuICAgIGNvbnN0IGdldFVzZXJWb2NhYnVsYXJ5ID0gYXN5bmMgKHVzZXJJRCkgPT4ge1xuICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5nZXRVc2VyVm9jYWJ1bGFyeSh1c2VySUQpO1xuICAgIH07XG5cbiAgICBjb25zdCBpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzID0gKHVzZXJJRCwgd29yZHNQYWlyKSA9PiB7XG4gICAgICAgIHJldHVybiByZXBvc2l0b3J5Lmluc2VydFVzZXJWb2NhYnVsYXJ5V29yZHModXNlcklELCB3b3Jkc1BhaXIpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRVc2VyVm9jYWJ1bGFyeSxcbiAgICAgICAgaW5zZXJ0VXNlclZvY2FidWxhcnlXb3Jkc1xuICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2U7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLHFCQUFxQixHQUFJQyxVQUFVLElBQUs7RUFDMUMsTUFBTUMsaUJBQWlCLEdBQUcsTUFBT0MsTUFBTSxJQUFLO0lBQ3hDLE9BQU9GLFVBQVUsQ0FBQ0MsaUJBQWlCLENBQUNDLE1BQU0sQ0FBQztFQUMvQyxDQUFDO0VBRUQsTUFBTUMseUJBQXlCLEdBQUdBLENBQUNELE1BQU0sRUFBRUUsU0FBUyxLQUFLO0lBQ3JELE9BQU9KLFVBQVUsQ0FBQ0cseUJBQXlCLENBQUNELE1BQU0sRUFBRUUsU0FBUyxDQUFDO0VBQ2xFLENBQUM7RUFFRCxPQUFPO0lBQ0hILGlCQUFpQjtJQUNqQkU7RUFDSixDQUFDO0FBQ0wsQ0FBQztBQUFDLElBQUFFLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWFSLHFCQUFxQiJ9","map":{"version":3,"names":["userVocabularyService","repository","getUserVocabulary","userID","insertUserVocabularyWords","wordsPair","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/services/","sources":["userVocabulary.js"],"sourcesContent":["/**\n * @param {userVocalburyRepository()} repository\n */\nconst userVocabularyService = (repository) => {\n    const getUserVocabulary = async (userID) => {\n        return repository.getUserVocabulary(userID);\n    };\n\n    const insertUserVocabularyWords = (userID, wordsPair) => {\n        return repository.insertUserVocabularyWords(userID, wordsPair);\n    };\n\n    return {\n        getUserVocabulary,\n        insertUserVocabularyWords\n    };\n};\n\nexport default userVocabularyService;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA,MAAMA,qBAAqB,GAAIC,UAAU,IAAK;EAC1C,MAAMC,iBAAiB,GAAG,MAAOC,MAAM,IAAK;IACxC,OAAOF,UAAU,CAACC,iBAAiB,CAACC,MAAM,CAAC;EAC/C,CAAC;EAED,MAAMC,yBAAyB,GAAGA,CAACD,MAAM,EAAEE,SAAS,KAAK;IACrD,OAAOJ,UAAU,CAACG,yBAAyB,CAACD,MAAM,EAAEE,SAAS,CAAC;EAClE,CAAC;EAED,OAAO;IACHH,iBAAiB;IACjBE;EACJ,CAAC;AACL,CAAC;AAAC,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaR,qBAAqB"}},"mtime":1699054878321},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/database/vocabulary.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _knex = _interopRequireWildcard(require(\"knex\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n/**\n * TABLE: user_vocabulary\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * left_word VARCHAR\n * right_word VARCHAR\n * created_at DATE\n */\n/**\n * @param {Knex} knex\n */\nconst getUserVocabulary = knex => userID => {\n  return knex.select(['id', 'left_word', 'right_word', 'created_at']).from('user_vocabulary').where('user_id', userID).orderBy('created_at', 'desc');\n};\n\n/**\n * @param {Knex} knex\n */\nconst insertUserVocabularyWords = knex => (userID, wordsPair) => {\n  return knex('user_vocabulary').insert(wordsPair.map(p => ({\n    user_id: userID,\n    left_word: p[0],\n    right_word: p[1],\n    created_at: knex.raw('NOW()')\n  })));\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userVocabularyRepository = knex => {\n  return {\n    getUserVocabulary: getUserVocabulary(knex),\n    insertUserVocabularyWords: insertUserVocabularyWords(knex)\n  };\n};\nvar _default = exports.default = userVocabularyRepository;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfa25leCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsImdldFVzZXJWb2NhYnVsYXJ5Iiwia25leCIsInVzZXJJRCIsInNlbGVjdCIsImZyb20iLCJ3aGVyZSIsIm9yZGVyQnkiLCJpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzIiwid29yZHNQYWlyIiwiaW5zZXJ0IiwibWFwIiwicCIsInVzZXJfaWQiLCJsZWZ0X3dvcmQiLCJyaWdodF93b3JkIiwiY3JlYXRlZF9hdCIsInJhdyIsInVzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvZGF0YWJhc2UvIiwic291cmNlcyI6WyJ2b2NhYnVsYXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBrbmV4LCB7IEtuZXggfSBmcm9tIFwia25leFwiXG5cbi8qKlxuICogVEFCTEU6IHVzZXJfdm9jYWJ1bGFyeVxuICogU1RSVUNUVVJFOlxuICogaWQgSU5UIEFJXG4gKiB1c2VyX2lkIElOVFxuICogbGVmdF93b3JkIFZBUkNIQVJcbiAqIHJpZ2h0X3dvcmQgVkFSQ0hBUlxuICogY3JlYXRlZF9hdCBEQVRFXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqL1xuY29uc3QgZ2V0VXNlclZvY2FidWxhcnkgPSAoa25leCkgPT4gKHVzZXJJRCkgPT4ge1xuICAgIHJldHVybiBrbmV4LnNlbGVjdChbJ2lkJywgJ2xlZnRfd29yZCcsICdyaWdodF93b3JkJywgJ2NyZWF0ZWRfYXQnXSlcbiAgICAgICAgLmZyb20oJ3VzZXJfdm9jYWJ1bGFyeScpXG4gICAgICAgIC53aGVyZSgndXNlcl9pZCcsIHVzZXJJRClcbiAgICAgICAgLm9yZGVyQnkoJ2NyZWF0ZWRfYXQnLCAnZGVzYycpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqL1xuY29uc3QgaW5zZXJ0VXNlclZvY2FidWxhcnlXb3JkcyA9IChrbmV4KSA9PiAodXNlcklELCB3b3Jkc1BhaXIpID0+IHtcbiAgIHJldHVybiBrbmV4KCd1c2VyX3ZvY2FidWxhcnknKS5pbnNlcnQod29yZHNQYWlyLm1hcCgocCkgPT4gKHtcbiAgICAgICB1c2VyX2lkOiB1c2VySUQsXG4gICAgICAgbGVmdF93b3JkOiBwWzBdLFxuICAgICAgIHJpZ2h0X3dvcmQ6IHBbMV0sXG4gICAgICAgY3JlYXRlZF9hdDoga25leC5yYXcoJ05PVygpJylcbiAgIH0pKSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtLbmV4fSBrbmV4XG4gKiBAcmV0dXJucyB7e2dldFVzZXJCeVRva2VuOiAoZnVuY3Rpb24oKik6IGZ1bmN0aW9uKCopOiAqKX19XG4gKi9cbmNvbnN0IHVzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeSA9IChrbmV4KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0VXNlclZvY2FidWxhcnk6IGdldFVzZXJWb2NhYnVsYXJ5KGtuZXgpLFxuICAgICAgICBpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzOiBpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzKGtuZXgpXG4gICAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJWb2NhYnVsYXJ5UmVwb3NpdG9yeTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsS0FBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQWlDLFNBQUFDLHlCQUFBQyxDQUFBLDZCQUFBQyxP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","map":{"version":3,"names":["_knex","_interopRequireWildcard","require","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","getUserVocabulary","knex","userID","select","from","where","orderBy","insertUserVocabularyWords","wordsPair","insert","map","p","user_id","left_word","right_word","created_at","raw","userVocabularyRepository","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/database/","sources":["vocabulary.js"],"sourcesContent":["import knex, { Knex } from \"knex\"\n\n/**\n * TABLE: user_vocabulary\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * left_word VARCHAR\n * right_word VARCHAR\n * created_at DATE\n */\n\n/**\n * @param {Knex} knex\n */\nconst getUserVocabulary = (knex) => (userID) => {\n    return knex.select(['id', 'left_word', 'right_word', 'created_at'])\n        .from('user_vocabulary')\n        .where('user_id', userID)\n        .orderBy('created_at', 'desc');\n};\n\n/**\n * @param {Knex} knex\n */\nconst insertUserVocabularyWords = (knex) => (userID, wordsPair) => {\n   return knex('user_vocabulary').insert(wordsPair.map((p) => ({\n       user_id: userID,\n       left_word: p[0],\n       right_word: p[1],\n       created_at: knex.raw('NOW()')\n   })));\n}\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userVocabularyRepository = (knex) => {\n    return {\n        getUserVocabulary: getUserVocabulary(knex),\n        insertUserVocabularyWords: insertUserVocabularyWords(knex)\n    };\n};\n\nexport default userVocabularyRepository;\n"],"mappings":";;;;;;AAAA,IAAAA,KAAA,GAAAC,uBAAA,CAAAC,OAAA;AAAiC,SAAAC,yBAAAC,CAAA,6BAAAC,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,CAAAC,CAAA,WAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA,KAAAF,CAAA;AAAA,SAAAH,wBAAAG,CAAA,EAAAE,CAAA,SAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA,eAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,WAAAK,OAAA,EAAAL,CAAA,QAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA,OAAAQ,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,IAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAjB,CAAA,EAAAc,CAAA,SAAAI,CAAA,GAAAR,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,UAAAI,CAAA,KAAAA,CAAA,CAAAX,GAAA,IAAAW,CAAA,CAAAC,GAAA,IAAAR,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAI,CAAA,IAAAV,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA,YAAAN,CAAA,CAAAH,OAAA,GAAAL,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAgB,GAAA,CAAAnB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA,MAAMY,iBAAiB,GAAIC,IAAI,IAAMC,MAAM,IAAK;EAC5C,OAAOD,IAAI,CAACE,MAAM,CAAC,CAAC,IAAI,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC,CAC9DC,IAAI,CAAC,iBAAiB,CAAC,CACvBC,KAAK,CAAC,SAAS,EAAEH,MAAM,CAAC,CACxBI,OAAO,CAAC,YAAY,EAAE,MAAM,CAAC;AACtC,CAAC;;AAED;AACA;AACA;AACA,MAAMC,yBAAyB,GAAIN,IAAI,IAAK,CAACC,MAAM,EAAEM,SAAS,KAAK;EAChE,OAAOP,IAAI,CAAC,iBAAiB,CAAC,CAACQ,MAAM,CAACD,SAAS,CAACE,GAAG,CAAEC,CAAC,KAAM;IACxDC,OAAO,EAAEV,MAAM;IACfW,SAAS,EAAEF,CAAC,CAAC,CAAC,CAAC;IACfG,UAAU,EAAEH,CAAC,CAAC,CAAC,CAAC;IAChBI,UAAU,EAAEd,IAAI,CAACe,GAAG,CAAC,OAAO;EAChC,CAAC,CAAC,CAAC,CAAC;AACP,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMC,wBAAwB,GAAIhB,IAAI,IAAK;EACvC,OAAO;IACHD,iBAAiB,EAAEA,iBAAiB,CAACC,IAAI,CAAC;IAC1CM,yBAAyB,EAAEA,yBAAyB,CAACN,IAAI;EAC7D,CAAC;AACL,CAAC;AAAC,IAAAiB,QAAA,GAAAC,OAAA,CAAAlC,OAAA,GAEagC,wBAAwB"}},"mtime":1699059933403},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/database/mysql.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst init = () => {\n  const {\n    DB_HOST,\n    DB_PORT = 3306,\n    DB_USERNAME,\n    DB_PASSWORD,\n    DB_NAME\n  } = process.env;\n  return require('knex')({\n    client: 'mysql2',\n    connection: {\n      host: DB_HOST,\n      port: DB_PORT,\n      user: DB_USERNAME,\n      password: DB_PASSWORD,\n      database: DB_NAME\n    }\n  });\n  ;\n};\nconst mysql = {\n  init\n};\nvar _default = exports.default = mysql;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbml0IiwiREJfSE9TVCIsIkRCX1BPUlQiLCJEQl9VU0VSTkFNRSIsIkRCX1BBU1NXT1JEIiwiREJfTkFNRSIsInByb2Nlc3MiLCJlbnYiLCJyZXF1aXJlIiwiY2xpZW50IiwiY29ubmVjdGlvbiIsImhvc3QiLCJwb3J0IiwidXNlciIsInBhc3N3b3JkIiwiZGF0YWJhc2UiLCJteXNxbCIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL2RhdGFiYXNlLyIsInNvdXJjZXMiOlsibXlzcWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAgIERCX0hPU1QsXG4gICAgICAgIERCX1BPUlQgPSAzMzA2LFxuICAgICAgICBEQl9VU0VSTkFNRSxcbiAgICAgICAgREJfUEFTU1dPUkQsXG4gICAgICAgIERCX05BTUVcbiAgICB9ID0gcHJvY2Vzcy5lbnY7XG5cbiAgICByZXR1cm4gcmVxdWlyZSgna25leCcpKHtcbiAgICAgICAgY2xpZW50OiAnbXlzcWwyJyxcbiAgICAgICAgY29ubmVjdGlvbjoge1xuICAgICAgICAgICAgaG9zdCA6IERCX0hPU1QsXG4gICAgICAgICAgICBwb3J0IDogREJfUE9SVCxcbiAgICAgICAgICAgIHVzZXIgOiBEQl9VU0VSTkFNRSxcbiAgICAgICAgICAgIHBhc3N3b3JkIDogREJfUEFTU1dPUkQsXG4gICAgICAgICAgICBkYXRhYmFzZSA6IERCX05BTUVcbiAgICAgICAgfVxuICAgIH0pOztcbn07XG5cblxuY29uc3QgbXlzcWwgPSB7XG4gICAgaW5pdFxufTtcblxuZXhwb3J0IGRlZmF1bHQgbXlzcWw7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLElBQUksR0FBR0EsQ0FBQSxLQUFNO0VBQ2YsTUFBTTtJQUNGQyxPQUFPO0lBQ1BDLE9BQU8sR0FBRyxJQUFJO0lBQ2RDLFdBQVc7SUFDWEMsV0FBVztJQUNYQztFQUNKLENBQUMsR0FBR0MsT0FBTyxDQUFDQyxHQUFHO0VBRWYsT0FBT0MsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ25CQyxNQUFNLEVBQUUsUUFBUTtJQUNoQkMsVUFBVSxFQUFFO01BQ1JDLElBQUksRUFBR1YsT0FBTztNQUNkVyxJQUFJLEVBQUdWLE9BQU87TUFDZFcsSUFBSSxFQUFHVixXQUFXO01BQ2xCVyxRQUFRLEVBQUdWLFdBQVc7TUFDdEJXLFFBQVEsRUFBR1Y7SUFDZjtFQUNKLENBQUMsQ0FBQztFQUFDO0FBQ1AsQ0FBQztBQUdELE1BQU1XLEtBQUssR0FBRztFQUNWaEI7QUFDSixDQUFDO0FBQUMsSUFBQWlCLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWFILEtBQUsifQ==","map":{"version":3,"names":["init","DB_HOST","DB_PORT","DB_USERNAME","DB_PASSWORD","DB_NAME","process","env","require","client","connection","host","port","user","password","database","mysql","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/database/","sources":["mysql.js"],"sourcesContent":["const init = () => {\n    const {\n        DB_HOST,\n        DB_PORT = 3306,\n        DB_USERNAME,\n        DB_PASSWORD,\n        DB_NAME\n    } = process.env;\n\n    return require('knex')({\n        client: 'mysql2',\n        connection: {\n            host : DB_HOST,\n            port : DB_PORT,\n            user : DB_USERNAME,\n            password : DB_PASSWORD,\n            database : DB_NAME\n        }\n    });;\n};\n\n\nconst mysql = {\n    init\n};\n\nexport default mysql;\n"],"mappings":";;;;;;AAAA,MAAMA,IAAI,GAAGA,CAAA,KAAM;EACf,MAAM;IACFC,OAAO;IACPC,OAAO,GAAG,IAAI;IACdC,WAAW;IACXC,WAAW;IACXC;EACJ,CAAC,GAAGC,OAAO,CAACC,GAAG;EAEf,OAAOC,OAAO,CAAC,MAAM,CAAC,CAAC;IACnBC,MAAM,EAAE,QAAQ;IAChBC,UAAU,EAAE;MACRC,IAAI,EAAGV,OAAO;MACdW,IAAI,EAAGV,OAAO;MACdW,IAAI,EAAGV,WAAW;MAClBW,QAAQ,EAAGV,WAAW;MACtBW,QAAQ,EAAGV;IACf;EACJ,CAAC,CAAC;EAAC;AACP,CAAC;AAGD,MAAMW,KAAK,GAAG;EACVhB;AACJ,CAAC;AAAC,IAAAiB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaH,KAAK"}},"mtime":1699046447117},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/dto/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/dto/level.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLevelByXP = void 0;\nconst getLevelByXP = xp => {\n  if (xp < 15) {\n    return 1;\n  }\n  if (xp > 15 && xp < 30) {\n    return 2;\n  }\n  return 3;\n};\nexports.getLevelByXP = getLevelByXP;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRMZXZlbEJ5WFAiLCJ4cCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL2R0by8iLCJzb3VyY2VzIjpbImxldmVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdldExldmVsQnlYUCA9ICh4cCkgPT4ge1xuICAgIGlmKHhwIDwgMTUpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuXG4gICAgaWYoeHAgPiAxNSAmJiB4cCA8IDMwKSB7XG4gICAgICAgIHJldHVybiAyO1xuICAgIH1cblxuICAgIHJldHVybiAzO1xufTtcblxuZXhwb3J0IHtcbiAgICBnZXRMZXZlbEJ5WFBcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLFlBQVksR0FBSUMsRUFBRSxJQUFLO0VBQ3pCLElBQUdBLEVBQUUsR0FBRyxFQUFFLEVBQUU7SUFDUixPQUFPLENBQUM7RUFDWjtFQUVBLElBQUdBLEVBQUUsR0FBRyxFQUFFLElBQUlBLEVBQUUsR0FBRyxFQUFFLEVBQUU7SUFDbkIsT0FBTyxDQUFDO0VBQ1o7RUFFQSxPQUFPLENBQUM7QUFDWixDQUFDO0FBQUNDLE9BQUEsQ0FBQUYsWUFBQSxHQUFBQSxZQUFBIn0=","map":{"version":3,"names":["getLevelByXP","xp","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/dto/","sources":["level.js"],"sourcesContent":["const getLevelByXP = (xp) => {\n    if(xp < 15) {\n        return 1;\n    }\n\n    if(xp > 15 && xp < 30) {\n        return 2;\n    }\n\n    return 3;\n};\n\nexport {\n    getLevelByXP\n};\n"],"mappings":";;;;;;AAAA,MAAMA,YAAY,GAAIC,EAAE,IAAK;EACzB,IAAGA,EAAE,GAAG,EAAE,EAAE;IACR,OAAO,CAAC;EACZ;EAEA,IAAGA,EAAE,GAAG,EAAE,IAAIA,EAAE,GAAG,EAAE,EAAE;IACnB,OAAO,CAAC;EACZ;EAEA,OAAO,CAAC;AACZ,CAAC;AAACC,OAAA,CAAAF,YAAA,GAAAA,YAAA"}},"mtime":1699057442587},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/dto/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/dto/level.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLevelByXP = void 0;\nconst getLevelByXP = xp => {\n  if (xp < 15) {\n    return 1;\n  }\n  if (xp > 15 && xp < 30) {\n    return 2;\n  }\n  return 3;\n};\nexports.getLevelByXP = getLevelByXP;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRMZXZlbEJ5WFAiLCJ4cCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL2R0by8iLCJzb3VyY2VzIjpbImxldmVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdldExldmVsQnlYUCA9ICh4cCkgPT4ge1xuICAgIGlmKHhwIDwgMTUpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuXG4gICAgaWYoeHAgPiAxNSAmJiB4cCA8IDMwKSB7XG4gICAgICAgIHJldHVybiAyO1xuICAgIH1cblxuICAgIHJldHVybiAzO1xufTtcblxuZXhwb3J0IHtcbiAgICBnZXRMZXZlbEJ5WFBcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLE1BQU1BLFlBQVksR0FBSUMsRUFBRSxJQUFLO0VBQ3pCLElBQUdBLEVBQUUsR0FBRyxFQUFFLEVBQUU7SUFDUixPQUFPLENBQUM7RUFDWjtFQUVBLElBQUdBLEVBQUUsR0FBRyxFQUFFLElBQUlBLEVBQUUsR0FBRyxFQUFFLEVBQUU7SUFDbkIsT0FBTyxDQUFDO0VBQ1o7RUFFQSxPQUFPLENBQUM7QUFDWixDQUFDO0FBQUNDLE9BQUEsQ0FBQUYsWUFBQSxHQUFBQSxZQUFBIn0=","map":{"version":3,"names":["getLevelByXP","xp","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/dto/","sources":["level.js"],"sourcesContent":["const getLevelByXP = (xp) => {\n    if(xp < 15) {\n        return 1;\n    }\n\n    if(xp > 15 && xp < 30) {\n        return 2;\n    }\n\n    return 3;\n};\n\nexport {\n    getLevelByXP\n};\n"],"mappings":";;;;;;AAAA,MAAMA,YAAY,GAAIC,EAAE,IAAK;EACzB,IAAGA,EAAE,GAAG,EAAE,EAAE;IACR,OAAO,CAAC;EACZ;EAEA,IAAGA,EAAE,GAAG,EAAE,IAAIA,EAAE,GAAG,EAAE,EAAE;IACnB,OAAO,CAAC;EACZ;EAEA,OAAO,CAAC;AACZ,CAAC;AAACC,OAAA,CAAAF,YAAA,GAAAA,YAAA"}},"mtime":1699057442587},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/vocabulary.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _userVocabulary = _interopRequireDefault(require(\"../services/userVocabulary\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/**\n * @param {userVocabularyService} userVocabularyService\n */\nconst vocabularyHandlers = userVocabularyService => {\n  /**\n   * @type {express.Request} req\n   * @type {express.Response} response}\n   */\n  const insert = async (req, res) => {\n    const pairs = req.body.pairs;\n    if (!pairs) {\n      return res.status(400).json({\n        type: 'vocabulary/invalid-pairs',\n        message: '`pairs` parameter is not provided'\n      });\n    }\n    await userVocabularyService.insertUserVocabularyWords(req.user.id, pairs);\n    const vocabulary = await userVocabularyService.getUserVocabulary(req.user.id);\n    return res.status(200).json({\n      data: vocabulary\n    });\n  };\n  return {\n    insert\n  };\n};\nvar _default = exports.default = vocabularyHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXJWb2NhYnVsYXJ5Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJ2b2NhYnVsYXJ5SGFuZGxlcnMiLCJ1c2VyVm9jYWJ1bGFyeVNlcnZpY2UiLCJpbnNlcnQiLCJyZXEiLCJyZXMiLCJwYWlycyIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwidHlwZSIsIm1lc3NhZ2UiLCJpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzIiwidXNlciIsImlkIiwidm9jYWJ1bGFyeSIsImdldFVzZXJWb2NhYnVsYXJ5IiwiZGF0YSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvdHJhbnNwb3J0cy8iLCJzb3VyY2VzIjpbInZvY2FidWxhcnkuaGFuZGxlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcydcbmltcG9ydCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UgZnJvbSBcIi4uL3NlcnZpY2VzL3VzZXJWb2NhYnVsYXJ5XCI7XG5cbi8qKlxuICogQHBhcmFtIHt1c2VyVm9jYWJ1bGFyeVNlcnZpY2V9IHVzZXJWb2NhYnVsYXJ5U2VydmljZVxuICovXG5jb25zdCB2b2NhYnVsYXJ5SGFuZGxlcnMgPSAodXNlclZvY2FidWxhcnlTZXJ2aWNlKSA9PiB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2V4cHJlc3MuUmVxdWVzdH0gcmVxXG4gICAgICogQHR5cGUge2V4cHJlc3MuUmVzcG9uc2V9IHJlc3BvbnNlfVxuICAgICAqL1xuICAgIGNvbnN0IGluc2VydCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgICBjb25zdCBwYWlycyA9IHJlcS5ib2R5LnBhaXJzO1xuXG4gICAgICAgIGlmKCFwYWlycykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndm9jYWJ1bGFyeS9pbnZhbGlkLXBhaXJzJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnYHBhaXJzYCBwYXJhbWV0ZXIgaXMgbm90IHByb3ZpZGVkJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UuaW5zZXJ0VXNlclZvY2FidWxhcnlXb3JkcyhyZXEudXNlci5pZCwgcGFpcnMpO1xuXG4gICAgICAgIGNvbnN0IHZvY2FidWxhcnkgPSBhd2FpdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UuZ2V0VXNlclZvY2FidWxhcnkocmVxLnVzZXIuaWQpO1xuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICBkYXRhOiB2b2NhYnVsYXJ5XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbnNlcnRcbiAgICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdm9jYWJ1bGFyeUhhbmRsZXJzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxlQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBK0QsU0FBQUQsdUJBQUFHLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFL0Q7QUFDQTtBQUNBO0FBQ0EsTUFBTUcsa0JBQWtCLEdBQUlDLHFCQUFxQixJQUFLO0VBQ2xEO0FBQ0o7QUFDQTtBQUNBO0VBQ0ksTUFBTUMsTUFBTSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0lBQy9CLE1BQU1DLEtBQUssR0FBR0YsR0FBRyxDQUFDRyxJQUFJLENBQUNELEtBQUs7SUFFNUIsSUFBRyxDQUFDQSxLQUFLLEVBQUU7TUFDUCxPQUFPRCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQ3hCQyxJQUFJLEVBQUUsMEJBQTBCO1FBQ2hDQyxPQUFPLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDTjtJQUVBLE1BQU1ULHFCQUFxQixDQUFDVSx5QkFBeUIsQ0FBQ1IsR0FBRyxDQUFDUyxJQUFJLENBQUNDLEVBQUUsRUFBRVIsS0FBSyxDQUFDO0lBRXpFLE1BQU1TLFVBQVUsR0FBRyxNQUFNYixxQkFBcUIsQ0FBQ2MsaUJBQWlCLENBQUNaLEdBQUcsQ0FBQ1MsSUFBSSxDQUFDQyxFQUFFLENBQUM7SUFFN0UsT0FBT1QsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QlEsSUFBSSxFQUFFRjtJQUNWLENBQUMsQ0FBQztFQUNOLENBQUM7RUFFRCxPQUFPO0lBQ0haO0VBQ0osQ0FBQztBQUNMLENBQUM7QUFBQyxJQUFBZSxRQUFBLEdBQUFDLE9BQUEsQ0FBQW5CLE9BQUEsR0FFYUMsa0JBQWtCIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_userVocabulary","obj","__esModule","default","vocabularyHandlers","userVocabularyService","insert","req","res","pairs","body","status","json","type","message","insertUserVocabularyWords","user","id","vocabulary","getUserVocabulary","data","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["vocabulary.handlers.js"],"sourcesContent":["import express from 'express'\nimport userVocabularyService from \"../services/userVocabulary\";\n\n/**\n * @param {userVocabularyService} userVocabularyService\n */\nconst vocabularyHandlers = (userVocabularyService) => {\n    /**\n     * @type {express.Request} req\n     * @type {express.Response} response}\n     */\n    const insert = async (req, res) => {\n        const pairs = req.body.pairs;\n\n        if(!pairs) {\n            return res.status(400).json({\n                type: 'vocabulary/invalid-pairs',\n                message: '`pairs` parameter is not provided'\n            });\n        }\n\n        await userVocabularyService.insertUserVocabularyWords(req.user.id, pairs);\n\n        const vocabulary = await userVocabularyService.getUserVocabulary(req.user.id);\n\n        return res.status(200).json({\n            data: vocabulary\n        });\n    };\n\n    return {\n        insert\n    };\n};\n\nexport default vocabularyHandlers;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,eAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA+D,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE/D;AACA;AACA;AACA,MAAMG,kBAAkB,GAAIC,qBAAqB,IAAK;EAClD;AACJ;AACA;AACA;EACI,MAAMC,MAAM,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;IAC/B,MAAMC,KAAK,GAAGF,GAAG,CAACG,IAAI,CAACD,KAAK;IAE5B,IAAG,CAACA,KAAK,EAAE;MACP,OAAOD,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QACxBC,IAAI,EAAE,0BAA0B;QAChCC,OAAO,EAAE;MACb,CAAC,CAAC;IACN;IAEA,MAAMT,qBAAqB,CAACU,yBAAyB,CAACR,GAAG,CAACS,IAAI,CAACC,EAAE,EAAER,KAAK,CAAC;IAEzE,MAAMS,UAAU,GAAG,MAAMb,qBAAqB,CAACc,iBAAiB,CAACZ,GAAG,CAACS,IAAI,CAACC,EAAE,CAAC;IAE7E,OAAOT,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBQ,IAAI,EAAEF;IACV,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACHZ;EACJ,CAAC;AACL,CAAC;AAAC,IAAAe,QAAA,GAAAC,OAAA,CAAAnB,OAAA,GAEaC,kBAAkB"}},"mtime":1699061827327},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/services/userPassedCourses.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n/**\n * @param {userPassedCoursesRepository()} repository\n * @param {usersService} usersService\n */\nconst userPassedCoursesService = (repository, usersService) => {\n  const getPassedCoursesByUserID = async userID => {\n    return repository.getPassedCoursesByUserID(userID);\n  };\n  const insertPassedCourse = async (userID, courseKey, failsCount) => {\n    let defaultXP = 15;\n    defaultXP -= failsCount * 0.5;\n    await repository.insertPassedCourse(userID, courseKey, defaultXP, failsCount);\n    // await usersService.incrementUserXP(userID, defaultXP);\n\n    return true;\n  };\n  return {\n    getPassedCoursesByUserID,\n    insertPassedCourse\n  };\n};\nvar _default = exports.default = userPassedCoursesService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UiLCJyZXBvc2l0b3J5IiwidXNlcnNTZXJ2aWNlIiwiZ2V0UGFzc2VkQ291cnNlc0J5VXNlcklEIiwidXNlcklEIiwiaW5zZXJ0UGFzc2VkQ291cnNlIiwiY291cnNlS2V5IiwiZmFpbHNDb3VudCIsImRlZmF1bHRYUCIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsidXNlclBhc3NlZENvdXJzZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFyYW0ge3VzZXJQYXNzZWRDb3Vyc2VzUmVwb3NpdG9yeSgpfSByZXBvc2l0b3J5XG4gKiBAcGFyYW0ge3VzZXJzU2VydmljZX0gdXNlcnNTZXJ2aWNlXG4gKi9cbmNvbnN0IHVzZXJQYXNzZWRDb3Vyc2VzU2VydmljZSA9IChyZXBvc2l0b3J5LCB1c2Vyc1NlcnZpY2UpID0+IHtcbiAgICBjb25zdCBnZXRQYXNzZWRDb3Vyc2VzQnlVc2VySUQgPSBhc3luYyAodXNlcklEKSA9PiB7XG4gICAgICAgIHJldHVybiByZXBvc2l0b3J5LmdldFBhc3NlZENvdXJzZXNCeVVzZXJJRCh1c2VySUQpO1xuICAgIH07XG5cbiAgICBjb25zdCBpbnNlcnRQYXNzZWRDb3Vyc2UgPSBhc3luYyAodXNlcklELCBjb3Vyc2VLZXksIGZhaWxzQ291bnQpID0+IHtcbiAgICAgICAgbGV0IGRlZmF1bHRYUCA9IDE1O1xuICAgICAgICBkZWZhdWx0WFAgLT0gZmFpbHNDb3VudCAqIDAuNTtcblxuICAgICAgICBhd2FpdCByZXBvc2l0b3J5Lmluc2VydFBhc3NlZENvdXJzZSh1c2VySUQsIGNvdXJzZUtleSwgZGVmYXVsdFhQLCBmYWlsc0NvdW50KTtcbiAgICAgICAgLy8gYXdhaXQgdXNlcnNTZXJ2aWNlLmluY3JlbWVudFVzZXJYUCh1c2VySUQsIGRlZmF1bHRYUCk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldFBhc3NlZENvdXJzZXNCeVVzZXJJRCxcbiAgICAgICAgaW5zZXJ0UGFzc2VkQ291cnNlXG4gICAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJQYXNzZWRDb3Vyc2VzU2VydmljZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSx3QkFBd0IsR0FBR0EsQ0FBQ0MsVUFBVSxFQUFFQyxZQUFZLEtBQUs7RUFDM0QsTUFBTUMsd0JBQXdCLEdBQUcsTUFBT0MsTUFBTSxJQUFLO0lBQy9DLE9BQU9ILFVBQVUsQ0FBQ0Usd0JBQXdCLENBQUNDLE1BQU0sQ0FBQztFQUN0RCxDQUFDO0VBRUQsTUFBTUMsa0JBQWtCLEdBQUcsTUFBQUEsQ0FBT0QsTUFBTSxFQUFFRSxTQUFTLEVBQUVDLFVBQVUsS0FBSztJQUNoRSxJQUFJQyxTQUFTLEdBQUcsRUFBRTtJQUNsQkEsU0FBUyxJQUFJRCxVQUFVLEdBQUcsR0FBRztJQUU3QixNQUFNTixVQUFVLENBQUNJLGtCQUFrQixDQUFDRCxNQUFNLEVBQUVFLFNBQVMsRUFBRUUsU0FBUyxFQUFFRCxVQUFVLENBQUM7SUFDN0U7O0lBRUEsT0FBTyxJQUFJO0VBQ2YsQ0FBQztFQUVELE9BQU87SUFDSEosd0JBQXdCO0lBQ3hCRTtFQUNKLENBQUM7QUFDTCxDQUFDO0FBQUMsSUFBQUksUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFYVgsd0JBQXdCIn0=","map":{"version":3,"names":["userPassedCoursesService","repository","usersService","getPassedCoursesByUserID","userID","insertPassedCourse","courseKey","failsCount","defaultXP","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/services/","sources":["userPassedCourses.js"],"sourcesContent":["/**\n * @param {userPassedCoursesRepository()} repository\n * @param {usersService} usersService\n */\nconst userPassedCoursesService = (repository, usersService) => {\n    const getPassedCoursesByUserID = async (userID) => {\n        return repository.getPassedCoursesByUserID(userID);\n    };\n\n    const insertPassedCourse = async (userID, courseKey, failsCount) => {\n        let defaultXP = 15;\n        defaultXP -= failsCount * 0.5;\n\n        await repository.insertPassedCourse(userID, courseKey, defaultXP, failsCount);\n        // await usersService.incrementUserXP(userID, defaultXP);\n\n        return true;\n    };\n\n    return {\n        getPassedCoursesByUserID,\n        insertPassedCourse\n    };\n};\n\nexport default userPassedCoursesService;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA,MAAMA,wBAAwB,GAAGA,CAACC,UAAU,EAAEC,YAAY,KAAK;EAC3D,MAAMC,wBAAwB,GAAG,MAAOC,MAAM,IAAK;IAC/C,OAAOH,UAAU,CAACE,wBAAwB,CAACC,MAAM,CAAC;EACtD,CAAC;EAED,MAAMC,kBAAkB,GAAG,MAAAA,CAAOD,MAAM,EAAEE,SAAS,EAAEC,UAAU,KAAK;IAChE,IAAIC,SAAS,GAAG,EAAE;IAClBA,SAAS,IAAID,UAAU,GAAG,GAAG;IAE7B,MAAMN,UAAU,CAACI,kBAAkB,CAACD,MAAM,EAAEE,SAAS,EAAEE,SAAS,EAAED,UAAU,CAAC;IAC7E;;IAEA,OAAO,IAAI;EACf,CAAC;EAED,OAAO;IACHJ,wBAAwB;IACxBE;EACJ,CAAC;AACL,CAAC;AAAC,IAAAI,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaX,wBAAwB"}},"mtime":1699070937737},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/database/userPassedCourses.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _knex = require(\"knex\");\n/**\n * TABLE: user_passed_courses\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * course_key VARCHAR 512\n * gained_xp INT\n * fails_count INT\n * created_at DATE\n */\n/**\n * @param {Knex} knex\n */\nconst getPassedCoursesByUserID = knex => userID => {\n  return knex.select('id', 'course_key', 'gained_xp', 'fails_count', 'created_at').from('user_passed_courses').where('user_id', userID);\n};\nconst insertPassedCourse = knex => (userID, courseKey, gainedXP, failsCount) => {\n  return knex('users').insert({\n    user_id: userID,\n    course_key: courseKey,\n    gained_xp: gainedXP,\n    fails_count: failsCount,\n    created_at: knex.raw('NOW()')\n  }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userPassedCoursesRepository = knex => {\n  return {\n    getPassedCoursesByUserID: getPassedCoursesByUserID(knex),\n    insertPassedCourse: insertPassedCourse(knex)\n  };\n};\nvar _default = exports.default = userPassedCoursesRepository;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfa25leCIsInJlcXVpcmUiLCJnZXRQYXNzZWRDb3Vyc2VzQnlVc2VySUQiLCJrbmV4IiwidXNlcklEIiwic2VsZWN0IiwiZnJvbSIsIndoZXJlIiwiaW5zZXJ0UGFzc2VkQ291cnNlIiwiY291cnNlS2V5IiwiZ2FpbmVkWFAiLCJmYWlsc0NvdW50IiwiaW5zZXJ0IiwidXNlcl9pZCIsImNvdXJzZV9rZXkiLCJnYWluZWRfeHAiLCJmYWlsc19jb3VudCIsImNyZWF0ZWRfYXQiLCJyYXciLCJyZXR1cm5pbmciLCJ1c2VyUGFzc2VkQ291cnNlc1JlcG9zaXRvcnkiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy9kYXRhYmFzZS8iLCJzb3VyY2VzIjpbInVzZXJQYXNzZWRDb3Vyc2VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tIFwia25leFwiXG5cbi8qKlxuICogVEFCTEU6IHVzZXJfcGFzc2VkX2NvdXJzZXNcbiAqIFNUUlVDVFVSRTpcbiAqIGlkIElOVCBBSVxuICogdXNlcl9pZCBJTlRcbiAqIGNvdXJzZV9rZXkgVkFSQ0hBUiA1MTJcbiAqIGdhaW5lZF94cCBJTlRcbiAqIGZhaWxzX2NvdW50IElOVFxuICogY3JlYXRlZF9hdCBEQVRFXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqL1xuY29uc3QgZ2V0UGFzc2VkQ291cnNlc0J5VXNlcklEID0gKGtuZXgpID0+ICh1c2VySUQpID0+IHtcbiAgICByZXR1cm4ga25leC5zZWxlY3QoJ2lkJywgJ2NvdXJzZV9rZXknLCAnZ2FpbmVkX3hwJywgJ2ZhaWxzX2NvdW50JywnY3JlYXRlZF9hdCcpXG4gICAgICAgIC5mcm9tKCd1c2VyX3Bhc3NlZF9jb3Vyc2VzJylcbiAgICAgICAgLndoZXJlKCd1c2VyX2lkJywgdXNlcklEKTtcbn07XG5cbmNvbnN0IGluc2VydFBhc3NlZENvdXJzZSA9IChrbmV4KSA9PiAodXNlcklELCBjb3Vyc2VLZXksIGdhaW5lZFhQLCBmYWlsc0NvdW50KSA9PiB7XG4gICAgcmV0dXJuIGtuZXgoJ3VzZXJzJykuaW5zZXJ0KHtcbiAgICAgICAgdXNlcl9pZDogdXNlcklELFxuICAgICAgICBjb3Vyc2Vfa2V5OiBjb3Vyc2VLZXksXG4gICAgICAgIGdhaW5lZF94cDogZ2FpbmVkWFAsXG4gICAgICAgIGZhaWxzX2NvdW50OiBmYWlsc0NvdW50LFxuICAgICAgICBjcmVhdGVkX2F0OiBrbmV4LnJhdygnTk9XKCknKVxuICAgIH0pLnJldHVybmluZygnaWQnKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtLbmV4fSBrbmV4XG4gKiBAcmV0dXJucyB7e2dldFVzZXJCeVRva2VuOiAoZnVuY3Rpb24oKik6IGZ1bmN0aW9uKCopOiAqKX19XG4gKi9cbmNvbnN0IHVzZXJQYXNzZWRDb3Vyc2VzUmVwb3NpdG9yeSA9IChrbmV4KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UGFzc2VkQ291cnNlc0J5VXNlcklEOiBnZXRQYXNzZWRDb3Vyc2VzQnlVc2VySUQoa25leCksXG4gICAgICAgIGluc2VydFBhc3NlZENvdXJzZTogaW5zZXJ0UGFzc2VkQ291cnNlKGtuZXgpLFxuICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VyUGFzc2VkQ291cnNlc1JlcG9zaXRvcnk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsd0JBQXdCLEdBQUlDLElBQUksSUFBTUMsTUFBTSxJQUFLO0VBQ25ELE9BQU9ELElBQUksQ0FBQ0UsTUFBTSxDQUFDLElBQUksRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLGFBQWEsRUFBQyxZQUFZLENBQUMsQ0FDMUVDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUMzQkMsS0FBSyxDQUFDLFNBQVMsRUFBRUgsTUFBTSxDQUFDO0FBQ2pDLENBQUM7QUFFRCxNQUFNSSxrQkFBa0IsR0FBSUwsSUFBSSxJQUFLLENBQUNDLE1BQU0sRUFBRUssU0FBUyxFQUFFQyxRQUFRLEVBQUVDLFVBQVUsS0FBSztFQUM5RSxPQUFPUixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUNTLE1BQU0sQ0FBQztJQUN4QkMsT0FBTyxFQUFFVCxNQUFNO0lBQ2ZVLFVBQVUsRUFBRUwsU0FBUztJQUNyQk0sU0FBUyxFQUFFTCxRQUFRO0lBQ25CTSxXQUFXLEVBQUVMLFVBQVU7SUFDdkJNLFVBQVUsRUFBRWQsSUFBSSxDQUFDZSxHQUFHLENBQUMsT0FBTztFQUNoQyxDQUFDLENBQUMsQ0FBQ0MsU0FBUyxDQUFDLElBQUksQ0FBQztBQUN0QixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsMkJBQTJCLEdBQUlqQixJQUFJLElBQUs7RUFDMUMsT0FBTztJQUNIRCx3QkFBd0IsRUFBRUEsd0JBQXdCLENBQUNDLElBQUksQ0FBQztJQUN4REssa0JBQWtCLEVBQUVBLGtCQUFrQixDQUFDTCxJQUFJO0VBQy9DLENBQUM7QUFDTCxDQUFDO0FBQUMsSUFBQWtCLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWFILDJCQUEyQiJ9","map":{"version":3,"names":["_knex","require","getPassedCoursesByUserID","knex","userID","select","from","where","insertPassedCourse","courseKey","gainedXP","failsCount","insert","user_id","course_key","gained_xp","fails_count","created_at","raw","returning","userPassedCoursesRepository","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/database/","sources":["userPassedCourses.js"],"sourcesContent":["import { Knex } from \"knex\"\n\n/**\n * TABLE: user_passed_courses\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * course_key VARCHAR 512\n * gained_xp INT\n * fails_count INT\n * created_at DATE\n */\n\n/**\n * @param {Knex} knex\n */\nconst getPassedCoursesByUserID = (knex) => (userID) => {\n    return knex.select('id', 'course_key', 'gained_xp', 'fails_count','created_at')\n        .from('user_passed_courses')\n        .where('user_id', userID);\n};\n\nconst insertPassedCourse = (knex) => (userID, courseKey, gainedXP, failsCount) => {\n    return knex('users').insert({\n        user_id: userID,\n        course_key: courseKey,\n        gained_xp: gainedXP,\n        fails_count: failsCount,\n        created_at: knex.raw('NOW()')\n    }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userPassedCoursesRepository = (knex) => {\n    return {\n        getPassedCoursesByUserID: getPassedCoursesByUserID(knex),\n        insertPassedCourse: insertPassedCourse(knex),\n    };\n};\n\nexport default userPassedCoursesRepository;\n"],"mappings":";;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA,MAAMC,wBAAwB,GAAIC,IAAI,IAAMC,MAAM,IAAK;EACnD,OAAOD,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,YAAY,EAAE,WAAW,EAAE,aAAa,EAAC,YAAY,CAAC,CAC1EC,IAAI,CAAC,qBAAqB,CAAC,CAC3BC,KAAK,CAAC,SAAS,EAAEH,MAAM,CAAC;AACjC,CAAC;AAED,MAAMI,kBAAkB,GAAIL,IAAI,IAAK,CAACC,MAAM,EAAEK,SAAS,EAAEC,QAAQ,EAAEC,UAAU,KAAK;EAC9E,OAAOR,IAAI,CAAC,OAAO,CAAC,CAACS,MAAM,CAAC;IACxBC,OAAO,EAAET,MAAM;IACfU,UAAU,EAAEL,SAAS;IACrBM,SAAS,EAAEL,QAAQ;IACnBM,WAAW,EAAEL,UAAU;IACvBM,UAAU,EAAEd,IAAI,CAACe,GAAG,CAAC,OAAO;EAChC,CAAC,CAAC,CAACC,SAAS,CAAC,IAAI,CAAC;AACtB,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMC,2BAA2B,GAAIjB,IAAI,IAAK;EAC1C,OAAO;IACHD,wBAAwB,EAAEA,wBAAwB,CAACC,IAAI,CAAC;IACxDK,kBAAkB,EAAEA,kBAAkB,CAACL,IAAI;EAC/C,CAAC;AACL,CAAC;AAAC,IAAAkB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaH,2BAA2B"}},"mtime":1699070528675},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/course.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _userPassedCourses = _interopRequireDefault(require(\"../services/userPassedCourses\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst courseHandlers = userPassedCoursesService => {\n  /**\n   * @param {express.Request} req\n   * @param {express.Response} res\n   */\n  const passCourse = async (req, res) => {\n    const courseKey = req.body.course_key;\n    const failsCount = req.body.fails_count;\n    const user = req.user;\n    await userPassedCoursesService.insertPassedCourse(user.id, courseKey, failsCount);\n    return res.status(201).json({\n      data: await userPassedCoursesService.getPassedCoursesByUserID(user.id)\n    });\n  };\n  return {\n    passCourse\n  };\n};\nvar _default = exports.default = courseHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXJQYXNzZWRDb3Vyc2VzIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjb3Vyc2VIYW5kbGVycyIsInVzZXJQYXNzZWRDb3Vyc2VzU2VydmljZSIsInBhc3NDb3Vyc2UiLCJyZXEiLCJyZXMiLCJjb3Vyc2VLZXkiLCJib2R5IiwiY291cnNlX2tleSIsImZhaWxzQ291bnQiLCJmYWlsc19jb3VudCIsInVzZXIiLCJpbnNlcnRQYXNzZWRDb3Vyc2UiLCJpZCIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwiZ2V0UGFzc2VkQ291cnNlc0J5VXNlcklEIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy90cmFuc3BvcnRzLyIsInNvdXJjZXMiOlsiY291cnNlLmhhbmRsZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlIGZyb20gXCIuLi9zZXJ2aWNlcy91c2VyUGFzc2VkQ291cnNlc1wiO1xuXG5jb25zdCBjb3Vyc2VIYW5kbGVycyA9ICh1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UpID0+IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2V4cHJlc3MuUmVxdWVzdH0gcmVxXG4gICAgICogQHBhcmFtIHtleHByZXNzLlJlc3BvbnNlfSByZXNcbiAgICAgKi9cbiAgICBjb25zdCBwYXNzQ291cnNlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvdXJzZUtleSA9IHJlcS5ib2R5LmNvdXJzZV9rZXk7XG4gICAgICAgIGNvbnN0IGZhaWxzQ291bnQgPSByZXEuYm9keS5mYWlsc19jb3VudDtcblxuICAgICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICAgIGF3YWl0IHVzZXJQYXNzZWRDb3Vyc2VzU2VydmljZS5pbnNlcnRQYXNzZWRDb3Vyc2UodXNlci5pZCwgY291cnNlS2V5LCBmYWlsc0NvdW50KTtcblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICAgICAgZGF0YTogYXdhaXQgdXNlclBhc3NlZENvdXJzZXNTZXJ2aWNlLmdldFBhc3NlZENvdXJzZXNCeVVzZXJJRCh1c2VyLmlkKVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGFzc0NvdXJzZVxuICAgIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb3Vyc2VIYW5kbGVycztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsa0JBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFxRSxTQUFBRCx1QkFBQUcsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUVyRSxNQUFNRyxjQUFjLEdBQUlDLHdCQUF3QixJQUFLO0VBQ2pEO0FBQ0o7QUFDQTtBQUNBO0VBQ0ksTUFBTUMsVUFBVSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0lBQ25DLE1BQU1DLFNBQVMsR0FBR0YsR0FBRyxDQUFDRyxJQUFJLENBQUNDLFVBQVU7SUFDckMsTUFBTUMsVUFBVSxHQUFHTCxHQUFHLENBQUNHLElBQUksQ0FBQ0csV0FBVztJQUV2QyxNQUFNQyxJQUFJLEdBQUdQLEdBQUcsQ0FBQ08sSUFBSTtJQUNyQixNQUFNVCx3QkFBd0IsQ0FBQ1Usa0JBQWtCLENBQUNELElBQUksQ0FBQ0UsRUFBRSxFQUFFUCxTQUFTLEVBQUVHLFVBQVUsQ0FBQztJQUVqRixPQUFPSixHQUFHLENBQUNTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ3hCQyxJQUFJLEVBQUUsTUFBTWQsd0JBQXdCLENBQUNlLHdCQUF3QixDQUFDTixJQUFJLENBQUNFLEVBQUU7SUFDekUsQ0FBQyxDQUFDO0VBQ04sQ0FBQztFQUVELE9BQU87SUFDSFY7RUFDSixDQUFDO0FBQ0wsQ0FBQztBQUFDLElBQUFlLFFBQUEsR0FBQUMsT0FBQSxDQUFBbkIsT0FBQSxHQUVhQyxjQUFjIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_userPassedCourses","obj","__esModule","default","courseHandlers","userPassedCoursesService","passCourse","req","res","courseKey","body","course_key","failsCount","fails_count","user","insertPassedCourse","id","status","json","data","getPassedCoursesByUserID","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["course.handlers.js"],"sourcesContent":["import express from 'express'\nimport userPassedCoursesService from \"../services/userPassedCourses\";\n\nconst courseHandlers = (userPassedCoursesService) => {\n    /**\n     * @param {express.Request} req\n     * @param {express.Response} res\n     */\n    const passCourse = async (req, res) => {\n        const courseKey = req.body.course_key;\n        const failsCount = req.body.fails_count;\n\n        const user = req.user;\n        await userPassedCoursesService.insertPassedCourse(user.id, courseKey, failsCount);\n\n        return res.status(201).json({\n            data: await userPassedCoursesService.getPassedCoursesByUserID(user.id)\n        });\n    };\n\n    return {\n        passCourse\n    };\n};\n\nexport default courseHandlers;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAqE,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAErE,MAAMG,cAAc,GAAIC,wBAAwB,IAAK;EACjD;AACJ;AACA;AACA;EACI,MAAMC,UAAU,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;IACnC,MAAMC,SAAS,GAAGF,GAAG,CAACG,IAAI,CAACC,UAAU;IACrC,MAAMC,UAAU,GAAGL,GAAG,CAACG,IAAI,CAACG,WAAW;IAEvC,MAAMC,IAAI,GAAGP,GAAG,CAACO,IAAI;IACrB,MAAMT,wBAAwB,CAACU,kBAAkB,CAACD,IAAI,CAACE,EAAE,EAAEP,SAAS,EAAEG,UAAU,CAAC;IAEjF,OAAOJ,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBC,IAAI,EAAE,MAAMd,wBAAwB,CAACe,wBAAwB,CAACN,IAAI,CAACE,EAAE;IACzE,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACHV;EACJ,CAAC;AACL,CAAC;AAAC,IAAAe,QAAA,GAAAC,OAAA,CAAAnB,OAAA,GAEaC,cAAc"}},"mtime":1699070000482},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/transports/vocabulary.handlers.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _userVocabulary = _interopRequireDefault(require(\"../services/userVocabulary\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/**\n * @param {userVocabularyService} userVocabularyService\n */\nconst vocabularyHandlers = userVocabularyService => {\n  /**\n   * @type {express.Request} req\n   * @type {express.Response} response}\n   */\n  const insert = async (req, res) => {\n    const pairs = req.body.pairs;\n    if (!pairs) {\n      return res.status(400).json({\n        type: 'vocabulary/invalid-pairs',\n        message: '`pairs` parameter is not provided'\n      });\n    }\n    await userVocabularyService.insertUserVocabularyWords(req.user.id, pairs);\n    const vocabulary = await userVocabularyService.getUserVocabulary(req.user.id);\n    return res.status(200).json({\n      data: vocabulary\n    });\n  };\n  return {\n    insert\n  };\n};\nvar _default = exports.default = vocabularyHandlers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3VzZXJWb2NhYnVsYXJ5Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJ2b2NhYnVsYXJ5SGFuZGxlcnMiLCJ1c2VyVm9jYWJ1bGFyeVNlcnZpY2UiLCJpbnNlcnQiLCJyZXEiLCJyZXMiLCJwYWlycyIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwidHlwZSIsIm1lc3NhZ2UiLCJpbnNlcnRVc2VyVm9jYWJ1bGFyeVdvcmRzIiwidXNlciIsImlkIiwidm9jYWJ1bGFyeSIsImdldFVzZXJWb2NhYnVsYXJ5IiwiZGF0YSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3lzaG1lZWwvV29yay9rYXpha2gtYmFja2VuZC9zcmMvdHJhbnNwb3J0cy8iLCJzb3VyY2VzIjpbInZvY2FidWxhcnkuaGFuZGxlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcydcbmltcG9ydCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UgZnJvbSBcIi4uL3NlcnZpY2VzL3VzZXJWb2NhYnVsYXJ5XCI7XG5cbi8qKlxuICogQHBhcmFtIHt1c2VyVm9jYWJ1bGFyeVNlcnZpY2V9IHVzZXJWb2NhYnVsYXJ5U2VydmljZVxuICovXG5jb25zdCB2b2NhYnVsYXJ5SGFuZGxlcnMgPSAodXNlclZvY2FidWxhcnlTZXJ2aWNlKSA9PiB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2V4cHJlc3MuUmVxdWVzdH0gcmVxXG4gICAgICogQHR5cGUge2V4cHJlc3MuUmVzcG9uc2V9IHJlc3BvbnNlfVxuICAgICAqL1xuICAgIGNvbnN0IGluc2VydCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgICBjb25zdCBwYWlycyA9IHJlcS5ib2R5LnBhaXJzO1xuXG4gICAgICAgIGlmKCFwYWlycykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndm9jYWJ1bGFyeS9pbnZhbGlkLXBhaXJzJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnYHBhaXJzYCBwYXJhbWV0ZXIgaXMgbm90IHByb3ZpZGVkJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UuaW5zZXJ0VXNlclZvY2FidWxhcnlXb3JkcyhyZXEudXNlci5pZCwgcGFpcnMpO1xuXG4gICAgICAgIGNvbnN0IHZvY2FidWxhcnkgPSBhd2FpdCB1c2VyVm9jYWJ1bGFyeVNlcnZpY2UuZ2V0VXNlclZvY2FidWxhcnkocmVxLnVzZXIuaWQpO1xuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICBkYXRhOiB2b2NhYnVsYXJ5XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBpbnNlcnRcbiAgICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdm9jYWJ1bGFyeUhhbmRsZXJzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxlQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBK0QsU0FBQUQsdUJBQUFHLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFL0Q7QUFDQTtBQUNBO0FBQ0EsTUFBTUcsa0JBQWtCLEdBQUlDLHFCQUFxQixJQUFLO0VBQ2xEO0FBQ0o7QUFDQTtBQUNBO0VBQ0ksTUFBTUMsTUFBTSxHQUFHLE1BQUFBLENBQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0lBQy9CLE1BQU1DLEtBQUssR0FBR0YsR0FBRyxDQUFDRyxJQUFJLENBQUNELEtBQUs7SUFFNUIsSUFBRyxDQUFDQSxLQUFLLEVBQUU7TUFDUCxPQUFPRCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQ3hCQyxJQUFJLEVBQUUsMEJBQTBCO1FBQ2hDQyxPQUFPLEVBQUU7TUFDYixDQUFDLENBQUM7SUFDTjtJQUVBLE1BQU1ULHFCQUFxQixDQUFDVSx5QkFBeUIsQ0FBQ1IsR0FBRyxDQUFDUyxJQUFJLENBQUNDLEVBQUUsRUFBRVIsS0FBSyxDQUFDO0lBRXpFLE1BQU1TLFVBQVUsR0FBRyxNQUFNYixxQkFBcUIsQ0FBQ2MsaUJBQWlCLENBQUNaLEdBQUcsQ0FBQ1MsSUFBSSxDQUFDQyxFQUFFLENBQUM7SUFFN0UsT0FBT1QsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QlEsSUFBSSxFQUFFRjtJQUNWLENBQUMsQ0FBQztFQUNOLENBQUM7RUFFRCxPQUFPO0lBQ0haO0VBQ0osQ0FBQztBQUNMLENBQUM7QUFBQyxJQUFBZSxRQUFBLEdBQUFDLE9BQUEsQ0FBQW5CLE9BQUEsR0FFYUMsa0JBQWtCIn0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_userVocabulary","obj","__esModule","default","vocabularyHandlers","userVocabularyService","insert","req","res","pairs","body","status","json","type","message","insertUserVocabularyWords","user","id","vocabulary","getUserVocabulary","data","_default","exports"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/transports/","sources":["vocabulary.handlers.js"],"sourcesContent":["import express from 'express'\nimport userVocabularyService from \"../services/userVocabulary\";\n\n/**\n * @param {userVocabularyService} userVocabularyService\n */\nconst vocabularyHandlers = (userVocabularyService) => {\n    /**\n     * @type {express.Request} req\n     * @type {express.Response} response}\n     */\n    const insert = async (req, res) => {\n        const pairs = req.body.pairs;\n\n        if(!pairs) {\n            return res.status(400).json({\n                type: 'vocabulary/invalid-pairs',\n                message: '`pairs` parameter is not provided'\n            });\n        }\n\n        await userVocabularyService.insertUserVocabularyWords(req.user.id, pairs);\n\n        const vocabulary = await userVocabularyService.getUserVocabulary(req.user.id);\n\n        return res.status(200).json({\n            data: vocabulary\n        });\n    };\n\n    return {\n        insert\n    };\n};\n\nexport default vocabularyHandlers;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,eAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA+D,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE/D;AACA;AACA;AACA,MAAMG,kBAAkB,GAAIC,qBAAqB,IAAK;EAClD;AACJ;AACA;AACA;EACI,MAAMC,MAAM,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;IAC/B,MAAMC,KAAK,GAAGF,GAAG,CAACG,IAAI,CAACD,KAAK;IAE5B,IAAG,CAACA,KAAK,EAAE;MACP,OAAOD,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QACxBC,IAAI,EAAE,0BAA0B;QAChCC,OAAO,EAAE;MACb,CAAC,CAAC;IACN;IAEA,MAAMT,qBAAqB,CAACU,yBAAyB,CAACR,GAAG,CAACS,IAAI,CAACC,EAAE,EAAER,KAAK,CAAC;IAEzE,MAAMS,UAAU,GAAG,MAAMb,qBAAqB,CAACc,iBAAiB,CAACZ,GAAG,CAACS,IAAI,CAACC,EAAE,CAAC;IAE7E,OAAOT,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACxBQ,IAAI,EAAEF;IACV,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACHZ;EACJ,CAAC;AACL,CAAC;AAAC,IAAAe,QAAA,GAAAC,OAAA,CAAAnB,OAAA,GAEaC,kBAAkB"}},"mtime":1699061827327},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/services/userPassedCourses.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n/**\n * @param {userPassedCoursesRepository()} repository\n * @param {usersService} usersService\n */\nconst userPassedCoursesService = (repository, usersService) => {\n  const getPassedCoursesByUserID = async userID => {\n    return repository.getPassedCoursesByUserID(userID);\n  };\n  const insertPassedCourse = async (userID, courseKey, failsCount) => {\n    let defaultXP = 15;\n    defaultXP -= failsCount * 0.5;\n    await repository.insertPassedCourse(userID, courseKey, defaultXP, failsCount);\n    // await usersService.incrementUserXP(userID, defaultXP);\n\n    return true;\n  };\n  return {\n    getPassedCoursesByUserID,\n    insertPassedCourse\n  };\n};\nvar _default = exports.default = userPassedCoursesService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUGFzc2VkQ291cnNlc1NlcnZpY2UiLCJyZXBvc2l0b3J5IiwidXNlcnNTZXJ2aWNlIiwiZ2V0UGFzc2VkQ291cnNlc0J5VXNlcklEIiwidXNlcklEIiwiaW5zZXJ0UGFzc2VkQ291cnNlIiwiY291cnNlS2V5IiwiZmFpbHNDb3VudCIsImRlZmF1bHRYUCIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy95c2htZWVsL1dvcmsva2F6YWtoLWJhY2tlbmQvc3JjL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsidXNlclBhc3NlZENvdXJzZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFyYW0ge3VzZXJQYXNzZWRDb3Vyc2VzUmVwb3NpdG9yeSgpfSByZXBvc2l0b3J5XG4gKiBAcGFyYW0ge3VzZXJzU2VydmljZX0gdXNlcnNTZXJ2aWNlXG4gKi9cbmNvbnN0IHVzZXJQYXNzZWRDb3Vyc2VzU2VydmljZSA9IChyZXBvc2l0b3J5LCB1c2Vyc1NlcnZpY2UpID0+IHtcbiAgICBjb25zdCBnZXRQYXNzZWRDb3Vyc2VzQnlVc2VySUQgPSBhc3luYyAodXNlcklEKSA9PiB7XG4gICAgICAgIHJldHVybiByZXBvc2l0b3J5LmdldFBhc3NlZENvdXJzZXNCeVVzZXJJRCh1c2VySUQpO1xuICAgIH07XG5cbiAgICBjb25zdCBpbnNlcnRQYXNzZWRDb3Vyc2UgPSBhc3luYyAodXNlcklELCBjb3Vyc2VLZXksIGZhaWxzQ291bnQpID0+IHtcbiAgICAgICAgbGV0IGRlZmF1bHRYUCA9IDE1O1xuICAgICAgICBkZWZhdWx0WFAgLT0gZmFpbHNDb3VudCAqIDAuNTtcblxuICAgICAgICBhd2FpdCByZXBvc2l0b3J5Lmluc2VydFBhc3NlZENvdXJzZSh1c2VySUQsIGNvdXJzZUtleSwgZGVmYXVsdFhQLCBmYWlsc0NvdW50KTtcbiAgICAgICAgLy8gYXdhaXQgdXNlcnNTZXJ2aWNlLmluY3JlbWVudFVzZXJYUCh1c2VySUQsIGRlZmF1bHRYUCk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldFBhc3NlZENvdXJzZXNCeVVzZXJJRCxcbiAgICAgICAgaW5zZXJ0UGFzc2VkQ291cnNlXG4gICAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJQYXNzZWRDb3Vyc2VzU2VydmljZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSx3QkFBd0IsR0FBR0EsQ0FBQ0MsVUFBVSxFQUFFQyxZQUFZLEtBQUs7RUFDM0QsTUFBTUMsd0JBQXdCLEdBQUcsTUFBT0MsTUFBTSxJQUFLO0lBQy9DLE9BQU9ILFVBQVUsQ0FBQ0Usd0JBQXdCLENBQUNDLE1BQU0sQ0FBQztFQUN0RCxDQUFDO0VBRUQsTUFBTUMsa0JBQWtCLEdBQUcsTUFBQUEsQ0FBT0QsTUFBTSxFQUFFRSxTQUFTLEVBQUVDLFVBQVUsS0FBSztJQUNoRSxJQUFJQyxTQUFTLEdBQUcsRUFBRTtJQUNsQkEsU0FBUyxJQUFJRCxVQUFVLEdBQUcsR0FBRztJQUU3QixNQUFNTixVQUFVLENBQUNJLGtCQUFrQixDQUFDRCxNQUFNLEVBQUVFLFNBQVMsRUFBRUUsU0FBUyxFQUFFRCxVQUFVLENBQUM7SUFDN0U7O0lBRUEsT0FBTyxJQUFJO0VBQ2YsQ0FBQztFQUVELE9BQU87SUFDSEosd0JBQXdCO0lBQ3hCRTtFQUNKLENBQUM7QUFDTCxDQUFDO0FBQUMsSUFBQUksUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFYVgsd0JBQXdCIn0=","map":{"version":3,"names":["userPassedCoursesService","repository","usersService","getPassedCoursesByUserID","userID","insertPassedCourse","courseKey","failsCount","defaultXP","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/services/","sources":["userPassedCourses.js"],"sourcesContent":["/**\n * @param {userPassedCoursesRepository()} repository\n * @param {usersService} usersService\n */\nconst userPassedCoursesService = (repository, usersService) => {\n    const getPassedCoursesByUserID = async (userID) => {\n        return repository.getPassedCoursesByUserID(userID);\n    };\n\n    const insertPassedCourse = async (userID, courseKey, failsCount) => {\n        let defaultXP = 15;\n        defaultXP -= failsCount * 0.5;\n\n        await repository.insertPassedCourse(userID, courseKey, defaultXP, failsCount);\n        // await usersService.incrementUserXP(userID, defaultXP);\n\n        return true;\n    };\n\n    return {\n        getPassedCoursesByUserID,\n        insertPassedCourse\n    };\n};\n\nexport default userPassedCoursesService;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA,MAAMA,wBAAwB,GAAGA,CAACC,UAAU,EAAEC,YAAY,KAAK;EAC3D,MAAMC,wBAAwB,GAAG,MAAOC,MAAM,IAAK;IAC/C,OAAOH,UAAU,CAACE,wBAAwB,CAACC,MAAM,CAAC;EACtD,CAAC;EAED,MAAMC,kBAAkB,GAAG,MAAAA,CAAOD,MAAM,EAAEE,SAAS,EAAEC,UAAU,KAAK;IAChE,IAAIC,SAAS,GAAG,EAAE;IAClBA,SAAS,IAAID,UAAU,GAAG,GAAG;IAE7B,MAAMN,UAAU,CAACI,kBAAkB,CAACD,MAAM,EAAEE,SAAS,EAAEE,SAAS,EAAED,UAAU,CAAC;IAC7E;;IAEA,OAAO,IAAI;EACf,CAAC;EAED,OAAO;IACHJ,wBAAwB;IACxBE;EACJ,CAAC;AACL,CAAC;AAAC,IAAAI,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaX,wBAAwB"}},"mtime":1699070937737},"{\"assumptions\":{},\"sourceRoot\":\"/Users/yshmeel/Work/kazakh-backend/src/database/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/yshmeel/Work/kazakh-backend\",\"filename\":\"/Users/yshmeel/Work/kazakh-backend/src/database/userPassedCourses.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/yshmeel/Work/kazakh-backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.2:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _knex = require(\"knex\");\n/**\n * TABLE: user_passed_courses\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * course_key VARCHAR 512\n * gained_xp INT\n * fails_count INT\n * created_at DATE\n */\n/**\n * @param {Knex} knex\n */\nconst getPassedCoursesByUserID = knex => userID => {\n  return knex.select('id', 'course_key', 'gained_xp', 'fails_count', 'created_at').from('user_passed_courses').where('user_id', userID);\n};\nconst insertPassedCourse = knex => (userID, courseKey, gainedXP, failsCount) => {\n  return knex('user_passed_courses').insert({\n    user_id: userID,\n    course_key: courseKey,\n    gained_xp: gainedXP,\n    fails_count: failsCount,\n    created_at: knex.raw('NOW()')\n  }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userPassedCoursesRepository = knex => {\n  return {\n    getPassedCoursesByUserID: getPassedCoursesByUserID(knex),\n    insertPassedCourse: insertPassedCourse(knex)\n  };\n};\nvar _default = exports.default = userPassedCoursesRepository;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfa25leCIsInJlcXVpcmUiLCJnZXRQYXNzZWRDb3Vyc2VzQnlVc2VySUQiLCJrbmV4IiwidXNlcklEIiwic2VsZWN0IiwiZnJvbSIsIndoZXJlIiwiaW5zZXJ0UGFzc2VkQ291cnNlIiwiY291cnNlS2V5IiwiZ2FpbmVkWFAiLCJmYWlsc0NvdW50IiwiaW5zZXJ0IiwidXNlcl9pZCIsImNvdXJzZV9rZXkiLCJnYWluZWRfeHAiLCJmYWlsc19jb3VudCIsImNyZWF0ZWRfYXQiLCJyYXciLCJyZXR1cm5pbmciLCJ1c2VyUGFzc2VkQ291cnNlc1JlcG9zaXRvcnkiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMveXNobWVlbC9Xb3JrL2themFraC1iYWNrZW5kL3NyYy9kYXRhYmFzZS8iLCJzb3VyY2VzIjpbInVzZXJQYXNzZWRDb3Vyc2VzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tIFwia25leFwiXG5cbi8qKlxuICogVEFCTEU6IHVzZXJfcGFzc2VkX2NvdXJzZXNcbiAqIFNUUlVDVFVSRTpcbiAqIGlkIElOVCBBSVxuICogdXNlcl9pZCBJTlRcbiAqIGNvdXJzZV9rZXkgVkFSQ0hBUiA1MTJcbiAqIGdhaW5lZF94cCBJTlRcbiAqIGZhaWxzX2NvdW50IElOVFxuICogY3JlYXRlZF9hdCBEQVRFXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqL1xuY29uc3QgZ2V0UGFzc2VkQ291cnNlc0J5VXNlcklEID0gKGtuZXgpID0+ICh1c2VySUQpID0+IHtcbiAgICByZXR1cm4ga25leC5zZWxlY3QoJ2lkJywgJ2NvdXJzZV9rZXknLCAnZ2FpbmVkX3hwJywgJ2ZhaWxzX2NvdW50JywnY3JlYXRlZF9hdCcpXG4gICAgICAgIC5mcm9tKCd1c2VyX3Bhc3NlZF9jb3Vyc2VzJylcbiAgICAgICAgLndoZXJlKCd1c2VyX2lkJywgdXNlcklEKTtcbn07XG5cbmNvbnN0IGluc2VydFBhc3NlZENvdXJzZSA9IChrbmV4KSA9PiAodXNlcklELCBjb3Vyc2VLZXksIGdhaW5lZFhQLCBmYWlsc0NvdW50KSA9PiB7XG4gICAgcmV0dXJuIGtuZXgoJ3VzZXJfcGFzc2VkX2NvdXJzZXMnKS5pbnNlcnQoe1xuICAgICAgICB1c2VyX2lkOiB1c2VySUQsXG4gICAgICAgIGNvdXJzZV9rZXk6IGNvdXJzZUtleSxcbiAgICAgICAgZ2FpbmVkX3hwOiBnYWluZWRYUCxcbiAgICAgICAgZmFpbHNfY291bnQ6IGZhaWxzQ291bnQsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IGtuZXgucmF3KCdOT1coKScpXG4gICAgfSkucmV0dXJuaW5nKCdpZCcpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge0tuZXh9IGtuZXhcbiAqIEByZXR1cm5zIHt7Z2V0VXNlckJ5VG9rZW46IChmdW5jdGlvbigqKTogZnVuY3Rpb24oKik6ICopfX1cbiAqL1xuY29uc3QgdXNlclBhc3NlZENvdXJzZXNSZXBvc2l0b3J5ID0gKGtuZXgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRQYXNzZWRDb3Vyc2VzQnlVc2VySUQ6IGdldFBhc3NlZENvdXJzZXNCeVVzZXJJRChrbmV4KSxcbiAgICAgICAgaW5zZXJ0UGFzc2VkQ291cnNlOiBpbnNlcnRQYXNzZWRDb3Vyc2Uoa25leCksXG4gICAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJQYXNzZWRDb3Vyc2VzUmVwb3NpdG9yeTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsS0FBQSxHQUFBQyxPQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyx3QkFBd0IsR0FBSUMsSUFBSSxJQUFNQyxNQUFNLElBQUs7RUFDbkQsT0FBT0QsSUFBSSxDQUFDRSxNQUFNLENBQUMsSUFBSSxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsYUFBYSxFQUFDLFlBQVksQ0FBQyxDQUMxRUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQzNCQyxLQUFLLENBQUMsU0FBUyxFQUFFSCxNQUFNLENBQUM7QUFDakMsQ0FBQztBQUVELE1BQU1JLGtCQUFrQixHQUFJTCxJQUFJLElBQUssQ0FBQ0MsTUFBTSxFQUFFSyxTQUFTLEVBQUVDLFFBQVEsRUFBRUMsVUFBVSxLQUFLO0VBQzlFLE9BQU9SLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDUyxNQUFNLENBQUM7SUFDdENDLE9BQU8sRUFBRVQsTUFBTTtJQUNmVSxVQUFVLEVBQUVMLFNBQVM7SUFDckJNLFNBQVMsRUFBRUwsUUFBUTtJQUNuQk0sV0FBVyxFQUFFTCxVQUFVO0lBQ3ZCTSxVQUFVLEVBQUVkLElBQUksQ0FBQ2UsR0FBRyxDQUFDLE9BQU87RUFDaEMsQ0FBQyxDQUFDLENBQUNDLFNBQVMsQ0FBQyxJQUFJLENBQUM7QUFDdEIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLDJCQUEyQixHQUFJakIsSUFBSSxJQUFLO0VBQzFDLE9BQU87SUFDSEQsd0JBQXdCLEVBQUVBLHdCQUF3QixDQUFDQyxJQUFJLENBQUM7SUFDeERLLGtCQUFrQixFQUFFQSxrQkFBa0IsQ0FBQ0wsSUFBSTtFQUMvQyxDQUFDO0FBQ0wsQ0FBQztBQUFDLElBQUFrQixRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVhSCwyQkFBMkIifQ==","map":{"version":3,"names":["_knex","require","getPassedCoursesByUserID","knex","userID","select","from","where","insertPassedCourse","courseKey","gainedXP","failsCount","insert","user_id","course_key","gained_xp","fails_count","created_at","raw","returning","userPassedCoursesRepository","_default","exports","default"],"sourceRoot":"/Users/yshmeel/Work/kazakh-backend/src/database/","sources":["userPassedCourses.js"],"sourcesContent":["import { Knex } from \"knex\"\n\n/**\n * TABLE: user_passed_courses\n * STRUCTURE:\n * id INT AI\n * user_id INT\n * course_key VARCHAR 512\n * gained_xp INT\n * fails_count INT\n * created_at DATE\n */\n\n/**\n * @param {Knex} knex\n */\nconst getPassedCoursesByUserID = (knex) => (userID) => {\n    return knex.select('id', 'course_key', 'gained_xp', 'fails_count','created_at')\n        .from('user_passed_courses')\n        .where('user_id', userID);\n};\n\nconst insertPassedCourse = (knex) => (userID, courseKey, gainedXP, failsCount) => {\n    return knex('user_passed_courses').insert({\n        user_id: userID,\n        course_key: courseKey,\n        gained_xp: gainedXP,\n        fails_count: failsCount,\n        created_at: knex.raw('NOW()')\n    }).returning('id');\n};\n\n/**\n * @param {Knex} knex\n * @returns {{getUserByToken: (function(*): function(*): *)}}\n */\nconst userPassedCoursesRepository = (knex) => {\n    return {\n        getPassedCoursesByUserID: getPassedCoursesByUserID(knex),\n        insertPassedCourse: insertPassedCourse(knex),\n    };\n};\n\nexport default userPassedCoursesRepository;\n"],"mappings":";;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA,MAAMC,wBAAwB,GAAIC,IAAI,IAAMC,MAAM,IAAK;EACnD,OAAOD,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,YAAY,EAAE,WAAW,EAAE,aAAa,EAAC,YAAY,CAAC,CAC1EC,IAAI,CAAC,qBAAqB,CAAC,CAC3BC,KAAK,CAAC,SAAS,EAAEH,MAAM,CAAC;AACjC,CAAC;AAED,MAAMI,kBAAkB,GAAIL,IAAI,IAAK,CAACC,MAAM,EAAEK,SAAS,EAAEC,QAAQ,EAAEC,UAAU,KAAK;EAC9E,OAAOR,IAAI,CAAC,qBAAqB,CAAC,CAACS,MAAM,CAAC;IACtCC,OAAO,EAAET,MAAM;IACfU,UAAU,EAAEL,SAAS;IACrBM,SAAS,EAAEL,QAAQ;IACnBM,WAAW,EAAEL,UAAU;IACvBM,UAAU,EAAEd,IAAI,CAACe,GAAG,CAAC,OAAO;EAChC,CAAC,CAAC,CAACC,SAAS,CAAC,IAAI,CAAC;AACtB,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAMC,2BAA2B,GAAIjB,IAAI,IAAK;EAC1C,OAAO;IACHD,wBAAwB,EAAEA,wBAAwB,CAACC,IAAI,CAAC;IACxDK,kBAAkB,EAAEA,kBAAkB,CAACL,IAAI;EAC/C,CAAC;AACL,CAAC;AAAC,IAAAkB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEaH,2BAA2B"}},"mtime":1699071449289}}